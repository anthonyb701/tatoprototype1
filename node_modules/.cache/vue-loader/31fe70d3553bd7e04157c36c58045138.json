{"remainingRequest":"F:\\vue.js develop\\tatoproto\\tatoprototype1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\vue.js develop\\tatoproto\\tatoprototype1\\src\\components\\List.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\vue.js develop\\tatoproto\\tatoprototype1\\src\\components\\List.vue","mtime":1613145096513},{"path":"F:\\vue.js develop\\tatoproto\\tatoprototype1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1594980559340},{"path":"F:\\vue.js develop\\tatoproto\\tatoprototype1\\node_modules\\babel-loader\\lib\\index.js","mtime":1594980559174},{"path":"F:\\vue.js develop\\tatoproto\\tatoprototype1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1594980559340},{"path":"F:\\vue.js develop\\tatoproto\\tatoprototype1\\node_modules\\vue-loader\\lib\\index.js","mtime":1594980575169}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICBuYW1lOiAnbGlzdCcsDQogICBjb21wdXRlZDogew0KICAgICAgYXBwb2ludG1lbnRzKCkgew0KICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuc29ydGVkQXBwb2ludG1lbnRzDQogICAgICB9LA0KICAgICAgZmVhdHVyZWRBcHBvaW50bWVudHMoKSB7DQogICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy5mZWF0dXJlZEFwcG9pbnRtZW50cw0KICAgICAgfSwNCiAgICAgIGR1YmxpY2F0ZUFwcG9pbnRlbWVudHNCeUluaXRpYWxzKCl7DQogICAgICAgICANCiAgICAgIH0sDQogICAgICBzb3J0ZWQyMDIwYXBwb2ludG1lbnRzKCl7DQogICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy5zb3J0ZWQyMDIwYXBwb2ludG1lbnRzIA0KICAgICAgfSwNCiAgICAgIHNvcnRlZDIwMjFhcHBvaW50bWVudHMoKXsNCiAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLnNvcnRlZDIwMjFhcHBvaW50bWVudHMNCiAgICAgIH0sDQogICAgICBjdXJyZW50VXNlcigpew0KICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuY3VycmVudFVzZXINCiAgICAgIH0sDQogICAgICBpc1N1cGVyQWRtaW4oKXsNCiAgICAgICAgIGlmKHRoaXMuY3VycmVudFVzZXIgPT09IHRoaXMuJHN0b3JlLmdldHRlcnMuaXNBZG1pbil7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICAgICAgICB9DQogICAgICB9LA0KICAgICAgaXRlbXMoKSB7DQogICAgICAgICBsZXQgcmV0QXJyID0gWw0KICAgICAgICAgICAgJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycsDQogICAgICAgICAgICAuLi50aGlzLiRzdG9yZS5nZXR0ZXJzLml0ZW1zDQogICAgICAgICBdDQogICAgICAgICByZXR1cm4gcmV0QXJyDQogICAgICB9LA0KICAgICAgYWxsQXBwb2ludG1lbnRzOiB7DQogICAgICAgICBnZXQoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5pc0FyY2hpdmUgIT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuZmVhdHVyZWRBcHBvaW50bWVudHMNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy5zb3J0ZWRBcHBvaW50bWVudHMNCiAgICAgICAgICAgIH0NCiAgICAgICAgIH0sDQogICAgICAgICBzZXQoKSB7DQoNCiAgICAgICAgIH0NCg0KICAgICAgfSwNCiAgICAgIGZpbHRlcmVkQXBwb2ludG1lbnRzKCkgew0KICAgICAgICAgbGV0IGZpbHRlcmVkQXJyYXkgPSBbXQ0KICAgICAgICAgaWYgKHRoaXMucGlja2VkU3VyZ2VvbiA9PT0gJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycgJiYgdGhpcy5zZWFyY2hOYW1lLnRyaW0oKSA9PT0gJycgJiYgdGhpcy5yZWFkeURhdGUgPT09IG51bGwgJiYNCiAgICAgICAgICAgIHRoaXMuc2VhcmNoT3BfbnVtYmVyLnRyaW0oKSA9PT0gJycgJiYgdGhpcy5waWNrZWRSYW5rID09PSAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJyAmJg0KICAgICAgICAgICAgdGhpcy5yZWFkeURhdGVFbnRyeSA9PT0gbnVsbCAmJiB0aGlzLnJlYWR5RGF0ZUxlZnQgPT09IG51bGwgJiYgdGhpcy5zZWFyY2hUaXRsZS50cmltKCkgPT09ICcnICYmDQogICAgICAgICAgICB0aGlzLnNlYXJjaE9wX2NvZGUudHJpbSgpID09PSAnJyAmJiB0aGlzLnNlYXJjaENvbXBsZXhpdHkudHJpbSgpID09PSAnJyAmJiB0aGlzLnNlYXJjaE5vem9sb2dpYS50cmltKCkgPT09ICcnICYmDQogICAgICAgICAgICB0aGlzLnBpY2tlZFRpbWVUeXBlID09PSAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJyAmJiB0aGlzLnBpY2tlZFVyZ2VuY3lUeXBlID09PSAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJyAmJiB0aGlzLnBpY2tlZE9wZXJhdGlvblR5cGUgPT09ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnICYmDQogICAgICAgICAgICB0aGlzLnBpY2tlZEFuZXN0aGVzaWFUeXBlID09PSAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJyAmJiB0aGlzLnBpY2tlZFNwb3RUeXBlID09PSAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJyAmJiB0aGlzLnBpY2VrZFVsdGltYXRlVHlwZSA9PT0gJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycgJiYNCiAgICAgICAgICAgIHRoaXMucGlja2VkQXNzaXN0YW50ID09PSAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJyAmJiB0aGlzLnBpY2tlZEFuZXN0aGVzaW9sb2dpc3QgPT09ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnICYmIHRoaXMucGlja2VkTWVkc2lzdGVyLnRyaW0oKSA9PT0gJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycNCiAgICAgICAgICAgICYmIHRoaXMuc2VhcmNoQWdlLnRyaW0oKSA9PT0gJycgJiYgdGhpcy5zZWFyY2hTaWNrbmVzc0hpc3RvcnkudHJpbSgpID09PSAnJyAmJiB0aGlzLnNlYXJjaERpYWdub3Npc1VsdGltYXRlLnRyaW0oKSA9PT0gJycgJiYgdGhpcy5zZWFyY2hDb21wbGljYXRpb24gPT09ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnICYmDQogICAgICAgICAgICB0aGlzLnBpY2tlZENvbXBsZXhpdHkgPT09ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnKSB7DQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgIGxldCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzEnKQ0KICAgICAgICAgICAgICAgaWYoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCd1bml0LWNvbG9yJykpew0KICAgICAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgndW5pdC1jb2xvcicpDQogICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF81JykuY2xhc3NMaXN0LnJlbW92ZSgndW5pdC1jb2xvcicpDQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8xNCcpLmNsYXNzTGlzdC5yZW1vdmUoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXRfMTYnKS5jbGFzc0xpc3QucmVtb3ZlKCd1bml0LWNvbG9yJykNCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzI1JykuY2xhc3NMaXN0LnJlbW92ZSgndW5pdC1jb2xvcicpDQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8xOCcpLmNsYXNzTGlzdC5yZW1vdmUoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXRfMicpLmNsYXNzTGlzdC5yZW1vdmUoJ3VuaXQtY29sb3InKSANCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzMnKS5jbGFzc0xpc3QucmVtb3ZlKCd1bml0LWNvbG9yJykNCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzQnKS5jbGFzc0xpc3QucmVtb3ZlKCd1bml0LWNvbG9yJykNCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzYnKS5jbGFzc0xpc3QucmVtb3ZlKCd1bml0LWNvbG9yJykNCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzcnKS5jbGFzc0xpc3QucmVtb3ZlKCd1bml0LWNvbG9yJykNCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzIxJykuY2xhc3NMaXN0LnJlbW92ZSgndW5pdC1jb2xvcicpDQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF84JykuY2xhc3NMaXN0LnJlbW92ZSgndW5pdC1jb2xvcicpDQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF85JykuY2xhc3NMaXN0LnJlbW92ZSgndW5pdC1jb2xvcicpDQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8xMScpLmNsYXNzTGlzdC5yZW1vdmUoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXRfMjQnKS5jbGFzc0xpc3QucmVtb3ZlKCd1bml0LWNvbG9yJykNCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzEwJykuY2xhc3NMaXN0LnJlbW92ZSgndW5pdC1jb2xvcicpDQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8xMicpLmNsYXNzTGlzdC5yZW1vdmUoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXRfMTMnKS5jbGFzc0xpc3QucmVtb3ZlKCd1bml0LWNvbG9yJykNCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzE1JykuY2xhc3NMaXN0LnJlbW92ZSgndW5pdC1jb2xvcicpDQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8xNycpLmNsYXNzTGlzdC5yZW1vdmUoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXRfMTknKS5jbGFzc0xpc3QucmVtb3ZlKCd1bml0LWNvbG9yJykNCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzIwJykuY2xhc3NMaXN0LnJlbW92ZSgndW5pdC1jb2xvcicpDQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8yMicpLmNsYXNzTGlzdC5yZW1vdmUoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXRfMjMnKS5jbGFzc0xpc3QucmVtb3ZlKCd1bml0LWNvbG9yJykNCiAgICAgICAgICAgIH0sIDEwKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICByZXR1cm4gdGhpcy5hbGxBcHBvaW50bWVudHM7DQogICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5hbGxBcHBvaW50bWVudHMuZm9yRWFjaChhcHBvaW50ID0+IHsNCiAgICAgICAgICAgICAgIGxldCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzEnKQ0KICAgICAgICAgICAgICAgaWYgKHRoaXMucGlja2VkU3VyZ2VvbiAhPT0gJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycpIHsNCiAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGlja2VkU3VyZ2VvbiA9PT0gYXBwb2ludC5zdXJnZW9uKSB7DQogICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZEFycmF5LnB1c2goYXBwb2ludCkNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICBmaWx0ZXJlZEFycmF5ID0gdGhpcy5hbGxBcHBvaW50bWVudHMNCiAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgIA0KDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLy8gcmFuayANCg0KICAgICAgICAgICAgaWYgKHRoaXMucGlja2VkUmFuayAhPT0gJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycpIHsNCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzUnKS5jbGFzc0xpc3QuYWRkKCd1bml0LWNvbG9yJykNCiAgICAgICAgICAgICAgIGxldCBSYW5rSW5kZXhlcyA9IFtdDQogICAgICAgICAgICAgICBmaWx0ZXJlZEFycmF5LmZvckVhY2goYXBwb2ludCA9PiB7DQogICAgICAgICAgICAgICAgICBpZiAodGhpcy5waWNrZWRSYW5rICE9PSAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJykgew0KICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gZmlsdGVyZWRBcnJheS5pbmRleE9mKGFwcG9pbnQpDQogICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5waWNrZWRSYW5rICE9PSBhcHBvaW50LnJhbmspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFJhbmtJbmRleGVzLnB1c2goaW5kZXgpDQogICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgZmlsdGVyZWRBcnJheSA9IGZpbHRlcmVkQXJyYXkuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgIHJldHVybiBSYW5rSW5kZXhlcy5pbmRleE9mKGluZGV4KSA9PSAtMTsNCiAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXRfNScpLmNsYXNzTGlzdC5yZW1vdmUoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gdGl0bGUgb3BlcmF0aW9uIA0KICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoVGl0bGUudHJpbSgpICE9PSAnJykgew0KICAgICAgICAgICAgICAgbGV0IGFyck9mVGl0bGVJbmRleGVzID0gW10NCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzE0JykuY2xhc3NMaXN0LmFkZCgndW5pdC1jb2xvcicpDQogICAgICAgICAgICAgICBmaWx0ZXJlZEFycmF5LmZvckVhY2goYXBwb2ludCA9PiB7DQogICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWFyY2hUaXRsZS50cmltKCkgIT09ICcnKSB7DQoNCiAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IGZpbHRlcmVkQXJyYXkuaW5kZXhPZihhcHBvaW50KQ0KICAgICAgICAgICAgICAgICAgICAgaWYgKGFwcG9pbnQudGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0aGlzLnNlYXJjaFRpdGxlLnRvTG93ZXJDYXNlKCkpID09IGZhbHNlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhcnJPZlRpdGxlSW5kZXhlcy5wdXNoKGluZGV4KQ0KICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgIGZpbHRlcmVkQXJyYXkgPSBmaWx0ZXJlZEFycmF5LmZpbHRlcihmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7DQogICAgICAgICAgICAgICAgICByZXR1cm4gYXJyT2ZUaXRsZUluZGV4ZXMuaW5kZXhPZihpbmRleCkgPT0gLTE7DQogICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzE0JykuY2xhc3NMaXN0LnJlbW92ZSgndW5pdC1jb2xvcicpDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIE9wZXJhdGlvbiBjb2RlIA0KDQogICAgICAgICAgICBpZiAodGhpcy5zZWFyY2hPcF9jb2RlLnRyaW0oKSAhPT0gJycpIHsNCiAgICAgICAgICAgICAgIGxldCBjb2RlSW5kZXhlcyA9IFtdDQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8xNicpLmNsYXNzTGlzdC5hZGQoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgICAgZmlsdGVyZWRBcnJheS5mb3JFYWNoKGFwcG9pbnQgPT4gew0KICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoT3BfY29kZS50cmltKCkgIT09ICcnKSB7DQogICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBmaWx0ZXJlZEFycmF5LmluZGV4T2YoYXBwb2ludCkNCiAgICAgICAgICAgICAgICAgICAgIGlmIChhcHBvaW50Lm9wX2NvZGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0aGlzLnNlYXJjaE9wX2NvZGUudG9Mb3dlckNhc2UoKSkgPT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVJbmRleGVzLnB1c2goaW5kZXgpDQoNCiAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICBmaWx0ZXJlZEFycmF5ID0gZmlsdGVyZWRBcnJheS5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgew0KICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvZGVJbmRleGVzLmluZGV4T2YoaW5kZXgpID09IC0xOw0KICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8xNicpLmNsYXNzTGlzdC5yZW1vdmUoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBDb21wbGV4aXR5IA0KDQogICAgICAgICAgICBpZiAodGhpcy5zZWFyY2hDb21wbGV4aXR5LnRyaW0oKSAhPT0gJycpIHsNCiAgICAgICAgICAgICAgIGxldCBhcnJPZkNvbXBsZXhpdHlJbmRleGVzID0gW10NCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzI1JykuY2xhc3NMaXN0LmFkZCgndW5pdC1jb2xvcicpDQogICAgICAgICAgICAgICBmaWx0ZXJlZEFycmF5LmZvckVhY2goYXBwb2ludCA9PiB7DQogICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWFyY2hDb21wbGV4aXR5LnRyaW0oKSAhPT0gJycgKSB7DQogICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBmaWx0ZXJlZEFycmF5LmluZGV4T2YoYXBwb2ludCkNCiAgICAgICAgICAgICAgICAgICAgIGlmKGFwcG9pbnQuY29tcGxleGl0eSAhPSB1bmRlZmluZWQpew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFwcG9pbnQuY29tcGxleGl0eS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRoaXMuc2VhcmNoQ29tcGxleGl0eS50b0xvd2VyQ2FzZSgpKSA9PSBmYWxzZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgYXJyT2ZDb21wbGV4aXR5SW5kZXhlcy5wdXNoKGluZGV4KQ0KICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFyck9mQ29tcGxleGl0eUluZGV4ZXMucHVzaChpbmRleCkNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgZmlsdGVyZWRBcnJheSA9IGZpbHRlcmVkQXJyYXkuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgIHJldHVybiBhcnJPZkNvbXBsZXhpdHlJbmRleGVzLmluZGV4T2YoaW5kZXgpID09IC0xOw0KICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8yNScpLmNsYXNzTGlzdC5yZW1vdmUoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBub3psb2dpYQ0KDQogICAgICAgICAgICBpZiAodGhpcy5zZWFyY2hOb3pvbG9naWEudHJpbSgpICE9PSAnJykgew0KICAgICAgICAgICAgICAgbGV0IGFyck9mTm96b2xvZ2lhSW5kZXhlcyA9IFtdDQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8xOCcpLmNsYXNzTGlzdC5hZGQoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgICAgZmlsdGVyZWRBcnJheS5mb3JFYWNoKGFwcG9pbnQgPT4gew0KICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoTm96b2xvZ2lhLnRyaW0oKSAhPT0gJycpIHsNCiAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IGZpbHRlcmVkQXJyYXkuaW5kZXhPZihhcHBvaW50KQ0KICAgICAgICAgICAgICAgICAgICAgaWYgKGFwcG9pbnQubm96b2xvZ2lhLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGhpcy5zZWFyY2hOb3pvbG9naWEudG9Mb3dlckNhc2UoKSkgPT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFyck9mTm96b2xvZ2lhSW5kZXhlcy5wdXNoKGluZGV4KQ0KICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgIGZpbHRlcmVkQXJyYXkgPSBmaWx0ZXJlZEFycmF5LmZpbHRlcihmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7DQogICAgICAgICAgICAgICAgICByZXR1cm4gYXJyT2ZOb3pvbG9naWFJbmRleGVzLmluZGV4T2YoaW5kZXgpID09IC0xOw0KICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8xOCcpLmNsYXNzTGlzdC5yZW1vdmUoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBBc3Npc3RhbnQNCiAgICAgICAgICAgIGlmICh0aGlzLnBpY2tlZEFzc2lzdGFudC50cmltKCkgIT09ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnKSB7DQogICAgICAgICAgICAgICBsZXQgYXNzaXN0YW50SW5kZXhlcyA9IFtdDQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8yJykuY2xhc3NMaXN0LmFkZCgndW5pdC1jb2xvcicpDQogICAgICAgICAgICAgICBmaWx0ZXJlZEFycmF5LmZvckVhY2goYXBwb2ludCA9PiB7DQogICAgICAgICAgICAgICAgICBpZiAodGhpcy5waWNrZWRBc3Npc3RhbnQudHJpbSgpICE9PSAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJykgew0KICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gZmlsdGVyZWRBcnJheS5pbmRleE9mKGFwcG9pbnQpDQogICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5waWNrZWRBc3Npc3RhbnQgIT09IGFwcG9pbnQuYXNzaXN0YW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhc3Npc3RhbnRJbmRleGVzLnB1c2goaW5kZXgpDQogICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgZmlsdGVyZWRBcnJheSA9IGZpbHRlcmVkQXJyYXkuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgIHJldHVybiBhc3Npc3RhbnRJbmRleGVzLmluZGV4T2YoaW5kZXgpID09IC0xOw0KICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8yJykuY2xhc3NMaXN0LnJlbW92ZSgndW5pdC1jb2xvcicpDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIEFuZXN0aGVzaW9sb2dpc3QNCiAgICAgICAgICAgIGlmICh0aGlzLnBpY2tlZEFuZXN0aGVzaW9sb2dpc3QudHJpbSgpICE9PSAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJykgew0KICAgICAgICAgICAgICAgbGV0IGFuZXN0aGVzaW9sb2dpc3RJbmRleGVzID0gW10NCiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8zJykuY2xhc3NMaXN0LmFkZCgndW5pdC1jb2xvcicpDQogICAgICAgICAgICAgICBmaWx0ZXJlZEFycmF5LmZvckVhY2goYXBwb2ludCA9PiB7DQogICAgICAgICAgICAgICAgICBpZiAodGhpcy5waWNrZWRBbmVzdGhlc2lvbG9naXN0LnRyaW0oKSAhPT0gJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycpIHsNCiAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IGZpbHRlcmVkQXJyYXkuaW5kZXhPZihhcHBvaW50KQ0KICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGlja2VkQW5lc3RoZXNpb2xvZ2lzdCAhPT0gYXBwb2ludC5hbmVzdGhlc2lvbG9naXN0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhbmVzdGhlc2lvbG9naXN0SW5kZXhlcy5wdXNoKGluZGV4KQ0KICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgIGZpbHRlcmVkQXJyYXkgPSBmaWx0ZXJlZEFycmF5LmZpbHRlcihmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7DQogICAgICAgICAgICAgICAgICByZXR1cm4gYW5lc3RoZXNpb2xvZ2lzdEluZGV4ZXMuaW5kZXhPZihpbmRleCkgPT0gLTE7DQogICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8zJykuY2xhc3NMaXN0LnJlbW92ZSgndW5pdC1jb2xvcicpDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIE1lZHNpc3Rlcg0KICAgICAgICAgICAgaWYgKHRoaXMucGlja2VkTWVkc2lzdGVyLnRyaW0oKSAhPT0gJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycpIHsNCiAgICAgICAgICAgICAgIGxldCBtZWRzaXN0ZXJJbmRleGVzID0gW10NCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzQnKS5jbGFzc0xpc3QuYWRkKCd1bml0LWNvbG9yJykNCiAgICAgICAgICAgICAgIGZpbHRlcmVkQXJyYXkuZm9yRWFjaChhcHBvaW50ID0+IHsNCiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBpY2tlZE1lZHNpc3Rlci50cmltKCkgIT09ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnKSB7DQogICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBmaWx0ZXJlZEFycmF5LmluZGV4T2YoYXBwb2ludCkNCiAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBpY2tlZE1lZHNpc3RlciAhPT0gYXBwb2ludC5tZWRzaXN0ZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1lZHNpc3RlckluZGV4ZXMucHVzaChpbmRleCkNCiAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICBmaWx0ZXJlZEFycmF5ID0gZmlsdGVyZWRBcnJheS5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgew0KICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lZHNpc3RlckluZGV4ZXMuaW5kZXhPZihpbmRleCkgPT0gLTE7DQogICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzQnKS5jbGFzc0xpc3QucmVtb3ZlKCd1bml0LWNvbG9yJykNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gdGltZSBUeXBlIA0KDQogICAgICAgICAgICBpZiAodGhpcy5waWNrZWRUaW1lVHlwZSAhPT0gJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycpIHsNCiAgICAgICAgICAgICAgIGxldCB0aW1lVHlwZUluZGV4ZXMgPSBbXQ0KICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXRfNicpLmNsYXNzTGlzdC5hZGQoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgICAgZmlsdGVyZWRBcnJheS5mb3JFYWNoKGFwcG9pbnQgPT4gew0KICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGlja2VkVGltZVR5cGUgIT09ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnKSB7DQogICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBmaWx0ZXJlZEFycmF5LmluZGV4T2YoYXBwb2ludCkNCiAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBpY2tlZFRpbWVUeXBlICE9PSBhcHBvaW50LnRpbWVUeXBlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aW1lVHlwZUluZGV4ZXMucHVzaChpbmRleCkNCiAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICBmaWx0ZXJlZEFycmF5ID0gZmlsdGVyZWRBcnJheS5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgew0KICAgICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVUeXBlSW5kZXhlcy5pbmRleE9mKGluZGV4KSA9PSAtMTsNCiAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXRfNicpLmNsYXNzTGlzdC5yZW1vdmUoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyB1cmdlbmN5IHR5cGUNCg0KICAgICAgICAgICAgaWYgKHRoaXMucGlja2VkVXJnZW5jeVR5cGUgIT09ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnKSB7DQogICAgICAgICAgICAgICBsZXQgdXJnZW5jeVR5cGVJbmRleGVzID0gW10NCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzcnKS5jbGFzc0xpc3QuYWRkKCd1bml0LWNvbG9yJykNCiAgICAgICAgICAgICAgIGZpbHRlcmVkQXJyYXkuZm9yRWFjaChhcHBvaW50ID0+IHsNCiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBpY2tlZFVyZ2VuY3lUeXBlICE9PSAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJykgew0KICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gZmlsdGVyZWRBcnJheS5pbmRleE9mKGFwcG9pbnQpDQogICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5waWNrZWRVcmdlbmN5VHlwZSAhPT0gYXBwb2ludC51cmdlbmN5VHlwZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdXJnZW5jeVR5cGVJbmRleGVzLnB1c2goaW5kZXgpDQogICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgZmlsdGVyZWRBcnJheSA9IGZpbHRlcmVkQXJyYXkuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgIHJldHVybiB1cmdlbmN5VHlwZUluZGV4ZXMuaW5kZXhPZihpbmRleCkgPT0gLTE7DQogICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzcnKS5jbGFzc0xpc3QucmVtb3ZlKCd1bml0LWNvbG9yJykNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gb3BlcmF0aW9uIHR5cGUNCiAgICAgICAgICAgIGlmICh0aGlzLnBpY2tlZE9wZXJhdGlvblR5cGUgIT09ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnKSB7DQogICAgICAgICAgICAgICBsZXQgb3BlcmF0aW9uVHlwZUluZGV4ZXMgPSBbXQ0KICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXRfOCcpLmNsYXNzTGlzdC5hZGQoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgICAgZmlsdGVyZWRBcnJheS5mb3JFYWNoKGFwcG9pbnQgPT4gew0KICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3BlcmF0aW9uVHlwZSAhPT0gJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycpIHsNCiAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IGZpbHRlcmVkQXJyYXkuaW5kZXhPZihhcHBvaW50KQ0KICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGlja2VkT3BlcmF0aW9uVHlwZSAhPT0gYXBwb2ludC5vcGVyYXRpb25UeXBlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25UeXBlSW5kZXhlcy5wdXNoKGluZGV4KQ0KICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgIGZpbHRlcmVkQXJyYXkgPSBmaWx0ZXJlZEFycmF5LmZpbHRlcihmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7DQogICAgICAgICAgICAgICAgICByZXR1cm4gb3BlcmF0aW9uVHlwZUluZGV4ZXMuaW5kZXhPZihpbmRleCkgPT0gLTE7DQogICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzgnKS5jbGFzc0xpc3QucmVtb3ZlKCd1bml0LWNvbG9yJykNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gYW5hc3RoZXNpYSB0eXBlDQoNCiAgICAgICAgICAgIGlmICh0aGlzLnBpY2tlZEFuZXN0aGVzaWFUeXBlICE9PSAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJykgew0KICAgICAgICAgICAgICAgbGV0IGFuZXN0aGVzaWFUeXBlSW5kZXhlcyA9IFtdDQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF85JykuY2xhc3NMaXN0LmFkZCgndW5pdC1jb2xvcicpDQogICAgICAgICAgICAgICBmaWx0ZXJlZEFycmF5LmZvckVhY2goYXBwb2ludCA9PiB7DQogICAgICAgICAgICAgICAgICBpZiAodGhpcy5waWNrZWRBbmVzdGhlc2lhVHlwZSAhPT0gJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycpIHsNCiAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IGZpbHRlcmVkQXJyYXkuaW5kZXhPZihhcHBvaW50KQ0KICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGlja2VkQW5lc3RoZXNpYVR5cGUgIT09IGFwcG9pbnQuYW5lc3RoZXNpYVR5cGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFuZXN0aGVzaWFUeXBlSW5kZXhlcy5wdXNoKGluZGV4KQ0KICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgIGZpbHRlcmVkQXJyYXkgPSBmaWx0ZXJlZEFycmF5LmZpbHRlcihmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7DQogICAgICAgICAgICAgICAgICByZXR1cm4gYW5lc3RoZXNpYVR5cGVJbmRleGVzLmluZGV4T2YoaW5kZXgpID09IC0xOw0KICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF85JykuY2xhc3NMaXN0LnJlbW92ZSgndW5pdC1jb2xvcicpDQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBjb21wbGljYXRpb24NCg0KICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoQ29tcGxpY2F0aW9uICE9PSAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJykgew0KICAgICAgICAgICAgICAgbGV0IGNvbXBsaWNhdGlvbkluZGV4ZXMgPSBbXQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzExJykuY2xhc3NMaXN0LmFkZCgndW5pdC1jb2xvcicpDQogICAgICAgICAgICAgICBmaWx0ZXJlZEFycmF5LmZvckVhY2goYXBwb2ludCA9PiB7DQogICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWFyY2hDb21wbGljYXRpb24gIT09ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnKSB7DQogICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBmaWx0ZXJlZEFycmF5LmluZGV4T2YoYXBwb2ludCkNCiAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlYXJjaENvbXBsaWNhdGlvbiAhPT0gYXBwb2ludC5jb21wbGljYXRpb24pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsaWNhdGlvbkluZGV4ZXMucHVzaChpbmRleCkNCiAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICBmaWx0ZXJlZEFycmF5ID0gZmlsdGVyZWRBcnJheS5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgew0KICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBsaWNhdGlvbkluZGV4ZXMuaW5kZXhPZihpbmRleCkgPT0gLTE7DQogICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXRfMTEnKS5jbGFzc0xpc3QucmVtb3ZlKCd1bml0LWNvbG9yJykNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIFBpY2tlZCBjb21wbGV4aXR5DQogICAgICAgICAgICBpZiAodGhpcy5waWNrZWRDb21wbGV4aXR5ICE9PSAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJykgew0KICAgICAgICAgICAgICAgbGV0IHBpY2tlZENvbXBsZXhpdHlJbmRleGVzID0gW10NCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzI0JykuY2xhc3NMaXN0LmFkZCgndW5pdC1jb2xvcicpDQogICAgICAgICAgICAgICBmaWx0ZXJlZEFycmF5LmZvckVhY2goYXBwb2ludCA9PiB7DQogICAgICAgICAgICAgICAgICBpZiAodGhpcy5waWNrZWRDb21wbGV4aXR5ICE9PSAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJykgew0KICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gZmlsdGVyZWRBcnJheS5pbmRleE9mKGFwcG9pbnQpDQogICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5waWNrZWRDb21wbGV4aXR5ICE9PSBhcHBvaW50LmNvbXBsZXhpdHlQaWNrZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBpY2tlZENvbXBsZXhpdHlJbmRleGVzLnB1c2goaW5kZXgpDQogICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgZmlsdGVyZWRBcnJheSA9IGZpbHRlcmVkQXJyYXkuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgIHJldHVybiBwaWNrZWRDb21wbGV4aXR5SW5kZXhlcy5pbmRleE9mKGluZGV4KSA9PSAtMTsNCiAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICANCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8yNCcpLmNsYXNzTGlzdC5yZW1vdmUoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gc3BvdCB0eXBlDQogICAgICAgICAgICBpZiAodGhpcy5waWNrZWRTcG90VHlwZSAhPT0gJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycpIHsNCiAgICAgICAgICAgICAgIGxldCBzcG90VHlwZUluZGV4ZXMgPSBbXQ0KICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXRfMTAnKS5jbGFzc0xpc3QuYWRkKCd1bml0LWNvbG9yJykNCiAgICAgICAgICAgICAgIGZpbHRlcmVkQXJyYXkuZm9yRWFjaChhcHBvaW50ID0+IHsNCiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBpY2tlZFNwb3RUeXBlICE9PSAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJykgew0KICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gZmlsdGVyZWRBcnJheS5pbmRleE9mKGFwcG9pbnQpDQogICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5waWNrZWRTcG90VHlwZSAhPT0gYXBwb2ludC5zcG90VHlwZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc3BvdFR5cGVJbmRleGVzLnB1c2goaW5kZXgpDQogICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgZmlsdGVyZWRBcnJheSA9IGZpbHRlcmVkQXJyYXkuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgIHJldHVybiBzcG90VHlwZUluZGV4ZXMuaW5kZXhPZihpbmRleCkgPT0gLTE7DQogICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzEwJykuY2xhc3NMaXN0LnJlbW92ZSgndW5pdC1jb2xvcicpDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIHVsdGltYXRlIHR5cGUNCiAgICAgICAgICAgIGlmICh0aGlzLnBpY2VrZFVsdGltYXRlVHlwZSAhPT0gJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycpIHsNCiAgICAgICAgICAgICAgIGxldCB1bHRpbWF0ZVR5cGVJbmRleGVzID0gW10NCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzEyJykuY2xhc3NMaXN0LmFkZCgndW5pdC1jb2xvcicpDQogICAgICAgICAgICAgICBmaWx0ZXJlZEFycmF5LmZvckVhY2goYXBwb2ludCA9PiB7DQogICAgICAgICAgICAgICAgICBpZiAodGhpcy5waWNla2RVbHRpbWF0ZVR5cGUgIT09ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnKSB7DQogICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBmaWx0ZXJlZEFycmF5LmluZGV4T2YoYXBwb2ludCkNCiAgICAgICAgICAgICAgICAgICAgIGlmKGFwcG9pbnQudWx0aW1hdGVUeXBlICE9IHVuZGVmaW5lZCl7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5waWNla2RVbHRpbWF0ZVR5cGUgIT09IGFwcG9pbnQudWx0aW1hdGVUeXBlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB1bHRpbWF0ZVR5cGVJbmRleGVzLnB1c2goaW5kZXgpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgdWx0aW1hdGVUeXBlSW5kZXhlcy5wdXNoKGluZGV4KQ0KICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgZmlsdGVyZWRBcnJheSA9IGZpbHRlcmVkQXJyYXkuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgIHJldHVybiB1bHRpbWF0ZVR5cGVJbmRleGVzLmluZGV4T2YoaW5kZXgpID09IC0xOw0KICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8xMicpLmNsYXNzTGlzdC5yZW1vdmUoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBuYW1lIGFuZCBsYXN0TmFtZQ0KICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoTmFtZS50cmltKCkgIT09ICcnKSB7DQogICAgICAgICAgICAgICBsZXQgYXJyT2ZJbmRleGVzID0gW10NCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzEzJykuY2xhc3NMaXN0LmFkZCgndW5pdC1jb2xvcicpDQogICAgICAgICAgICAgICBmaWx0ZXJlZEFycmF5LmZvckVhY2goYXBwb2ludCA9PiB7DQogICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWFyY2hOYW1lLnRyaW0oKSAhPT0gJycpIHsNCiAgICAgICAgICAgICAgICAgICAgIGxldCBwcml2YXRlTmFtZSA9IGAke2FwcG9pbnQudXNlci5maXJzdE5hbWV9ICR7YXBwb2ludC51c2VyLmxhc3ROYW1lfWANCg0KICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gZmlsdGVyZWRBcnJheS5pbmRleE9mKGFwcG9pbnQpDQogICAgICAgICAgICAgICAgICAgICBpZiAocHJpdmF0ZU5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0aGlzLnNlYXJjaE5hbWUudG9Mb3dlckNhc2UoKSkgPT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFyck9mSW5kZXhlcy5wdXNoKGluZGV4KQ0KDQogICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgZmlsdGVyZWRBcnJheSA9IGZpbHRlcmVkQXJyYXkuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgIHJldHVybiBhcnJPZkluZGV4ZXMuaW5kZXhPZihpbmRleCkgPT0gLTE7DQogICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzEzJykuY2xhc3NMaXN0LnJlbW92ZSgndW5pdC1jb2xvcicpDQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBhZ2UgDQogICAgICAgICAgICBpZiAodGhpcy5zZWFyY2hBZ2UudHJpbSgpICE9PSAnJykgew0KICAgICAgICAgICAgICAgbGV0IGFyck9mQWdlSW5kZXhlcyA9IFtdDQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8xNScpLmNsYXNzTGlzdC5hZGQoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgICAgZmlsdGVyZWRBcnJheS5mb3JFYWNoKGFwcG9pbnQgPT4gew0KICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoQWdlLnRyaW0oKSAhPT0gJycpIHsNCg0KICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gZmlsdGVyZWRBcnJheS5pbmRleE9mKGFwcG9pbnQpDQogICAgICAgICAgICAgICAgICAgICBpZiAoYXBwb2ludC5hZ2UudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRoaXMuc2VhcmNoQWdlLnRvTG93ZXJDYXNlKCkpID09IGZhbHNlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhcnJPZkFnZUluZGV4ZXMucHVzaChpbmRleCkNCg0KICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgIGZpbHRlcmVkQXJyYXkgPSBmaWx0ZXJlZEFycmF5LmZpbHRlcihmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7DQogICAgICAgICAgICAgICAgICByZXR1cm4gYXJyT2ZBZ2VJbmRleGVzLmluZGV4T2YoaW5kZXgpID09IC0xOw0KICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8xNScpLmNsYXNzTGlzdC5yZW1vdmUoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gb3BfbnVtYmVyDQogICAgICAgICAgICAvLyBpZiAodGhpcy5zZWFyY2hPcF9udW1iZXIudHJpbSgpICE9PSAnJykgew0KICAgICAgICAgICAgLy8gICAgbGV0IG9wX251bWJlckFycmF5ID0gW10NCiAgICAgICAgICAgIC8vICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzE3JykuY2xhc3NMaXN0LmFkZCgndW5pdC1jb2xvcicpDQogICAgICAgICAgICAvLyAgICBmaWx0ZXJlZEFycmF5LmZvckVhY2goYXBwb2ludCA9PiB7DQogICAgICAgICAgICAvLyAgICAgICBpZiAodGhpcy5zZWFyY2hPcF9udW1iZXIudHJpbSgpICE9PSAnJykgew0KICAgICAgICAgICAgLy8gICAgICAgICAgbGV0IGluZGV4ID0gZmlsdGVyZWRBcnJheS5pbmRleE9mKGFwcG9pbnQpDQogICAgICAgICAgICAvLyAgICAgICAgICBpZihhcHBvaW50Lm9wX251bWJlcl9vZl9jb3VudGVyICE9IHVuZGVmaW5lZCl7DQogICAgICAgICAgICAvLyAgICAgICAgICAgICBpZiAoYXBwb2ludC5vcF9udW1iZXJfb2ZfY291bnRlci50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGhpcy5zZWFyY2hPcF9udW1iZXIudG9Mb3dlckNhc2UoKSkgPT0gZmFsc2UpIHsNCiAgICAgICAgICAgIC8vICAgICAgICAgICAgIG9wX251bWJlckFycmF5LnB1c2goaW5kZXgpDQogICAgICAgICAgICAvLyAgICAgICAgICB9IA0KICAgICAgICAgICAgLy8gICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFwcG9pbnQub3BfbnVtYmVyKQ0KICAgICAgICAgICAgLy8gICAgICAgICAgICAgY29uc29sZS5sb2coJ3B1c2hlZCcpDQogICAgICAgICAgICAvLyAgICAgICAgICAgICBvcF9udW1iZXJBcnJheS5wdXNoKGluZGV4KQ0KICAgICAgICAgICAgLy8gICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAvLyAgICAgICB9DQogICAgICAgICAgICAvLyAgICB9KQ0KICAgICAgICAgICAgLy8gICAgZmlsdGVyZWRBcnJheSA9IGZpbHRlcmVkQXJyYXkuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsNCiAgICAgICAgICAgIC8vICAgICAgIHJldHVybiBvcF9udW1iZXJBcnJheS5pbmRleE9mKGluZGV4KSA9PSAtMTsNCiAgICAgICAgICAgIC8vICAgIH0pDQogICAgICAgICAgICAvLyB9IGVsc2Ugew0KICAgICAgICAgICAgLy8gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXRfMTcnKS5jbGFzc0xpc3QucmVtb3ZlKCd1bml0LWNvbG9yJykNCiAgICAgICAgICAgIC8vIH0NCg0KICAgICAgICAgICAgLy8gb3BfbnVtYmVyVjINCg0KICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoT3BfbnVtYmVyLnRyaW0oKSAhPT0gJycpIHsNCiAgICAgICAgICAgICAgIGxldCBvcF9udW1iZXJBcnJheSA9IFtdDQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8xNycpLmNsYXNzTGlzdC5hZGQoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgICAgZmlsdGVyZWRBcnJheS5mb3JFYWNoKGFwcG9pbnQgPT4gew0KICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoT3BfbnVtYmVyLnRyaW0oKSAhPT0gJycpIHsNCiAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IGZpbHRlcmVkQXJyYXkuaW5kZXhPZihhcHBvaW50KQ0KICAgICAgICAgICAgICAgICAgICAgaWYoYXBwb2ludC5vcF9udW1iZXJ0ZXN0MSAhPSB1bmRlZmluZWQpew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFwcG9pbnQub3BfbnVtYmVydGVzdDEudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpICE9IHRoaXMuc2VhcmNoT3BfbnVtYmVyLnRvTG93ZXJDYXNlKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG9wX251bWJlckFycmF5LnB1c2goaW5kZXgpDQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgIH0gDQogICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXBwb2ludC5vcF9udW1iZXIpDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncHVzaGVkJykNCiAgICAgICAgICAgICAgICAgICAgICAgIG9wX251bWJlckFycmF5LnB1c2goaW5kZXgpDQogICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICBmaWx0ZXJlZEFycmF5ID0gZmlsdGVyZWRBcnJheS5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgew0KICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wX251bWJlckFycmF5LmluZGV4T2YoaW5kZXgpID09IC0xOw0KICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8xNycpLmNsYXNzTGlzdC5yZW1vdmUoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBzaWNrbmVzcyBoaXN0b3J5DQogICAgICAgICAgICBpZiAodGhpcy5zZWFyY2hTaWNrbmVzc0hpc3RvcnkudHJpbSgpICE9PSAnJykgew0KICAgICAgICAgICAgICAgbGV0IHNpY2tBcnJheSA9IFtdDQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8xOScpLmNsYXNzTGlzdC5hZGQoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgICAgZmlsdGVyZWRBcnJheS5mb3JFYWNoKGFwcG9pbnQgPT4gew0KICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoU2lja25lc3NIaXN0b3J5LnRyaW0oKSAhPT0gJycpIHsNCiAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IGZpbHRlcmVkQXJyYXkuaW5kZXhPZihhcHBvaW50KQ0KICAgICAgICAgICAgICAgICAgICAgaWYgKGFwcG9pbnQuc2lja25lc3NIaXN0b3J5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGhpcy5zZWFyY2hTaWNrbmVzc0hpc3RvcnkudG9Mb3dlckNhc2UoKSkgPT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNpY2tBcnJheS5wdXNoKGluZGV4KQ0KDQogICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgZmlsdGVyZWRBcnJheSA9IGZpbHRlcmVkQXJyYXkuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgIHJldHVybiBzaWNrQXJyYXkuaW5kZXhPZihpbmRleCkgPT0gLTE7DQogICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzE5JykuY2xhc3NMaXN0LnJlbW92ZSgndW5pdC1jb2xvcicpDQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyB1bHRpbWF0ZSBkaWFnbm9zaXMNCiAgICAgICAgICAgIGlmICh0aGlzLnNlYXJjaERpYWdub3Npc1VsdGltYXRlLnRyaW0oKSAhPT0gJycpIHsNCiAgICAgICAgICAgICAgIGxldCBkaWFnQXJyYXkgPSBbXQ0KICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXRfMjAnKS5jbGFzc0xpc3QuYWRkKCd1bml0LWNvbG9yJykNCiAgICAgICAgICAgICAgIGZpbHRlcmVkQXJyYXkuZm9yRWFjaChhcHBvaW50ID0+IHsNCiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlYXJjaERpYWdub3Npc1VsdGltYXRlLnRyaW0oKSAhPT0gJycpIHsNCiAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IGZpbHRlcmVkQXJyYXkuaW5kZXhPZihhcHBvaW50KQ0KICAgICAgICAgICAgICAgICAgICAgaWYoYXBwb2ludC5kaWFnbm9zaXNVbHRpbWF0ZSAhPSB1bmRlZmluZWQpew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFwcG9pbnQuZGlhZ25vc2lzVWx0aW1hdGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0aGlzLnNlYXJjaERpYWdub3Npc1VsdGltYXRlLnRvTG93ZXJDYXNlKCkpID09IGZhbHNlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkaWFnQXJyYXkucHVzaChpbmRleCkNCiAgICAgICAgICAgICAgICAgICAgIH0gDQogICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgZGlhZ0FycmF5LnB1c2goaW5kZXgpDQogICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICBmaWx0ZXJlZEFycmF5ID0gZmlsdGVyZWRBcnJheS5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgew0KICAgICAgICAgICAgICAgICAgcmV0dXJuIGRpYWdBcnJheS5pbmRleE9mKGluZGV4KSA9PSAtMTsNCiAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXRfMjAnKS5jbGFzc0xpc3QucmVtb3ZlKCd1bml0LWNvbG9yJykNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gT3BlcmF0aW9uIERhdGUNCiAgICAgICAgICAgIGlmICh0aGlzLnJlYWR5RGF0ZSAhPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgbGV0IGFycmF5T2ZOZXh0SW5kZXhlcyA9IFtdDQogICAgICAgICAgICAgICBpZih0aGlzLmlzVGltZVBpY2tlcldhc09wZW5lZCl7DQogICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8yMScpLmNsYXNzTGlzdC5hZGQoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgDQoNCiAgICAgICAgICAgICAgIGZpbHRlcmVkQXJyYXkuZm9yRWFjaChhcHBvaW50ID0+IHsNCiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlYWR5RGF0ZSAhPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gZmlsdGVyZWRBcnJheS5pbmRleE9mKGFwcG9pbnQpDQogICAgICAgICAgICAgICAgICAgICBsZXQgbmV3RGF0ZTENCiAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdEYXRlMg0KDQogICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZWFkeURhdGUubGVuZ3RoIDwgMyAmJiB0aGlzLnJlYWR5RGF0ZVswXS50b1N0cmluZygpLnN1YnN0cigwLCAxNSkgIT0gdGhpcy5yZWFkeURhdGVbMV0udG9TdHJpbmcoKS5zdWJzdHIoMCwgMTUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlMSA9IG5ldyBEYXRlKHRoaXMucmVhZHlEYXRlWzBdKQ0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZTIgPSBuZXcgRGF0ZSh0aGlzLnJlYWR5RGF0ZVsxXSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGUxIDwgZGF0ZTIpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3RGF0ZTEgPSBkYXRlMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3RGF0ZTIgPSBkYXRlMg0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0RhdGUxID0gZGF0ZTINCiAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0RhdGUyID0gZGF0ZTENCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFwcG9pbnQuZGF0ZS50b0RhdGUoKSA8IG5ld0RhdGUxIHx8IGFwcG9pbnQuZGF0ZS50b0RhdGUoKSA+IG5ld0RhdGUyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICBpZihhcHBvaW50LmRhdGUudG9EYXRlKCkudG9TdHJpbmcoKS5zdWJzdHIoMCwgMTUpICE9PSBuZXdEYXRlMS50b1N0cmluZygpLnN1YnN0cigwLCAxNSkpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlPZk5leHRJbmRleGVzLnB1c2goaW5kZXgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICB9ICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZih0aGlzLnJlYWR5RGF0ZVsxXSA9PSB1bmRlZmluZWQpew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFwcG9pbnQuZGF0ZS50b0RhdGUoKS50b1N0cmluZygpLnN1YnN0cigwLCAxNSkgIT0gdGhpcy5yZWFkeURhdGUudG9TdHJpbmcoKS5zdWJzdHIoMCwgMTUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJheU9mTmV4dEluZGV4ZXMucHVzaChpbmRleCkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXBwb2ludC5kYXRlLnRvRGF0ZSgpLnRvU3RyaW5nKCkuc3Vic3RyKDAsIDE1KSAhPSB0aGlzLnJlYWR5RGF0ZVswXS50b1N0cmluZygpLnN1YnN0cigwLCAxNSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5T2ZOZXh0SW5kZXhlcy5wdXNoKGluZGV4KQ0KICAgICAgICAgICAgICAgICAgICAgfSANCiAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgIGZpbHRlcmVkQXJyYXkgPSBmaWx0ZXJlZEFycmF5LmZpbHRlcihmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7DQogICAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXlPZk5leHRJbmRleGVzLmluZGV4T2YoaW5kZXgpID09IC0xOw0KICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8yMScpLmNsYXNzTGlzdC5yZW1vdmUoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBEYXRlIEVudHJ5DQoNCiAgICAgICAgICAgIGlmICh0aGlzLnJlYWR5RGF0ZUVudHJ5ICE9PSBudWxsKSB7DQogICAgICAgICAgICAgICBsZXQgYXJyYXlPZkRhdGVFbnRyeUluZGV4ZXMgPSBbXQ0KICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXRfMjInKS5jbGFzc0xpc3QuYWRkKCd1bml0LWNvbG9yJykNCiAgICAgICAgICAgICAgIGZpbHRlcmVkQXJyYXkuZm9yRWFjaChhcHBvaW50ID0+IHsNCiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlYWR5RGF0ZUVudHJ5ICE9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBmaWx0ZXJlZEFycmF5LmluZGV4T2YoYXBwb2ludCkNCiAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdEYXRlMQ0KICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0RhdGUyDQogICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZWFkeURhdGVFbnRyeS5sZW5ndGggPCAzICYmIHRoaXMucmVhZHlEYXRlRW50cnlbMF0udG9TdHJpbmcoKS5zdWJzdHIoMCwgMTUpICE9IHRoaXMucmVhZHlEYXRlRW50cnlbMV0udG9TdHJpbmcoKS5zdWJzdHIoMCwgMTUpKSB7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUxID0gbmV3IERhdGUodGhpcy5yZWFkeURhdGVFbnRyeVswXSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUyID0gbmV3IERhdGUodGhpcy5yZWFkeURhdGVFbnRyeVsxXSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGUxIDwgZGF0ZTIpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3RGF0ZTEgPSBkYXRlMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3RGF0ZTIgPSBkYXRlMg0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0RhdGUxID0gZGF0ZTINCiAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0RhdGUyID0gZGF0ZTENCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcHBvaW50LmRhdGVFbnRyeS50b0RhdGUoKSA8IG5ld0RhdGUxIHx8IGFwcG9pbnQuZGF0ZUVudHJ5LnRvRGF0ZSgpID4gbmV3RGF0ZTIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFwcG9pbnQuZGF0ZUVudHJ5LnRvRGF0ZSgpLnRvU3RyaW5nKCkuc3Vic3RyKDAsIDE1KSAhPT0gbmV3RGF0ZTEudG9TdHJpbmcoKS5zdWJzdHIoMCwgMTUpKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5T2ZEYXRlRW50cnlJbmRleGVzLnB1c2goaW5kZXgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICB9ICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKHRoaXMucmVhZHlEYXRlRW50cnlbMV0gPT0gdW5kZWZpbmVkKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcHBvaW50LmRhdGVFbnRyeS50b0RhdGUoKS50b1N0cmluZygpLnN1YnN0cigwLCAxNSkgIT0gdGhpcy5yZWFkeURhdGVFbnRyeS50b1N0cmluZygpLnN1YnN0cigwLCAxNSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5T2ZEYXRlRW50cnlJbmRleGVzLnB1c2goaW5kZXgpDQogICAgICAgICAgICAgICAgICAgICB9IA0KICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcHBvaW50LmRhdGVFbnRyeS50b0RhdGUoKS50b1N0cmluZygpLnN1YnN0cigwLCAxNSkgIT0gdGhpcy5yZWFkeURhdGVFbnRyeVswXS50b1N0cmluZygpLnN1YnN0cigwLCAxNSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5T2ZEYXRlRW50cnlJbmRleGVzLnB1c2goaW5kZXgpDQogICAgICAgICAgICAgICAgICAgICB9IA0KICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgZmlsdGVyZWRBcnJheSA9IGZpbHRlcmVkQXJyYXkuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5T2ZEYXRlRW50cnlJbmRleGVzLmluZGV4T2YoaW5kZXgpID09IC0xOw0KICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8yMicpLmNsYXNzTGlzdC5yZW1vdmUoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBkYXRlIGxlZnQNCiAgICAgICAgICAgIGlmICh0aGlzLnJlYWR5RGF0ZUxlZnQgIT09IG51bGwpIHsNCiAgICAgICAgICAgICAgIGxldCBhcnJheU9mRGF0ZUxlZnRJbmRleGVzID0gW10NCiAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzIzJykuY2xhc3NMaXN0LmFkZCgndW5pdC1jb2xvcicpDQoNCiAgICAgICAgICAgICAgIGZpbHRlcmVkQXJyYXkuZm9yRWFjaChhcHBvaW50ID0+IHsNCiAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVhZHlEYXRlTGVmdCAhPT0gbnVsbCB8fCBhcHBvaW50LmRhdGVMZWZ0ICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gZmlsdGVyZWRBcnJheS5pbmRleE9mKGFwcG9pbnQpDQogICAgICAgICAgICAgICAgICAgICBsZXQgbmV3RGF0ZTENCiAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdEYXRlMg0KICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVhZHlEYXRlTGVmdC5sZW5ndGggPCAzICYmIHRoaXMucmVhZHlEYXRlTGVmdFswXS50b1N0cmluZygpLnN1YnN0cigwLCAxNSkgIT0gdGhpcy5yZWFkeURhdGVMZWZ0WzFdLnRvU3RyaW5nKCkuc3Vic3RyKDAsIDE1KSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZTEgPSBuZXcgRGF0ZSh0aGlzLnJlYWR5RGF0ZUxlZnRbMF0pDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlMiA9IG5ldyBEYXRlKHRoaXMucmVhZHlEYXRlTGVmdFsxXSkNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0ZTEgPCBkYXRlMil7DQogICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdEYXRlMSA9IGRhdGUxDQogICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdEYXRlMiA9IGRhdGUyDQogICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0RhdGUxID0gZGF0ZTINCiAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0RhdGUyID0gZGF0ZTENCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcHBvaW50LmRhdGVMZWZ0LnRvRGF0ZSgpIDwgbmV3RGF0ZTEgfHwgYXBwb2ludC5kYXRlTGVmdC50b0RhdGUoKSA+IG5ld0RhdGUyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICBpZihhcHBvaW50LmRhdGVMZWZ0LnRvRGF0ZSgpLnRvU3RyaW5nKCkuc3Vic3RyKDAsIDE1KSAhPT0gbmV3RGF0ZTEudG9TdHJpbmcoKS5zdWJzdHIoMCwgMTUpKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5T2ZEYXRlTGVmdEluZGV4ZXMucHVzaChpbmRleCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKHRoaXMucmVhZHlEYXRlTGVmdFsxXSA9PSB1bmRlZmluZWQpew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFwcG9pbnQuZGF0ZUxlZnQudG9EYXRlKCkudG9TdHJpbmcoKS5zdWJzdHIoMCwgMTUpICE9IHRoaXMucmVhZHlEYXRlTGVmdC50b1N0cmluZygpLnN1YnN0cigwLCAxNSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5T2ZEYXRlTGVmdEluZGV4ZXMucHVzaChpbmRleCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgfSBlbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFwcG9pbnQuZGF0ZUxlZnQudG9EYXRlKCkudG9TdHJpbmcoKS5zdWJzdHIoMCwgMTUpICE9IHRoaXMucmVhZHlEYXRlTGVmdFswXS50b1N0cmluZygpLnN1YnN0cigwLCAxNSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5T2ZEYXRlTGVmdEluZGV4ZXMucHVzaChpbmRleCkNCiAgICAgICAgICAgICAgICAgICAgIH0gDQogICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihhcHBvaW50LmRhdGVMZWZ0ID09IHVuZGVmaW5lZCl7DQogICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBmaWx0ZXJlZEFycmF5LmluZGV4T2YoYXBwb2ludCkNCiAgICAgICAgICAgICAgICAgICAgICBhcnJheU9mRGF0ZUxlZnRJbmRleGVzLnB1c2goaW5kZXgpDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgZmlsdGVyZWRBcnJheSA9IGZpbHRlcmVkQXJyYXkuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgIHJldHVybiBhcnJheU9mRGF0ZUxlZnRJbmRleGVzLmluZGV4T2YoaW5kZXgpID09IC0xOw0KICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdF8yMycpLmNsYXNzTGlzdC5yZW1vdmUoJ3VuaXQtY29sb3InKQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gZmlsdGVyZWRBcnJheQ0KICAgICAgICAgDQoNCiAgICAgIH0NCiAgICAgIH0sDQogICAgICByYW5rSXRlbXMoKSB7DQogICAgICAgICBsZXQgcmV0QXJyID0gWw0KICAgICAgICAgICAgJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycsDQogICAgICAgICAgICAuLi50aGlzLiRzdG9yZS5nZXR0ZXJzLnJhbmtJdGVtcw0KICAgICAgICAgXQ0KICAgICAgICAgcmV0dXJuIHJldEFycg0KICAgICAgfSwNCiAgICAgIHRpbWVUeXBlSXRlbXMoKSB7DQogICAgICAgICBsZXQgcmV0QXJyID0gWw0KICAgICAgICAgICAgJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycsDQogICAgICAgICAgICAuLi50aGlzLiRzdG9yZS5nZXR0ZXJzLnRpbWVUeXBlSXRlbXMNCiAgICAgICAgIF0NCiAgICAgICAgIHJldHVybiByZXRBcnINCiAgICAgIH0sDQogICAgICB1cmdlbmN5VHlwZUl0ZW1zKCkgew0KICAgICAgICAgbGV0IHJldEFyciA9IFsNCiAgICAgICAgICAgICfQsdC10Lcg0YTRltC70YzRgtGA0YMnLA0KICAgICAgICAgICAgLi4udGhpcy4kc3RvcmUuZ2V0dGVycy51cmdlbmN5VHlwZUl0ZW1zDQogICAgICAgICBdDQogICAgICAgICByZXR1cm4gcmV0QXJyDQogICAgICB9LA0KICAgICAgb3BlcmF0aW9uVHlwZUl0ZW1zKCkgew0KICAgICAgICAgbGV0IHJldEFyciA9IFsNCiAgICAgICAgICAgICfQsdC10Lcg0YTRltC70YzRgtGA0YMnLA0KICAgICAgICAgICAgLi4udGhpcy4kc3RvcmUuZ2V0dGVycy5vcGVyYXRpb25UeXBlSXRlbXMNCiAgICAgICAgIF0NCiAgICAgICAgIHJldHVybiByZXRBcnINCiAgICAgIH0sDQogICAgICBhbmVzdGhlc2lhVHlwZUl0ZW1zKCkgew0KICAgICAgICAgbGV0IHJldEFyciA9IFsNCiAgICAgICAgICAgICfQsdC10Lcg0YTRltC70YzRgtGA0YMnLA0KICAgICAgICAgICAgLi4udGhpcy4kc3RvcmUuZ2V0dGVycy5hbmVzdGhlc2lhVHlwZUl0ZW1zDQogICAgICAgICBdDQogICAgICAgICByZXR1cm4gcmV0QXJyDQogICAgICB9LA0KICAgICAgc3BvdFR5cGVJdGVtcygpIHsNCiAgICAgICAgIGxldCByZXRBcnIgPSBbDQogICAgICAgICAgICAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJywNCiAgICAgICAgICAgIC4uLnRoaXMuJHN0b3JlLmdldHRlcnMuc3BvdFR5cGVJdGVtcw0KICAgICAgICAgXQ0KICAgICAgICAgcmV0dXJuIHJldEFycg0KICAgICAgfSwNCiAgICAgIHVsdGltYXRlVHlwZUl0ZW1zKCkgew0KICAgICAgICAgbGV0IHJldEFyciA9IFsNCiAgICAgICAgICAgICfQsdC10Lcg0YTRltC70YzRgtGA0YMnLA0KICAgICAgICAgICAgLi4udGhpcy4kc3RvcmUuZ2V0dGVycy51bHRpbWF0ZVR5cGVJdGVtcw0KICAgICAgICAgXQ0KICAgICAgICAgcmV0dXJuIHJldEFycg0KICAgICAgfSwNCiAgICAgIGFuZXN0aGVzaW9sb2dpc3RJdGVtcygpIHsNCiAgICAgICAgIGxldCByZXRBcnIgPSBbDQogICAgICAgICAgICAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJywNCiAgICAgICAgICAgIC4uLnRoaXMuJHN0b3JlLmdldHRlcnMuYW5lc3RoZXNpb2xvZ2lzdEl0ZW1zDQogICAgICAgICBdDQogICAgICAgICByZXR1cm4gcmV0QXJyDQogICAgICB9LA0KICAgICAgbWVkc2lzdGVySXRlbXMoKSB7DQogICAgICAgICBsZXQgcmV0QXJyID0gWw0KICAgICAgICAgICAgJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycsDQogICAgICAgICAgICAuLi50aGlzLiRzdG9yZS5nZXR0ZXJzLm1lZHNpc3Rlckl0ZW1zDQogICAgICAgICBdDQogICAgICAgICByZXR1cm4gcmV0QXJyDQogICAgICB9LA0KICAgICAgY29tcGxpY2F0aW9uSXRlbXMoKXsNCiAgICAgICAgIGxldCByZXRBcnIgPSBbDQogICAgICAgICAgICAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJywNCiAgICAgICAgICAgIC4uLnRoaXMuJHN0b3JlLmdldHRlcnMuY29tcGxpY2F0aW9uDQogICAgICAgICBdDQogICAgICAgICByZXR1cm4gcmV0QXJyDQogICAgICB9LA0KICAgICAgcGlja2VkQ29tcGxleGl0eUl0ZW1zKCl7DQogICAgICAgICBsZXQgcmV0QXJyID0gWw0KICAgICAgICAgICAgJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycsDQogICAgICAgICAgICAuLi50aGlzLiRzdG9yZS5nZXR0ZXJzLmNvbXBsZXhpdHlJdGVtcw0KICAgICAgICAgXQ0KICAgICAgICAgcmV0dXJuIHJldEFycg0KICAgICAgfQ0KDQogICB9LA0KICAgbWV0aG9kczogew0KICAgICAgZGF0ZUNoYW5nZSgpew0KICAgICAgICAgdGhpcy5pc1RpbWVQaWNrZXJXYXNPcGVuZWQgPSB0cnVlDQogICAgICB9LA0KICAgICAgY2hvb3NlT3BZZWFyKGV2ZW50LCB5ZWFyLCBpc1RhcmdldCl7DQogICAgICAgICBsZXQgdGFyZ2V0DQogICAgICAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZSh5ZWFyLCAwLCAxKQ0KICAgICAgICAgY29uc3QgZW5kRGF0ZSA9IG5ldyBEYXRlKHllYXIgKyAxLCAwLCAxKQ0KICAgICAgICAgY29uc3Qgc3RhcnREYXRlRm9yUGlja2VyID0gbmV3IERhdGUoeWVhciwgMCwgMikNCiAgICAgICAgIGNvbnN0IGVuZERhdGVGb3JQaWNrZXIgPSBuZXcgRGF0ZSh5ZWFyICsgMSwgMCwgMikNCiAgICAgICAgIGlmKGlzVGFyZ2V0ID09IHRydWUpew0KICAgICAgICAgICAgdGFyZ2V0ID0gZXZlbnQ7DQogICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0Ow0KICAgICAgICAgfQ0KICAgICAgICAgDQogICAgICAgICB0aGlzLnBpY2tlZERhdGUgPSBbXQ0KICAgICAgICAgdGhpcy5yZWFkeURhdGUgPSBbXQ0KICAgICAgICAgdGhpcy5yZWFkeURhdGUucHVzaChzdGFydERhdGUsIGVuZERhdGUpDQogICAgICAgICB0aGlzLnBpY2tlZERhdGUucHVzaChzdGFydERhdGVGb3JQaWNrZXIudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApKQ0KICAgICAgICAgdGhpcy5waWNrZWREYXRlLnB1c2goZW5kRGF0ZUZvclBpY2tlci50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCkpDQogICAgICAgICANCiAgICAgICAgIHRoaXMuY2xlYXJDbGFzc2VzT2ZDaG9zZW5ZZWFyKHRhcmdldCkNCiAgICAgICAgIHRoaXMuaXNUaW1lUGlja2VyV2FzT3BlbmVkID0gZmFsc2UNCiAgICAgIH0sDQogICAgICB6dml0RmlsdGVyKCl7DQogICAgICAgICBsZXQgb3BlcmF0aW9uc1RvRmlsdGVyID0gdGhpcy5maWx0ZXJlZEFwcG9pbnRtZW50cy5mb3JFYWNoKG9wZXJhdGlvbiA9PiB7DQogICAgICAgICAgICBpZih0aGlzLm9wZXJhdGlvblBhdGllbnRzLmluY2x1ZGVzKGAke29wZXJhdGlvbi51c2VyLmZpcnN0TmFtZS50b0xvd2VyQ2FzZSgpLnRyaW0oKS5yZXBsYWNlKC8gKy9nLCAiIil9JHtvcGVyYXRpb24udXNlci5sYXN0TmFtZS50b0xvd2VyQ2FzZSgpLnRyaW0oKS5yZXBsYWNlKC8gKy9nLCAiIil9YCkgPT0gZmFsc2Upew0KICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRpb25QYXRpZW50cy5wdXNoKCcxJykNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmKG9wZXJhdGlvbi5jb21wbGljYXRpb24gPT09ICfQkdGW0LvRjNGI0L7Rlycpew0KICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRpb25zSGFyZGVyLnB1c2goJzEnKQ0KICAgICAgICAgICAgfSAgZWxzZSB7DQogICAgICAgICAgICAgICB0aGlzLm9wZXJhdGlvbnNFYXNpZXIucHVzaCgnMicpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZihvcGVyYXRpb24ub3BlcmF0aW9uVHlwZSA9PT0gJ9CS0ZbQtNC60YDQuNGC0LAnKXsNCiAgICAgICAgICAgICAgIHRoaXMub3BlcmF0aW9uc09wZW4ucHVzaCgnMScpDQogICAgICAgICAgICB9IGVsc2UgIGlmKG9wZXJhdGlvbi5vcGVyYXRpb25UeXBlID09PSAn0JXQvdC00L7RgdC60L7Qv9GW0YfQvdCwJykgew0KICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRpb25zRW5kby5wdXNoKCcyJykNCiAgICAgICAgICAgIH0gZWxzZSBpZihvcGVyYXRpb24ub3BlcmF0aW9uVHlwZSA9PT0gJ9Cb0LDQv9Cw0YDQsNGB0LrQvtC/0ZbRh9C90LAnKXsNCiAgICAgICAgICAgICAgIHRoaXMub3BlcmF0aW9uc0xhcG8ucHVzaCgnNCcpDQogICAgICAgICAgICB9IGVsc2UgaWYob3BlcmF0aW9uLm9wZXJhdGlvblR5cGUgPT09ICfQnNCw0LvQvtGW0L3QstCw0LfQuNCy0L3QsCcpew0KICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRpb25zTWFsby5wdXNoKCczJykgDQogICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgDQogICAgICAgICB9KQ0KDQogICAgICAgICAvLyDQoW9tcGxleGl0eQ0KDQogICAgICB9LA0KICAgICAgY2xlYXJEaWFsb2coKXsNCiAgICAgICAgIHRoaXMub3BlcmF0aW9uc0hhcmRlciA9IFtdDQogICAgICAgICB0aGlzLm9wZXJhdGlvbnNFYXNpZXIgPSBbXQ0KICAgICAgICAgdGhpcy5vcGVyYXRpb25zT3BlbiA9IFtdDQogICAgICAgICB0aGlzLm9wZXJhdGlvbnNFbmRvID0gW10NCiAgICAgICAgIHRoaXMub3BlcmF0aW9uc01hbG8gPSBbXQ0KICAgICAgICAgdGhpcy5vcGVyYXRpb25zTGFwbyA9IFtdDQogICAgICAgICB0aGlzLm9wZXJhdGlvblBhdGllbnRzID0gW10NCg0KICAgICAgfSwNCiAgICAgIGNsZWFyQ2xhc3Nlc09mWnZpdCh0YXJnZXQpew0KDQogICAgICAgICBsZXQgYnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbmZvX19idXR0b24nKQ0KICAgICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7DQogICAgICAgICAgICBpZihidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdjbGlja2VkLXp2aXQnKSl7DQogICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnY2xpY2tlZC16dml0JykNCiAgICAgICAgICAgIH0NCiAgICAgICAgIH0pDQogICAgICAgICBpZih0YXJnZXQgPT0gZmFsc2Upew0KICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICB9DQogICAgICAgICBpZih0YXJnZXQubm9kZU5hbWUgIT09ICdTUEFOJyl7DQogICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnY2xpY2tlZC16dml0JykNCiAgICAgICAgICAgIA0KICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2NsaWNrZWQtenZpdCcpDQogICAgICAgICB9DQogICAgICB9LA0KICAgICAgY2xlYXJDbGFzc2VzT2ZDaG9zZW5ZZWFyKHRhcmdldCl7DQoNCiAgICAgICAgIGxldCBidXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnllYXJDaG9vc2VfYnV0dG9uJykNCiAgICAgICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gew0KICAgICAgICAgICAgaWYoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnY2xpY2tlZC16dml0Jykpew0KICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2NsaWNrZWQtenZpdCcpfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgKQ0KICAgICAgICAgaWYodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygneWVhckNob29zZV9idXR0b24nKSl7DQogICAgICAgICAgICANCiAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdjbGlja2VkLXp2aXQnKQ0KICAgICAgICAgfQ0KICAgICAgICAgaWYodGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCd5ZWFyQ2hvb3NlX2J1dHRvbicpKSB7DQogICAgICAgICAgICAgICB0YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjbGlja2VkLXp2aXQnKQ0KICAgICAgICAgfQ0KICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0XzIxJykuY2xhc3NMaXN0LnJlbW92ZSgndW5pdC1jb2xvcicpDQogICAgICAgICB9LCAxMDApIA0KICAgICAgICAgaWYodGFyZ2V0ID09IGZhbHNlKXsNCiAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIHdlZWtadml0KGUpew0KICAgICAgICAgdGhpcy56dml0VGltZXMgPSB0cnVlDQogICAgICAgICAvLyBuZXcgd2VlayB6dml0DQogICAgICAgICB0aGlzLnJlYWR5RGF0ZSA9IFtdDQogICAgICAgICB0aGlzLnBpY2tlZERhdGUgPSBbXQ0KICAgICAgICAgbGV0IGRheU9mV2VlayA9IDUNCiAgICAgICAgIGxldCBvcmlnaW5EYXRlID0gbmV3IERhdGUoKQ0KICAgICAgICAgLy8gb3JpZ2luRGF0ZS5zZXREYXRlKDEwKQ0KICAgICAgICAgb3JpZ2luRGF0ZS5zZXRIb3VycygyMykNCiAgICAgICAgIG9yaWdpbkRhdGUuc2V0TWludXRlcyg1OSkNCiAgICAgICAgIG9yaWdpbkRhdGUuc2V0U2Vjb25kcyg1OSkNCiAgICAgICAgIGxldCByZXN1bHREYXRlID0gbmV3IERhdGUob3JpZ2luRGF0ZS5nZXRUaW1lKCkpDQogICAgICAgICByZXN1bHREYXRlLnNldERhdGUob3JpZ2luRGF0ZS5nZXREYXRlKCkgKyAoNyArIGRheU9mV2VlayAtIG9yaWdpbkRhdGUuZ2V0RGF5KCkpICUgNykNCiAgICAgICAgIGlmKG9yaWdpbkRhdGUuZ2V0RGF5KCkgIT09IGRheU9mV2Vlayl7DQogICAgICAgICAgICByZXN1bHREYXRlLnNldERhdGUocmVzdWx0RGF0ZS5nZXREYXRlKCkgLSA3KQ0KICAgICAgICAgfQ0KICAgICAgICAgbGV0IGZpcnN0RGF0ZSA9IG5ldyBEYXRlKHJlc3VsdERhdGUpDQogICAgICAgICBmaXJzdERhdGUuc2V0RGF0ZShyZXN1bHREYXRlLmdldERhdGUoKSAtIDcpDQogICAgICAgICBmaXJzdERhdGUuc2V0SG91cnMoMCkNCiAgICAgICAgIGZpcnN0RGF0ZS5zZXRNaW51dGVzKDApDQogICAgICAgICBmaXJzdERhdGUuc2V0U2Vjb25kcygwKQ0KICAgICAgICAgbGV0IHNlY29uZERhdGUgPSBuZXcgRGF0ZShyZXN1bHREYXRlKQ0KICAgICAgICAgc2Vjb25kRGF0ZS5zZXREYXRlKHJlc3VsdERhdGUuZ2V0RGF0ZSgpIC0gMSkNCiAgICAgICAgIHRoaXMucmVhZHlEYXRlLnB1c2goZmlyc3REYXRlLCBzZWNvbmREYXRlKQ0KICAgICAgICAgZmlyc3REYXRlLnNldEhvdXJzKDMpDQogICAgICAgICBzZWNvbmREYXRlLnNldEhvdXJzKDI2KQ0KICAgICAgICAgdGhpcy5waWNrZWREYXRlLnB1c2goZmlyc3REYXRlLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKSkNCiAgICAgICAgIHRoaXMucGlja2VkRGF0ZS5wdXNoKHNlY29uZERhdGUudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApKQ0KICAgICAgICAgY29uc29sZS5sb2codGhpcy5yZWFkeURhdGUpDQogICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnBpY2tlZERhdGUpDQogICAgICAgICB0aGlzLmNsZWFyQ2xhc3Nlc09mWnZpdChlLnRhcmdldCkNCiAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgdGhpcy56dml0VGltZXMgPSBmYWxzZQ0KICAgICAgICAgfSwgMTUwKQ0KICAgICAgICAgDQogICAgICAgICB0aGlzLiRyZWZzLm1lbnUuc2F2ZSh0aGlzLnBpY2tlZERhdGUpOw0KICAgICAgfSwNCiAgICAgIG1vbnRoWnZpdChlKXsNCiAgICAgICAgIHRoaXMuenZpdFRpbWVzID0gdHJ1ZQ0KICAgICAgICAgbGV0IGN1cnJlbnREYXRlDQogICAgICAgICBpZih0aGlzLnBpY2tlZERhdGUubGVuZ3RoID4gMSl7DQogICAgICAgICAgICBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKHRoaXMucGlja2VkRGF0ZVsxXSkNCiAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKHRoaXMucGlja2VkRGF0ZSkNCiAgICAgICAgIH0NCiAgICAgICAgIA0KICAgICAgICAgY29uc3QgY3VycmVudE1vbnRoID0gY3VycmVudERhdGUuZ2V0TW9udGgoKSAtIDENCiAgICAgICAgIGNvbnN0IGN1cnJlbnRZZWFyID0gY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKQ0KICAgICAgICAgaWYoY3VycmVudE1vbnRoIDwgMCl7DQogICAgICAgICAgICBjdXJyZW50RGF0ZS5zZXRNb250aCgxMSkNCiAgICAgICAgICAgIGN1cnJlbnREYXRlLnNldEZ1bGxZZWFyKGN1cnJlbnRZZWFyIC0gMSkNCiAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBjdXJyZW50RGF0ZS5zZXRNb250aChjdXJyZW50TW9udGggKyAxKQ0KICAgICAgICAgfSANCiAgICAgICAgIGN1cnJlbnREYXRlLnNldERhdGUoMSkNCiAgICAgICAgIGxldCBmaXJzdERhdGUgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZSkNCiAgICAgICAgIGlmKGN1cnJlbnRNb250aCA8IDApew0KICAgICAgICAgICBmaXJzdERhdGUuc2V0TW9udGgoMTEpDQogICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgZmlyc3REYXRlLnNldE1vbnRoKGN1cnJlbnRNb250aCkNCiAgICAgICAgIH0gDQogICAgICAgICAvLyBmaXJzdERhdGUuc2V0TW9udGgoY3VycmVudE1vbnRoKQ0KICAgICAgICAgZmlyc3REYXRlLnNldEhvdXJzKDApDQogICAgICAgICBmaXJzdERhdGUuc2V0TWludXRlcygwKQ0KICAgICAgICAgZmlyc3REYXRlLnNldFNlY29uZHMoMCkNCiAgICAgICAgIGxldCBzZWNvbmREYXRlID0gbmV3IERhdGUoY3VycmVudERhdGUpDQogICAgICAgICBpZihjdXJyZW50TW9udGggPCAwKXsNCiAgICAgICAgICAgIHNlY29uZERhdGUuc2V0TW9udGgoMCkNCiAgICAgICAgICAgIHNlY29uZERhdGUuc2V0RnVsbFllYXIoY3VycmVudFllYXIpDQogICAgICAgICB9DQogICAgICAgICBzZWNvbmREYXRlLnNldERhdGUoc2Vjb25kRGF0ZS5nZXREYXRlKCkgLSAxKQ0KICAgICAgICAgc2Vjb25kRGF0ZS5zZXRIb3VycygyMykNCiAgICAgICAgIHNlY29uZERhdGUuc2V0TWludXRlcyg1OSkNCiAgICAgICAgIHNlY29uZERhdGUuc2V0U2Vjb25kcyg1OSkNCiAgICAgICAgIHRoaXMucmVhZHlEYXRlID0gW10NCiAgICAgICAgIHRoaXMucmVhZHlEYXRlLnB1c2goZmlyc3REYXRlLCBzZWNvbmREYXRlKQ0KICAgICAgICAgdGhpcy5waWNrZWREYXRlID0gW10NCiAgICAgICAgIGxldCBkYXRlRm9yUGlja2VkRmlyc3REYXRlID0gbmV3IERhdGUoZmlyc3REYXRlKQ0KICAgICAgICAgbGV0IHBpY2tlZERheSA9IGRhdGVGb3JQaWNrZWRGaXJzdERhdGUuZ2V0RGF0ZSgpDQogICAgICAgICBkYXRlRm9yUGlja2VkRmlyc3REYXRlLnNldERhdGUocGlja2VkRGF5ICsgMSkNCiAgICAgICAgIHRoaXMucGlja2VkRGF0ZS5wdXNoKGRhdGVGb3JQaWNrZWRGaXJzdERhdGUudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApKQ0KICAgICAgICAgLy8gdGhpcy5waWNrZWREYXRlLnB1c2goZmlyc3REYXRlLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKSkNCiAgICAgICAgIHRoaXMucGlja2VkRGF0ZS5wdXNoKHNlY29uZERhdGUudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApKQ0KICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICB0aGlzLnp2aXRUaW1lcyA9IGZhbHNlDQogICAgICAgICB9LCAxNTApDQogICAgICAgICB0aGlzLmNsZWFyQ2xhc3Nlc09mWnZpdChlLnRhcmdldCkNCiAgICAgIH0sDQogICAgICBrdmFydGFsWnZpdChldmVudCwgZk1vbnRoLCBzTW9udGgsIGlzRm91ckt2YXJ0YWwpew0KICAgICAgICAgdGhpcy56dml0VGltZXMgPSB0cnVlDQogICAgICAgICB0aGlzLnBpY2tlZERhdGUgPSBbXQ0KICAgICAgICAgdGhpcy5yZWFkeURhdGUgPSBbXQ0KICAgICAgICAgbGV0IGZpcnN0RGF0ZSA9IG5ldyBEYXRlKCkNCiAgICAgICAgIGZpcnN0RGF0ZS5zZXRNb250aChmTW9udGgpDQogICAgICAgICBmaXJzdERhdGUuc2V0RGF0ZSgxKQ0KICAgICAgICAgZmlyc3REYXRlLnNldEhvdXJzKDApDQogICAgICAgICBmaXJzdERhdGUuc2V0TWludXRlcygwKQ0KICAgICAgICAgZmlyc3REYXRlLnNldFNlY29uZHMoMCkNCiAgICAgICAgIGxldCBzZWNvbmRQcm90b0RhdGUgPSBuZXcgRGF0ZSgpDQogICAgICAgICBpZihpc0ZvdXJLdmFydGFsKXsNCiAgICAgICAgICAgIGxldCBmdWxsWWVhciA9IHNlY29uZFByb3RvRGF0ZS5nZXRGdWxsWWVhcigpDQogICAgICAgICAgICBzZWNvbmRQcm90b0RhdGUuc2V0RnVsbFllYXIoZnVsbFllYXIgKyAxKQ0KICAgICAgICAgfQ0KICAgICAgICAgc2Vjb25kUHJvdG9EYXRlLnNldE1vbnRoKHNNb250aCkNCiAgICAgICAgIHNlY29uZFByb3RvRGF0ZS5zZXREYXRlKDEpDQogICAgICAgICBzZWNvbmRQcm90b0RhdGUuc2V0SG91cnMoMjMpDQogICAgICAgICBzZWNvbmRQcm90b0RhdGUuc2V0TWludXRlcyg1OSkNCiAgICAgICAgIHNlY29uZFByb3RvRGF0ZS5zZXRTZWNvbmRzKDU5KQ0KICAgICAgICAgbGV0IHNlY29uZERhdGUgPSBuZXcgRGF0ZShzZWNvbmRQcm90b0RhdGUpDQogICAgICAgICBsZXQgc2Vjb25kUHJvdG9EYXkgPSBzZWNvbmRQcm90b0RhdGUuZ2V0RGF0ZSgpIC0gMQ0KICAgICAgICAgc2Vjb25kRGF0ZS5zZXREYXRlKHNlY29uZFByb3RvRGF5KQ0KICAgICAgICAgdGhpcy5yZWFkeURhdGUucHVzaChmaXJzdERhdGUsIHNlY29uZERhdGUpDQogICAgICAgICBsZXQgZGF0ZUZvclBpY2tlZEZpcnN0RGF0ZSA9IG5ldyBEYXRlKGZpcnN0RGF0ZSkNCiAgICAgICAgIGxldCBwaWNrZWREYXkgPSBkYXRlRm9yUGlja2VkRmlyc3REYXRlLmdldERhdGUoKQ0KICAgICAgICAgZGF0ZUZvclBpY2tlZEZpcnN0RGF0ZS5zZXREYXRlKHBpY2tlZERheSArIDEpDQogICAgICAgICB0aGlzLnBpY2tlZERhdGUucHVzaChkYXRlRm9yUGlja2VkRmlyc3REYXRlLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKSkNCiAgICAgICAgIHRoaXMucGlja2VkRGF0ZS5wdXNoKHNlY29uZERhdGUudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApKQ0KICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICB0aGlzLnp2aXRUaW1lcyA9IGZhbHNlDQogICAgICAgICB9LCAxNTApDQogICAgICAgICB0aGlzLmNsZWFyQ2xhc3Nlc09mWnZpdChldmVudC50YXJnZXQpDQogICAgICB9LA0KICAgICAgaGFsZlllYXJadml0KGV2ZW50LCBmTW9udGgsIHNNb250aCwgaXNTZWNvbmRIYWxmKXsNCiAgICAgICAgIHRoaXMuenZpdFRpbWVzID0gdHJ1ZQ0KICAgICAgICAgdGhpcy5waWNrZWREYXRlID0gW10NCiAgICAgICAgIHRoaXMucmVhZHlEYXRlID0gW10NCiAgICAgICAgIGxldCBmaXJzdERhdGUgPSBuZXcgRGF0ZSgpDQogICAgICAgICBmaXJzdERhdGUuc2V0TW9udGgoZk1vbnRoKQ0KICAgICAgICAgZmlyc3REYXRlLnNldERhdGUoMSkNCiAgICAgICAgIGZpcnN0RGF0ZS5zZXRIb3VycygwKQ0KICAgICAgICAgZmlyc3REYXRlLnNldE1pbnV0ZXMoMCkNCiAgICAgICAgIGZpcnN0RGF0ZS5zZXRTZWNvbmRzKDApDQogICAgICAgICBsZXQgc2Vjb25kUHJvdG9EYXRlID0gbmV3IERhdGUoKQ0KICAgICAgICAgaWYoaXNTZWNvbmRIYWxmKXsNCiAgICAgICAgICAgIGxldCBmdWxsWWVhciA9IHNlY29uZFByb3RvRGF0ZS5nZXRGdWxsWWVhcigpDQogICAgICAgICAgICBzZWNvbmRQcm90b0RhdGUuc2V0RnVsbFllYXIoZnVsbFllYXIgKyAxKQ0KICAgICAgICAgfQ0KICAgICAgICAgc2Vjb25kUHJvdG9EYXRlLnNldE1vbnRoKHNNb250aCkNCiAgICAgICAgIHNlY29uZFByb3RvRGF0ZS5zZXREYXRlKDEpDQogICAgICAgICBzZWNvbmRQcm90b0RhdGUuc2V0SG91cnMoMjMpDQogICAgICAgICBzZWNvbmRQcm90b0RhdGUuc2V0TWludXRlcyg1OSkNCiAgICAgICAgIHNlY29uZFByb3RvRGF0ZS5zZXRTZWNvbmRzKDU5KQ0KICAgICAgICAgbGV0IHNlY29uZERhdGUgPSBuZXcgRGF0ZShzZWNvbmRQcm90b0RhdGUpDQogICAgICAgICBsZXQgc2Vjb25kUHJvdG9EYXkgPSBzZWNvbmRQcm90b0RhdGUuZ2V0RGF0ZSgpIC0gMQ0KICAgICAgICAgc2Vjb25kRGF0ZS5zZXREYXRlKHNlY29uZFByb3RvRGF5KQ0KICAgICAgICAgdGhpcy5yZWFkeURhdGUucHVzaChmaXJzdERhdGUsIHNlY29uZERhdGUpDQogICAgICAgICBsZXQgZGF0ZUZvclBpY2tlZEZpcnN0RGF0ZSA9IG5ldyBEYXRlKGZpcnN0RGF0ZSkNCiAgICAgICAgIGxldCBwaWNrZWREYXkgPSBkYXRlRm9yUGlja2VkRmlyc3REYXRlLmdldERhdGUoKQ0KICAgICAgICAgZGF0ZUZvclBpY2tlZEZpcnN0RGF0ZS5zZXREYXRlKHBpY2tlZERheSArIDEpDQogICAgICAgICB0aGlzLnBpY2tlZERhdGUucHVzaChkYXRlRm9yUGlja2VkRmlyc3REYXRlLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKSkNCiAgICAgICAgIHRoaXMucGlja2VkRGF0ZS5wdXNoKHNlY29uZERhdGUudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApKQ0KICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICB0aGlzLnp2aXRUaW1lcyA9IGZhbHNlDQogICAgICAgICB9LCAxNTApDQogICAgICAgICB0aGlzLmNsZWFyQ2xhc3Nlc09mWnZpdChldmVudC50YXJnZXQpDQogICAgICB9LA0KICAgICAgb25PcGVuU2luZ2xlKGlkKSB7DQogICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2FwcG9pbnRtZW50LycgKyBpZCkNCiAgICAgIH0sDQogICAgICBvbk9wZW5TaW5nbGVSZWxlYXNlKGlkKSB7DQogICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2FwcG9pbnRtZW50UmVsZWFzZS8nICsgaWQpDQogICAgICB9LA0KICAgICAgb25SZXNldERhdGUoKXsNCiAgICAgICAgIHRoaXMucmVhZHlEYXRlID0gbnVsbA0KICAgICAgICAgdGhpcy5lZGl0RGlhbG9nID0gZmFsc2UNCiAgICAgICAgIHRoaXMucGlja2VkRGF0ZSA9IFtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKV0NCiAgICAgIH0sDQogICAgICBvblJlc2V0RW50cnkoKXsNCiAgICAgICAgIHRoaXMucmVhZHlEYXRlRW50cnkgPSBudWxsDQogICAgICAgICB0aGlzLmVkaXREaWFsb2cxID0gZmFsc2UNCiAgICAgICAgIHRoaXMucGlja2VkRGF0ZUVudHJ5ID0gW25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApXQ0KICAgICAgfSwNCiAgICAgIG9uUmVzZXRMZWZ0KCl7DQogICAgICAgICB0aGlzLnJlYWR5RGF0ZUxlZnQgPSBudWxsDQogICAgICAgICB0aGlzLmVkaXREaWFsb2cyID0gZmFsc2UNCiAgICAgICAgIHRoaXMucGlja2VkRGF0ZUxlZnQgPSBbbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCldDQogICAgICB9LA0KICAgICAgc3VtT2ZCZWZvcmVCZWRzKCkgew0KICAgICAgICAgbGV0IHN1bU9mQmVkcyA9IDANCiAgICAgICAgIHRoaXMuZmlsdGVyZWRBcHBvaW50bWVudHMuZm9yRWFjaChhcHBvaW50ID0+IHsNCiAgICAgICAgICAgIGxldCBudW1iZXJPZlRpbWUgPSBhcHBvaW50LmRhdGUudG9EYXRlKCkuZ2V0VGltZSgpIC0gYXBwb2ludC5kYXRlRW50cnkudG9EYXRlKCkuZ2V0VGltZSgpDQogICAgICAgICAgICBudW1iZXJPZlRpbWUgPSBudW1iZXJPZlRpbWUgLyAoMTAwMCAqIDM2MDAgKiAyNCkgICANCiAgICAgICAgICAgIHN1bU9mQmVkcyArPSBwYXJzZUludChudW1iZXJPZlRpbWUsIDEwKQ0KICAgICAgICAgfSkNCiAgICAgICAgIHRoaXMuc2hvd1N1bSA9IHN1bU9mQmVkcw0KICAgICAgfSwNCiAgICAgIHN1bU9mQWZ0ZXJCZWRzKCkgew0KICAgICAgICAgbGV0IHN1bU9mQWZ0ZXJCZWRzID0gMA0KICAgICAgICAgbGV0IG5ld0ZpbHRlcmVkQXBwb2ludG1lbnRzID0gdGhpcy5maWx0ZXJlZEFwcG9pbnRtZW50cy5maWx0ZXIoYXBwb2ludCA9PiB7DQogICAgICAgICAgICByZXR1cm4gYXBwb2ludC5kYXRlTGVmdCAhPT0gJycNCiAgICAgICAgIH0pDQogICAgICAgICBuZXdGaWx0ZXJlZEFwcG9pbnRtZW50cy5mb3JFYWNoKGFwcG9pbnQgPT4gew0KICAgICAgICAgICAgbGV0IG51bWJlck9mVGltZSA9IGFwcG9pbnQuZGF0ZUxlZnQudG9EYXRlKCkuZ2V0VGltZSgpIC0gYXBwb2ludC5kYXRlLnRvRGF0ZSgpLmdldFRpbWUoKQ0KICAgICAgICAgICAgbnVtYmVyT2ZUaW1lID0gbnVtYmVyT2ZUaW1lIC8gKDEwMDAgKiAzNjAwICogMjQpDQogICAgICAgICAgICBzdW1PZkFmdGVyQmVkcyArPSBwYXJzZUludChudW1iZXJPZlRpbWUsIDEwKQ0KICAgICAgICAgfSkNCiAgICAgICAgIHRoaXMuc2hvd1N1bUFmdGVyID0gc3VtT2ZBZnRlckJlZHMNCiAgICAgIH0sDQogICAgICBvbkFyY2hpdmUoKSB7DQogICAgICAgICB0aGlzLmlzQXJjaGl2ZSA9ICF0aGlzLmlzQXJjaGl2ZQ0KICAgICAgfSwNCiAgICAgIG9uQ2xvc2UoKSB7DQogICAgICAgICBpZiAodGhpcy5lZGl0RGlhbG9nKSB7DQogICAgICAgICAgICB0aGlzLnBpY2tlZERhdGUgPSBbbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCldDQogICAgICAgICAgICB0aGlzLmVkaXREaWFsb2cgPSBmYWxzZQ0KICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVkaXREaWFsb2cxKSB7DQogICAgICAgICAgICB0aGlzLnBpY2tlZERhdGVFbnRyeSA9IFtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKV0NCiAgICAgICAgICAgIHRoaXMuZWRpdERpYWxvZzEgPSBmYWxzZQ0KICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVkaXREaWFsb2cyKSB7DQogICAgICAgICAgICB0aGlzLnBpY2tlZERhdGVMZWZ0ID0gW25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApXQ0KICAgICAgICAgICAgdGhpcy5lZGl0RGlhbG9nMiA9IGZhbHNlDQogICAgICAgICB9DQogICAgICB9LA0KICAgICAgY2xlYXJEYXRlKCkgew0KICAgICAgICAgdGhpcy5yZWFkeURhdGUgPSBudWxsDQogICAgICAgICB0aGlzLnBpY2tlZERhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKQ0KICAgICAgfSwNCiAgICAgIG9uU2F2ZUNoYW5nZXMoKSB7DQogICAgICAgICBpZiAodGhpcy5waWNrZWREYXRlICE9PSBudWxsKSB7DQogICAgICAgICAgICBpZiAodGhpcy5waWNrZWREYXRlLmxlbmd0aCA+IDEpIHsNCiAgICAgICAgICAgICAgIHRoaXMucmVhZHlEYXRlID0gW10NCiAgICAgICAgICAgICAgIGNvbnN0IG5ld0RhdGUxID0gbmV3IERhdGUobmV3IERhdGUoKSkNCiAgICAgICAgICAgICAgIGNvbnN0IG5ld0RheTEgPSBuZXcgRGF0ZSh0aGlzLnBpY2tlZERhdGVbMF0pLmdldFVUQ0RhdGUoKQ0KICAgICAgICAgICAgICAgY29uc3QgbmV3TW9udGgxID0gbmV3IERhdGUodGhpcy5waWNrZWREYXRlWzBdKS5nZXRVVENNb250aCgpDQogICAgICAgICAgICAgICBjb25zdCBuZXdZZWFyMSA9IG5ldyBEYXRlKHRoaXMucGlja2VkRGF0ZVswXSkuZ2V0VVRDRnVsbFllYXIoKQ0KICAgICAgICAgICAgICAgbmV3RGF0ZTEuc2V0VVRDRnVsbFllYXIobmV3WWVhcjEpDQogICAgICAgICAgICAgICBuZXdEYXRlMS5zZXRVVENNb250aChuZXdNb250aDEpDQogICAgICAgICAgICAgICBuZXdEYXRlMS5zZXRVVENEYXRlKG5ld0RheTEpDQogICAgICAgICAgICAgICBuZXdEYXRlMS5zZXRVVENIb3VycygtMykNCiAgICAgICAgICAgICAgIG5ld0RhdGUxLnNldFVUQ01pbnV0ZXMoMCkNCiAgICAgICAgICAgICAgIG5ld0RhdGUxLnNldFVUQ1NlY29uZHMoMCkNCiAgICAgICAgICAgICAgIGNvbnN0IG5ld0RhdGUyID0gbmV3IERhdGUobmV3IERhdGUoKSkNCiAgICAgICAgICAgICAgIGNvbnN0IG5ld0RheTIgPSBuZXcgRGF0ZSh0aGlzLnBpY2tlZERhdGVbMV0pLmdldFVUQ0RhdGUoKQ0KICAgICAgICAgICAgICAgY29uc3QgbmV3TW9udGgyID0gbmV3IERhdGUodGhpcy5waWNrZWREYXRlWzFdKS5nZXRVVENNb250aCgpDQogICAgICAgICAgICAgICBjb25zdCBuZXdZZWFyMiA9IG5ldyBEYXRlKHRoaXMucGlja2VkRGF0ZVsxXSkuZ2V0VVRDRnVsbFllYXIoKQ0KICAgICAgICAgICAgICAgbmV3RGF0ZTIuc2V0VVRDRnVsbFllYXIobmV3WWVhcjIpDQogICAgICAgICAgICAgICBuZXdEYXRlMi5zZXRVVENNb250aChuZXdNb250aDIpDQogICAgICAgICAgICAgICBuZXdEYXRlMi5zZXRVVENEYXRlKG5ld0RheTIpDQogICAgICAgICAgICAgICBuZXdEYXRlMi5zZXRVVENIb3VycygyMCkNCiAgICAgICAgICAgICAgIG5ld0RhdGUyLnNldFVUQ01pbnV0ZXMoNTkpDQogICAgICAgICAgICAgICBuZXdEYXRlMi5zZXRVVENTZWNvbmRzKDU5KQ0KICAgICAgICAgICAgICAgdGhpcy5yZWFkeURhdGUucHVzaChuZXdEYXRlMSwgbmV3RGF0ZTIpDQogICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnJlYWR5RGF0ZSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICBjb25zdCBuZXdEYXRlID0gbmV3IERhdGUobmV3IERhdGUoKSkNCiAgICAgICAgICAgICAgIGNvbnN0IG5ld0RheSA9IG5ldyBEYXRlKHRoaXMucGlja2VkRGF0ZSkuZ2V0VVRDRGF0ZSgpDQogICAgICAgICAgICAgICBjb25zdCBuZXdNb250aCA9IG5ldyBEYXRlKHRoaXMucGlja2VkRGF0ZSkuZ2V0VVRDTW9udGgoKQ0KICAgICAgICAgICAgICAgY29uc3QgbmV3WWVhciA9IG5ldyBEYXRlKHRoaXMucGlja2VkRGF0ZSkuZ2V0VVRDRnVsbFllYXIoKQ0KICAgICAgICAgICAgICAgbmV3RGF0ZS5zZXRVVENGdWxsWWVhcihuZXdZZWFyKQ0KICAgICAgICAgICAgICAgbmV3RGF0ZS5zZXRVVENNb250aChuZXdNb250aCkNCiAgICAgICAgICAgICAgIG5ld0RhdGUuc2V0VVRDRGF0ZShuZXdEYXkpDQogICAgICAgICAgICAgICAvLyBjb25zdCBuZXdJc29EYXRlID0gdGhpcy5waWNrZWREYXRlLnRvU3RyaW5nKCkuc3Vic3RyKDgsMTApDQogICAgICAgICAgICAgICAvLyBjb25zdCBuZXdEYXRlID0gbmV3IERhdGUobmV3IERhdGUoKSkNCiAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG5ld0lzb0RhdGUpDQogICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXdEYXRlKQ0KICAgICAgICAgICAgICAgLy8gLy8gY29uc3QgbmV3RGF5ID0gbmV3IERhdGUodGhpcy5waWNrZWREYXRlKS5nZXREYXRlKCkNCiAgICAgICAgICAgICAgIC8vIGNvbnN0IG5ld01vbnRoID0gbmV3IERhdGUodGhpcy5waWNrZWREYXRlKS5nZXRNb250aCgpDQogICAgICAgICAgICAgICAvLyBjb25zdCBuZXdZZWFyID0gbmV3IERhdGUodGhpcy5waWNrZWREYXRlKS5nZXRGdWxsWWVhcigpDQogICAgICAgICAgICAgICAvLyBuZXdEYXRlLnNldEZ1bGxZZWFyKG5ld1llYXIpDQogICAgICAgICAgICAgICAvLyBuZXdEYXRlLnNldE1vbnRoKG5ld01vbnRoKQ0KICAgICAgICAgICAgICAgLy8gbmV3RGF0ZS5zZXREYXRlKG5ld0lzb0RhdGUpDQogICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgIHRoaXMucmVhZHlEYXRlID0gbmV3RGF0ZQ0KICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5yZWFkeURhdGUudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwxMCkpDQogICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnJlYWR5RGF0ZS50b1N0cmluZygpLnN1YnN0cigwLCAxNSkpDQogICAgICAgICAgICB9DQogICAgICAgICB9DQoNCiAgICAgIH0sDQogICAgICBvblNhdmVDaGFuZ2VzRW50cnkoKSB7DQogICAgICAgICBpZiAodGhpcy5waWNrZWREYXRlRW50cnkgIT09IG51bGwpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLnBpY2tlZERhdGVFbnRyeS5sZW5ndGggPiAxKSB7DQogICAgICAgICAgICAgICB0aGlzLnJlYWR5RGF0ZUVudHJ5ID0gW10NCiAgICAgICAgICAgICAgIGNvbnN0IG5ld0RhdGUxID0gbmV3IERhdGUobmV3IERhdGUoKSkNCiAgICAgICAgICAgICAgIGNvbnN0IG5ld0RheTEgPSBuZXcgRGF0ZSh0aGlzLnBpY2tlZERhdGVFbnRyeVswXSkuZ2V0VVRDRGF0ZSgpDQogICAgICAgICAgICAgICBjb25zdCBuZXdNb250aDEgPSBuZXcgRGF0ZSh0aGlzLnBpY2tlZERhdGVFbnRyeVswXSkuZ2V0VVRDTW9udGgoKQ0KICAgICAgICAgICAgICAgY29uc3QgbmV3WWVhcjEgPSBuZXcgRGF0ZSh0aGlzLnBpY2tlZERhdGVFbnRyeVswXSkuZ2V0VVRDRnVsbFllYXIoKQ0KICAgICAgICAgICAgICAgbmV3RGF0ZTEuc2V0VVRDRnVsbFllYXIobmV3WWVhcjEpDQogICAgICAgICAgICAgICBuZXdEYXRlMS5zZXRVVENNb250aChuZXdNb250aDEpDQogICAgICAgICAgICAgICBuZXdEYXRlMS5zZXRVVENEYXRlKG5ld0RheTEpDQogICAgICAgICAgICAgICBuZXdEYXRlMS5zZXRVVENIb3VycygtMykNCiAgICAgICAgICAgICAgIG5ld0RhdGUxLnNldFVUQ01pbnV0ZXMoMCkNCiAgICAgICAgICAgICAgIG5ld0RhdGUxLnNldFVUQ1NlY29uZHMoMCkNCiAgICAgICAgICAgICAgIGNvbnN0IG5ld0RhdGUyID0gbmV3IERhdGUobmV3IERhdGUoKSkNCiAgICAgICAgICAgICAgIGNvbnN0IG5ld0RheTIgPSBuZXcgRGF0ZSh0aGlzLnBpY2tlZERhdGVFbnRyeVsxXSkuZ2V0VVRDRGF0ZSgpDQogICAgICAgICAgICAgICBjb25zdCBuZXdNb250aDIgPSBuZXcgRGF0ZSh0aGlzLnBpY2tlZERhdGVFbnRyeVsxXSkuZ2V0VVRDTW9udGgoKQ0KICAgICAgICAgICAgICAgY29uc3QgbmV3WWVhcjIgPSBuZXcgRGF0ZSh0aGlzLnBpY2tlZERhdGVFbnRyeVsxXSkuZ2V0VVRDRnVsbFllYXIoKQ0KICAgICAgICAgICAgICAgbmV3RGF0ZTIuc2V0VVRDRnVsbFllYXIobmV3WWVhcjIpDQogICAgICAgICAgICAgICBuZXdEYXRlMi5zZXRVVENNb250aChuZXdNb250aDIpDQogICAgICAgICAgICAgICBuZXdEYXRlMi5zZXRVVENEYXRlKG5ld0RheTIpDQogICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgbmV3RGF0ZTIuc2V0VVRDSG91cnMoMjApDQogICAgICAgICAgICAgICBuZXdEYXRlMi5zZXRVVENNaW51dGVzKDU5KQ0KICAgICAgICAgICAgICAgbmV3RGF0ZTIuc2V0VVRDU2Vjb25kcyg1OSkNCiAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5ld0RhdGUxKQ0KICAgICAgICAgICAgICAgY29uc29sZS5sb2cobmV3RGF0ZTIpDQogICAgICAgICAgICAgICB0aGlzLnJlYWR5RGF0ZUVudHJ5LnB1c2gobmV3RGF0ZTEsIG5ld0RhdGUyKQ0KICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5yZWFkeURhdGUpDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5waWNrZWREYXRlRW50cnkpDQogICAgICAgICAgICAgICBjb25zdCBuZXdEYXRlID0gbmV3IERhdGUobmV3IERhdGUoKSkNCiAgICAgICAgICAgICAgIGNvbnN0IG5ld0RheSA9IG5ldyBEYXRlKHRoaXMucGlja2VkRGF0ZUVudHJ5KS5nZXRVVENEYXRlKCkNCiAgICAgICAgICAgICAgIGNvbnN0IG5ld01vbnRoID0gbmV3IERhdGUodGhpcy5waWNrZWREYXRlRW50cnkpLmdldFVUQ01vbnRoKCkNCiAgICAgICAgICAgICAgIGNvbnN0IG5ld1llYXIgPSBuZXcgRGF0ZSh0aGlzLnBpY2tlZERhdGVFbnRyeSkuZ2V0VVRDRnVsbFllYXIoKQ0KICAgICAgICAgICAgICAgbmV3RGF0ZS5zZXRVVENGdWxsWWVhcihuZXdZZWFyKQ0KICAgICAgICAgICAgICAgbmV3RGF0ZS5zZXRVVENNb250aChuZXdNb250aCkNCiAgICAgICAgICAgICAgIG5ld0RhdGUuc2V0VVRDRGF0ZShuZXdEYXkpDQogICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgdGhpcy5yZWFkeURhdGVFbnRyeSA9IG5ld0RhdGUNCiAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMucmVhZHlEYXRlRW50cnkpDQogICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnJlYWR5RGF0ZS50b0lTT1N0cmluZygpLnN1YnN0cigwLDEwKSkNCiAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMucmVhZHlEYXRlLnRvU3RyaW5nKCkuc3Vic3RyKDAsIDE1KSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgIH0NCg0KICAgICAgfSwNCiAgICAgIG9uU2F2ZUNoYW5nZXNMZWZ0KCkgew0KICAgICAgICAgaWYgKHRoaXMucGlja2VkRGF0ZUxlZnQgIT09IG51bGwpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLnBpY2tlZERhdGVMZWZ0Lmxlbmd0aCA+IDEpIHsNCiAgICAgICAgICAgICAgIHRoaXMucmVhZHlEYXRlTGVmdCA9IFtdDQogICAgICAgICAgICAgICBjb25zdCBuZXdEYXRlMSA9IG5ldyBEYXRlKG5ldyBEYXRlKCkpDQogICAgICAgICAgICAgICBjb25zdCBuZXdEYXkxID0gbmV3IERhdGUodGhpcy5waWNrZWREYXRlTGVmdFswXSkuZ2V0VVRDRGF0ZSgpDQogICAgICAgICAgICAgICBjb25zdCBuZXdNb250aDEgPSBuZXcgRGF0ZSh0aGlzLnBpY2tlZERhdGVMZWZ0WzBdKS5nZXRVVENNb250aCgpDQogICAgICAgICAgICAgICBjb25zdCBuZXdZZWFyMSA9IG5ldyBEYXRlKHRoaXMucGlja2VkRGF0ZUxlZnRbMF0pLmdldFVUQ0Z1bGxZZWFyKCkNCiAgICAgICAgICAgICAgIG5ld0RhdGUxLnNldFVUQ0Z1bGxZZWFyKG5ld1llYXIxKQ0KICAgICAgICAgICAgICAgbmV3RGF0ZTEuc2V0VVRDTW9udGgobmV3TW9udGgxKQ0KICAgICAgICAgICAgICAgbmV3RGF0ZTEuc2V0VVRDRGF0ZShuZXdEYXkxKQ0KICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICBuZXdEYXRlMS5zZXRVVENIb3VycygtMykNCiAgICAgICAgICAgICAgIG5ld0RhdGUxLnNldFVUQ01pbnV0ZXMoMCkNCiAgICAgICAgICAgICAgIG5ld0RhdGUxLnNldFVUQ1NlY29uZHMoMCkNCiAgICAgICAgICAgICAgIGNvbnN0IG5ld0RhdGUyID0gbmV3IERhdGUobmV3IERhdGUoKSkNCiAgICAgICAgICAgICAgIGNvbnN0IG5ld0RheTIgPSBuZXcgRGF0ZSh0aGlzLnBpY2tlZERhdGVMZWZ0WzFdKS5nZXRVVENEYXRlKCkNCiAgICAgICAgICAgICAgIGNvbnN0IG5ld01vbnRoMiA9IG5ldyBEYXRlKHRoaXMucGlja2VkRGF0ZUxlZnRbMV0pLmdldFVUQ01vbnRoKCkNCiAgICAgICAgICAgICAgIGNvbnN0IG5ld1llYXIyID0gbmV3IERhdGUodGhpcy5waWNrZWREYXRlTGVmdFsxXSkuZ2V0VVRDRnVsbFllYXIoKQ0KICAgICAgICAgICAgICAgbmV3RGF0ZTIuc2V0VVRDRnVsbFllYXIobmV3WWVhcjIpDQogICAgICAgICAgICAgICBuZXdEYXRlMi5zZXRVVENNb250aChuZXdNb250aDIpDQogICAgICAgICAgICAgICBuZXdEYXRlMi5zZXRVVENEYXRlKG5ld0RheTIpDQogICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgIG5ld0RhdGUyLnNldFVUQ0hvdXJzKDIwKQ0KICAgICAgICAgICAgICAgbmV3RGF0ZTIuc2V0VVRDTWludXRlcyg1OSkNCiAgICAgICAgICAgICAgIG5ld0RhdGUyLnNldFVUQ1NlY29uZHMoNTkpDQogICAgICAgICAgICAgICBjb25zb2xlLmxvZyhuZXdEYXRlMSkNCiAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5ld0RhdGUyKQ0KICAgICAgICAgICAgICAgdGhpcy5yZWFkeURhdGVMZWZ0LnB1c2gobmV3RGF0ZTEsIG5ld0RhdGUyKQ0KICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5yZWFkeURhdGUpDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5waWNrZWREYXRlTGVmdCkNCiAgICAgICAgICAgICAgIGNvbnN0IG5ld0RhdGUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpKQ0KICAgICAgICAgICAgICAgY29uc3QgbmV3RGF5ID0gbmV3IERhdGUodGhpcy5waWNrZWREYXRlTGVmdCkuZ2V0VVRDRGF0ZSgpDQogICAgICAgICAgICAgICBjb25zdCBuZXdNb250aCA9IG5ldyBEYXRlKHRoaXMucGlja2VkRGF0ZUxlZnQpLmdldFVUQ01vbnRoKCkNCiAgICAgICAgICAgICAgIGNvbnN0IG5ld1llYXIgPSBuZXcgRGF0ZSh0aGlzLnBpY2tlZERhdGVMZWZ0KS5nZXRVVENGdWxsWWVhcigpDQogICAgICAgICAgICAgICBuZXdEYXRlLnNldFVUQ0Z1bGxZZWFyKG5ld1llYXIpDQogICAgICAgICAgICAgICBuZXdEYXRlLnNldFVUQ01vbnRoKG5ld01vbnRoKQ0KICAgICAgICAgICAgICAgbmV3RGF0ZS5zZXRVVENEYXRlKG5ld0RheSkNCiAgICAgICAgICAgICAgIHRoaXMucmVhZHlEYXRlTGVmdCA9IG5ld0RhdGUNCiAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMucmVhZHlEYXRlTGVmdCkNCiAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMucmVhZHlEYXRlLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsMTApKQ0KICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5yZWFkeURhdGUudG9TdHJpbmcoKS5zdWJzdHIoMCwgMTUpKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgfQ0KDQogICAgICB9LA0KICAgICAgdXBkYXRlU29ydGVkQXBwb2ludG1lbnRzMjAyMCgpew0KICAgICAgICAgdGhpcy5zb3J0ZWQyMDIwYXBwb2ludG1lbnRzLmZvckVhY2goYXBwb2ludCA9PiB7DQogICAgICAgICAgICBjb25zdCBpbmRleFBvcyA9IHRoaXMuc29ydGVkMjAyMGFwcG9pbnRtZW50cy5pbmRleE9mKGFwcG9pbnQpICsgMQ0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYXBwb2ludC5pZCkNCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGluZGV4UG9zKQ0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VwZGF0ZURvY09wTnVtYmVyJywgew0KICAgICAgICAgICAgICAgaWQ6IGFwcG9pbnQuaWQsDQogICAgICAgICAgICAgICBpbmRleFBvczogaW5kZXhQb3MNCiAgICAgICAgICAgIH0pDQogICAgICAgICB9KQ0KICAgICAgfSwNCiAgICAgIHVwZGF0ZVNvcnRlZEFwcG9pbnRtZW50czIwMjEoKXsNCiAgICAgICAgIHRoaXMuc29ydGVkMjAyMWFwcG9pbnRtZW50cy5mb3JFYWNoKGFwcG9pbnQgPT4gew0KICAgICAgICAgICAgY29uc3QgaW5kZXhQb3MgPSB0aGlzLnNvcnRlZDIwMjFhcHBvaW50bWVudHMuaW5kZXhPZihhcHBvaW50KSArIDENCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGFwcG9pbnQuaWQpDQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpbmRleFBvcykNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1cGRhdGVEb2NPcE51bWJlcicsIHsNCiAgICAgICAgICAgICAgIGlkOiBhcHBvaW50LmlkLA0KICAgICAgICAgICAgICAgaW5kZXhQb3M6IGluZGV4UG9zDQogICAgICAgICAgICB9KQ0KICAgICAgICAgfSkNCiAgICAgIH0sDQogICAgICBjbG9zZUZpbHRlcigpIHsNCiAgICAgICAgIHRoaXMuaXNGaWx0ZXIgPSAhdGhpcy5pc0ZpbHRlcg0KICAgICAgICAgaWYodGhpcy5pc1RpbWVQaWNrZXJXYXNPcGVuZWQpew0KICAgICAgICAgICAgdGhpcy5yZWFkeURhdGUgPSBudWxsDQogICAgICAgICAgICB0aGlzLnBpY2tlZERhdGUgPSBbbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCldDQogICAgICAgICB9DQogICAgICAgICB0aGlzLnJlYWR5RGF0ZUVudHJ5ID0gbnVsbA0KICAgICAgICAgdGhpcy5waWNrZWREYXRlRW50cnkgPSBbbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCldDQogICAgICAgICB0aGlzLnJlYWR5RGF0ZUxlZnQgPSBudWxsDQogICAgICAgICB0aGlzLnBpY2tlZERhdGVMZWZ0ID0gW25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApXQ0KICAgICAgICAgdGhpcy5zZWFyY2hOYW1lID0gJycNCiAgICAgICAgIHRoaXMuc2VhcmNoVGl0bGUgPSAnJw0KICAgICAgICAgdGhpcy5waWNrZWRTdXJnZW9uID0gJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycNCiAgICAgICAgIHRoaXMuc2VhcmNoT3BfbnVtYmVyID0gJycNCiAgICAgICAgIHRoaXMucGlja2VkUmFuayA9ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnDQogICAgICAgICB0aGlzLnNob3dTdW0gPSAn0J/QvtC60LDQt9Cw0YLQuCcNCiAgICAgICAgIHRoaXMuc2hvd1N1bUFmdGVyID0gJ9Cf0L7QutCw0LfQsNGC0LgnDQogICAgICAgICB0aGlzLnNlYXJjaE9wX2NvZGUgPSAnJw0KICAgICAgICAgdGhpcy5zZWFyY2hDb21wbGV4aXR5ID0gJycNCiAgICAgICAgIHRoaXMuc2VhcmNoTm96b2xvZ2lhID0gJycNCiAgICAgICAgIHRoaXMucGlja2VkVGltZVR5cGUgPSAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJw0KICAgICAgICAgdGhpcy5waWNrZWRVcmdlbmN5VHlwZSA9ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnDQogICAgICAgICB0aGlzLnBpY2tlZE9wZXJhdGlvblR5cGUgPSAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJw0KICAgICAgICAgdGhpcy5waWNrZWRBbmVzdGhlc2lhVHlwZSA9ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnDQogICAgICAgICB0aGlzLnBpY2tlZFNwb3RUeXBlID0gJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycNCiAgICAgICAgIHRoaXMucGljZWtkVWx0aW1hdGVUeXBlID0gJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycNCiAgICAgICAgIHRoaXMucGlja2VkQXNzaXN0YW50ID0gJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycNCiAgICAgICAgIHRoaXMucGlja2VkQW5lc3RoZXNpb2xvZ2lzdCA9ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnDQogICAgICAgICB0aGlzLnBpY2tlZE1lZHNpc3RlciA9ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnDQogICAgICAgICB0aGlzLnNlYXJjaEFnZSA9ICcnDQogICAgICAgICB0aGlzLnNlYXJjaFNpY2tuZXNzSGlzdG9yeSA9ICcnDQogICAgICAgICB0aGlzLnNlYXJjaERpYWdub3Npc1VsdGltYXRlID0gJycNCiAgICAgICAgIHRoaXMuc2VhcmNoQ29tcGxpY2F0aW9uID0gJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycNCiAgICAgICAgIHRoaXMucGlja2VkQ29tcGxleGl0eSA9ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnDQogICAgICB9LA0KICAgICAgY2xlYXJGaWx0ZXIoKSB7DQogICAgICAgICAvLyBpZih0aGlzLmlzVGltZVBpY2tlcldhc09wZW5lZCl7DQogICAgICAgICAvLyAgICB0aGlzLnJlYWR5RGF0ZSA9IG51bGwNCiAgICAgICAgIC8vICAgIHRoaXMucGlja2VkRGF0ZSA9IFtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKV0NCiAgICAgICAgIC8vIH0gDQogICAgICAgICBpZih0aGlzLmlzVGltZVBpY2tlcldhc09wZW5lZCl7DQogICAgICAgICAgICBjb25zdCB0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY3VycmVudFllYXJCdXR0b24nKQ0KICAgICAgICAgICAgdGhpcy5jaG9vc2VPcFllYXIodGFyLCAyMDIxLCB0cnVlKQ0KICAgICAgICAgICAgDQogICAgICAgICB9IA0KICAgICAgICAgDQogICAgICAgICB0aGlzLnJlYWR5RGF0ZUVudHJ5ID0gbnVsbA0KICAgICAgICAgdGhpcy5waWNrZWREYXRlRW50cnkgPSBbbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCldDQogICAgICAgICB0aGlzLnJlYWR5RGF0ZUxlZnQgPSBudWxsDQogICAgICAgICB0aGlzLnBpY2tlZERhdGVMZWZ0ID0gW25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApXQ0KICAgICAgICAgdGhpcy5zZWFyY2hOYW1lID0gJycNCiAgICAgICAgIHRoaXMuc2VhcmNoVGl0bGUgPSAnJw0KICAgICAgICAgdGhpcy5waWNrZWRTdXJnZW9uID0gJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycNCiAgICAgICAgIHRoaXMuc2VhcmNoT3BfbnVtYmVyID0gJycNCiAgICAgICAgIHRoaXMucGlja2VkUmFuayA9ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnDQogICAgICAgICB0aGlzLnNob3dTdW0gPSAn0J/QvtC60LDQt9Cw0YLQuCcNCiAgICAgICAgIHRoaXMuc2hvd1N1bUFmdGVyID0gJ9Cf0L7QutCw0LfQsNGC0LgnDQogICAgICAgICB0aGlzLnNlYXJjaE9wX2NvZGUgPSAnJw0KICAgICAgICAgdGhpcy5zZWFyY2hDb21wbGV4aXR5ID0gJycNCiAgICAgICAgIHRoaXMuc2VhcmNoTm96b2xvZ2lhID0gJycNCiAgICAgICAgIHRoaXMucGlja2VkVGltZVR5cGUgPSAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJw0KICAgICAgICAgdGhpcy5waWNrZWRVcmdlbmN5VHlwZSA9ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnDQogICAgICAgICB0aGlzLnBpY2tlZE9wZXJhdGlvblR5cGUgPSAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJw0KICAgICAgICAgdGhpcy5waWNrZWRBbmVzdGhlc2lhVHlwZSA9ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnDQogICAgICAgICB0aGlzLnBpY2tlZFNwb3RUeXBlID0gJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycNCiAgICAgICAgIHRoaXMucGljZWtkVWx0aW1hdGVUeXBlID0gJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycNCiAgICAgICAgIHRoaXMucGlja2VkQXNzaXN0YW50ID0gJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycNCiAgICAgICAgIHRoaXMucGlja2VkQW5lc3RoZXNpb2xvZ2lzdCA9ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnDQogICAgICAgICB0aGlzLnBpY2tlZE1lZHNpc3RlciA9ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnLA0KICAgICAgICAgdGhpcy5zZWFyY2hBZ2UgPSAnJw0KICAgICAgICAgdGhpcy5zZWFyY2hTaWNrbmVzc0hpc3RvcnkgPSAnJw0KICAgICAgICAgdGhpcy5zZWFyY2hEaWFnbm9zaXNVbHRpbWF0ZSA9ICcnDQogICAgICAgICB0aGlzLnNlYXJjaENvbXBsaWNhdGlvbiA9ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnDQogICAgICAgICB0aGlzLnBpY2tlZENvbXBsZXhpdHkgPSAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJw0KICAgICAgfQ0KICAgfSwNCiAgIGRhdGE6ICgpID0+ICh7DQogICAgICBpc1llYXJGaWx0ZXJPcGVuOiBmYWxzZSwNCiAgICAgIHp2aXRUaW1lczogZmFsc2UsDQogICAgICBpc0FyY2hpdmU6IHRydWUsDQogICAgICBzaG93U3VtOiAn0J/QvtC60LDQt9Cw0YLQuCcsDQogICAgICBzaG93U3VtQWZ0ZXI6ICfQn9C+0LrQsNC30LDRgtC4JywNCiAgICAgIHBpY2tlZFN1cmdlb246ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnLA0KICAgICAgc2VhcmNoTmFtZTogJycsDQogICAgICBzZWFyY2hUaXRsZTogJycsDQogICAgICBlZGl0RGlhbG9nOiBmYWxzZSwNCiAgICAgIGVkaXREaWFsb2cxOiBmYWxzZSwNCiAgICAgIGVkaXREaWFsb2cyOiBmYWxzZSwNCiAgICAgIHBpY2tlZERhdGU6IFtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKV0sDQogICAgICBwaWNrZWREYXRlRW50cnk6IFtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKV0sDQogICAgICBwaWNrZWREYXRlTGVmdDogW25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApXSwNCiAgICAgIHJlYWR5RGF0ZTogbnVsbCwNCiAgICAgIHJlYWR5RGF0ZUVudHJ5OiBudWxsLA0KICAgICAgcmVhZHlEYXRlTGVmdDogbnVsbCwNCiAgICAgIGlzRmlsdGVyOiB0cnVlLA0KICAgICAgc2VhcmNoT3BfbnVtYmVyOiAnJywNCiAgICAgIHNlYXJjaE9wX2NvZGU6ICcnLA0KICAgICAgc2VhcmNoQ29tcGxleGl0eTogJycsDQogICAgICBzZWFyY2hOb3pvbG9naWE6ICcnLA0KICAgICAgcGlja2VkUmFuazogJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycsDQogICAgICBwaWNrZWRUaW1lVHlwZTogJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycsDQogICAgICBwaWNrZWRVcmdlbmN5VHlwZTogJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycsDQogICAgICBwaWNrZWRPcGVyYXRpb25UeXBlOiAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJywNCiAgICAgIHBpY2tlZEFuZXN0aGVzaWFUeXBlOiAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJywNCiAgICAgIHBpY2tlZFNwb3RUeXBlOiAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJywNCiAgICAgIHBpY2VrZFVsdGltYXRlVHlwZTogJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycsDQogICAgICBwaWNrZWRBc3Npc3RhbnQ6ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnLA0KICAgICAgcGlja2VkQW5lc3RoZXNpb2xvZ2lzdDogJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycsDQogICAgICBwaWNrZWRNZWRzaXN0ZXI6ICfQsdC10Lcg0YTRltC70YzRgtGA0YMnLA0KICAgICAgdXBkYXRlZEFnZTogZmFsc2UsDQogICAgICBzZWFyY2hBZ2U6ICcnLA0KICAgICAgc2VhcmNoU2lja25lc3NIaXN0b3J5OiAnJywNCiAgICAgIHNlYXJjaERpYWdub3Npc1VsdGltYXRlOiAnJywNCiAgICAgIHNlYXJjaENvbXBsaWNhdGlvbjogJ9Cx0LXQtyDRhNGW0LvRjNGC0YDRgycsDQogICAgICBwaWNrZWRDb21wbGV4aXR5OiAn0LHQtdC3INGE0ZbQu9GM0YLRgNGDJywNCiAgICAgIGRpYWxvZ1dlZWs6IGZhbHNlLA0KICAgICAgZGlhbG9nTW9udGg6IGZhbHNlLA0KICAgICAgZGlhbG9nMWt2YXJ0YWw6IGZhbHNlLA0KICAgICAgZGlhbG9nMmt2YXJ0YWw6IGZhbHNlLA0KICAgICAgZGlhbG9nM2t2YXJ0YWw6IGZhbHNlLA0KICAgICAgZGlhbG9nNGt2YXJ0YWw6IGZhbHNlLA0KICAgICAgZGlhbG9nMWhhbGY6IGZhbHNlLA0KICAgICAgZGlhbG9nMmhhbGY6IGZhbHNlLA0KICAgICAgZGlhbG9nWWVhcjogZmFsc2UsDQogICAgICBvcGVyYXRpb25QYXRpZW50czogW10sDQogICAgICBvcGVyYXRpb25zRWFzaWVyOiBbXSwNCiAgICAgIG9wZXJhdGlvbnNIYXJkZXI6IFtdLA0KICAgICAgb3BlcmF0aW9uc09wZW46IFtdLA0KICAgICAgb3BlcmF0aW9uc0xhcG86IFtdLA0KICAgICAgb3BlcmF0aW9uc0VuZG86IFtdLA0KICAgICAgb3BlcmF0aW9uc01hbG86IFtdLA0KICAgICAgaXNUaW1lUGlja2VyV2FzT3BlbmVkOiBmYWxzZQ0KDQoNCiAgIH0pLA0KICAgY3JlYXRlZCgpIHsNCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdsb2FkQXBwb2ludG1lbnRzJykNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuaXNTdXBlckFkbWluKQ0KICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnNvcnRlZDIwMjFhcHBvaW50bWVudHMpDQogICAgICB9LCAyNTAwKSANCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgY29uc3QgdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2N1cnJlbnRZZWFyQnV0dG9uJykNCiAgICAgICAgIHRoaXMuY2hvb3NlT3BZZWFyKHRhciwgMjAyMSwgdHJ1ZSkNCiAgICAgIH0sIDE0MDApDQogICAgICANCiAgIH0sDQogICB3YXRjaDogew0KICAgICAgZmlsdGVyZWRBcHBvaW50bWVudHMoKXsNCiAgICAgICAgIHRoaXMuc2hvd1N1bSA9ICfQn9C+0LrQsNC30LDRgtC4Jw0KICAgICAgICAgdGhpcy5zaG93U3VtQWZ0ZXIgPSAn0J/QvtC60LDQt9Cw0YLQuCcNCiAgICAgIH0sDQogICAgICBwaWNrZWREYXRlKCl7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmKHRoaXMuenZpdFRpbWVzID09IGZhbHNlKXsNCiAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDbGFzc2VzT2Zadml0KGZhbHNlKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICANCiAgICAgIH0sDQogICAgICByZWFkeURhdGUoKXsNCiAgICAgICAgIGlmKHRoaXMuenZpdFRpbWVzID09IGZhbHNlKXsNCiAgICAgICAgICAgIHRoaXMuY2xlYXJDbGFzc2VzT2Zadml0KGZhbHNlKQ0KICAgICAgICAgfQ0KICAgICAgICAgDQogICAgICB9DQogICB9DQogICAvLyBtb3VudGVkKCkgew0KICAgLy8gICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAvLyAgICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUuaXNVcGRhdGVkQWdlID09IGZhbHNlKSB7DQogICAvLyAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFVwZGF0ZWRBZ2UnLCB0cnVlKQ0KICAgLy8gICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCkNCiAgIC8vICAgICAgICAgIHRoaXMuYWxsQXBwb2ludG1lbnRzLmZvckVhY2goYXBwb2ludCA9PiB7DQogICAvLyAgICAgICAgICAgICBsZXQgYWdlTnVtYmVyID0gTWF0aC5mbG9vcigoZGF0ZS5nZXRUaW1lKCkgLSBhcHBvaW50LmRhdGVBZ2UudG9EYXRlKCkuZ2V0VGltZSgpKSAvICgxMDAwICogMzYwMCAqIDI0ICogMzY1KSkNCiAgIC8vICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1cGRhdGVQb3N0Jywgew0KICAgLy8gICAgICAgICAgICAgICAgaWQ6IGFwcG9pbnQuaWQsDQogICAvLyAgICAgICAgICAgICAgICBhZ2U6IGFnZU51bWJlciwNCiAgIC8vICAgICAgICAgICAgICAgIG5vdFRvTG9hZGluZzogJ3llcycNCiAgIC8vICAgICAgICAgICAgIH0pDQogICAvLyAgICAgICAgICB9KQ0KICAgLy8gICAgICAgfQ0KICAgLy8gICAgfSwgNTAwKQ0KICAgLy8gfQ0KfQ0K"},{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n<main>\r\n   <!-- <button v-if=\"!isArchive\" @click.prevent=\"onArchive\" class=\"pa-1 btn-archive blue white--text\">Open Archive</button>\r\n   <button v-else @click.prevent=\"onArchive\" class=\"pa-1 btn-archive white--text red\">Close Archive</button> -->\r\n   \r\n   <v-layout row wrap v-if=\"isFilter\" class=\"layoutTT\">\r\n      <v-flex xs12  class=\"layout-unit unit_1\">\r\n         <v-select :items=\"items\" label=\"Хірург\" v-model=\"pickedSurgeon\"></v-select>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_2\">\r\n         <v-select :items=\"items\" label=\"Ассистент\" v-model=\"pickedAssistant\"></v-select>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_3\">\r\n         <v-select :items=\"anesthesiologistItems\" label=\"Анестезіолог\" v-model=\"pickedAnesthesiologist\"></v-select>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_4\">\r\n         <v-select :items=\"medsisterItems\" label=\"Операційна Сестра\" v-model=\"pickedMedsister\"></v-select>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_5\">\r\n         <v-select :items=\"rankItems\" label=\"Звання\" v-model=\"pickedRank\"></v-select>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_6\">\r\n         <v-select :items=\"timeTypeItems\" label=\"Первинна / Повторна\" v-model=\"pickedTimeType\"></v-select>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_7\">\r\n         <v-select :items=\"urgencyTypeItems\" label=\"Планова / Ургентна\" v-model=\"pickedUrgencyType\"></v-select>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_8\">\r\n         <v-select :items=\"operationTypeItems\" label=\"Тип операції...\" v-model=\"pickedOperationType\"></v-select>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_9\">\r\n         <v-select :items=\"anesthesiaTypeItems\" label=\"Тип анестезії...\" v-model=\"pickedAnesthesiaType\"></v-select>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_10\">\r\n         <v-select :items=\"spotTypeItems\" label=\"Стаціонарна/ Амбулаторна\" v-model=\"pickedSpotType\"></v-select>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_11\">\r\n         <v-select :items=\"complicationItems\" label=\"Складність...\" v-model=\"searchComplication\"></v-select>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_12\">\r\n         <v-select :items=\"ultimateTypeItems\" label=\"Виписаний / Помер\" v-model=\"picekdUltimateType\"></v-select>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_13\">\r\n         <div class=\"search-wrapper\">\r\n            <v-text-field  v-model=\"searchName\" label=\"Прізвище І. Б..\" />\r\n\r\n         </div>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_14\">\r\n         <div class=\"search-wrapper\">\r\n            <v-text-field label=\"Назва операції..\" v-model=\"searchTitle\" />\r\n\r\n         </div>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_15\">\r\n         <div class=\"search-wrapper\">\r\n            <v-text-field  v-model=\"searchAge\" label=\"Вік..\" />\r\n\r\n         </div>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_16\">\r\n         <div class=\"search-wrapper\">\r\n            <v-text-field  v-model=\"searchOp_code\" label=\"Код операції..\" />\r\n         </div>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_17\">\r\n         <div class=\"search-wrapper\">\r\n            <v-text-field v-model=\"searchOp_number\" label=\"Номер операції..\" />\r\n\r\n         </div>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_18\">\r\n         <div class=\"search-wrapper\">\r\n            <v-text-field v-model=\"searchNozologia\" label=\"Нозологія..\" />\r\n         </div>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_19\">\r\n         <div class=\"search-wrapper\">\r\n            <v-text-field v-model=\"searchSicknessHistory\" label=\"Історія Хвороби..\" />\r\n         </div>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_20\">\r\n         <div class=\"search-wrapper\">\r\n            <v-text-field v-model=\"searchDiagnosisUltimate\" label=\"Кінцевий діагноз..\" />\r\n         </div>\r\n      </v-flex>\r\n      \r\n      <v-flex xs12  class=\"layout-unit unit_21\">\r\n         <v-menu ref=\"menu\" v-model=\"editDialog\" :close-on-content-click=\"false\" :return-value.sync=\"pickedDate\" transition=\"scale-transition\" offset-y min-width=\"290px\">\r\n            <template v-slot:activator=\"{ on, attrs }\">\r\n               <v-text-field v-model=\"pickedDate\" label=\"Дата операції\" prepend-icon=\"event\" readonly v-bind=\"attrs\" v-on=\"on\"></v-text-field>\r\n            </template>\r\n            <v-date-picker v-model=\"pickedDate\" range locale=\"uk-UA\" no-title scrollable>\r\n               <v-spacer></v-spacer>\r\n               <v-btn text color=\"primary\" @click=\"onResetDate(); $refs.menu.save(pickedDate);\">Очистити</v-btn>\r\n               <v-btn text color=\"primary\" @click=\"onClose\">Скасувати</v-btn>\r\n               <v-btn text color=\"primary\" @click=\"onSaveChanges(); $refs.menu.save(pickedDate); dateChange() \">OK</v-btn>\r\n            </v-date-picker>\r\n         </v-menu>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_22\">\r\n         <v-menu ref=\"menuEntry\" v-model=\"editDialog1\" :close-on-content-click=\"false\" :return-value.sync=\"pickedDateEntry\" transition=\"scale-transition\" offset-y min-width=\"290px\">\r\n            <template v-slot:activator=\"{ on, attrs }\">\r\n               <v-text-field v-model=\"pickedDateEntry\" label=\"Дата поступлення\" prepend-icon=\"event\" readonly v-bind=\"attrs\" v-on=\"on\"></v-text-field>\r\n            </template>\r\n            <v-date-picker v-model=\"pickedDateEntry\" range locale=\"uk-UA\" no-title scrollable>\r\n               <v-spacer></v-spacer>\r\n               <v-btn text color=\"primary\" @click=\"onResetEntry(); $refs.menuEntry.save(pickedDateEntry);\">Очистити</v-btn>\r\n               <v-btn text color=\"primary\" @click=\"onClose\">Скасувати</v-btn>\r\n               <v-btn text color=\"primary\" @click=\"onSaveChangesEntry(); $refs.menuEntry.save(pickedDateEntry); \">OK</v-btn>\r\n            </v-date-picker>\r\n         </v-menu>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_23\">\r\n         <v-menu ref=\"menuLeft\" v-model=\"editDialog2\" :close-on-content-click=\"false\" :return-value.sync=\"pickedDateLeft\" transition=\"scale-transition\" offset-y min-width=\"290px\">\r\n            <template v-slot:activator=\"{ on, attrs }\">\r\n               <v-text-field v-model=\"pickedDateLeft\" label=\"Дата виписки\" prepend-icon=\"event\" readonly v-bind=\"attrs\" v-on=\"on\"></v-text-field>\r\n            </template>\r\n            <v-date-picker v-model=\"pickedDateLeft\" range locale=\"uk-UA\" no-title scrollable>\r\n               <v-spacer></v-spacer>\r\n               <v-btn text color=\"primary\" @click=\"onResetLeft(); $refs.menuLeft.save(pickedDateLeft)\">Очистити</v-btn>\r\n               <v-btn text color=\"primary\" @click=\"onClose\">Скасувати</v-btn>\r\n               <v-btn text color=\"primary\" @click=\"onSaveChangesLeft(); $refs.menuLeft.save(pickedDateLeft); \">OK</v-btn>\r\n            </v-date-picker>\r\n         </v-menu>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_24\">\r\n         <v-select :items=\"pickedComplexityItems\" label=\"Тип ускладнення...\" v-model=\"pickedComplexity\"></v-select>\r\n      </v-flex>\r\n      <v-flex xs12  class=\"layout-unit unit_25\">\r\n         <div class=\"search-wrapper\">\r\n            <v-textarea name=\"textarea\" v-model=\"searchComplexity\" label=\"Ускладнення\" hint=\"Введіть текст\" rows=\"2\"></v-textarea>\r\n         </div>\r\n      </v-flex>\r\n   </v-layout>\r\n   \r\n   <v-layout row wrap class=\"buttons__section\">\r\n      <!-- <v-btn @click=\"weekZvit\" class=\"info__button zvit white--text\">Звіт за тиждень <v-icon class=\"white--text\">assignment_turned_in</v-icon></v-btn> -->\r\n      <v-dialog v-model=\"dialogWeek\" scrollable max-width=\"800px\">\r\n      <template v-slot:activator=\"{ on, attrs }\">\r\n        <v-btn\r\n          @click=\"weekZvit($event); zvitFilter()\"\r\n          v-bind=\"attrs\"\r\n          v-on=\"on\"\r\n          class=\"info__button zvit white--text\"\r\n        >\r\n        \r\n          Звіт за тиждень\r\n          <v-icon class=\"white--text\">assignment_turned_in</v-icon>\r\n        </v-btn>\r\n      </template>\r\n      <v-card v-if=\"dialogWeek\">\r\n        <v-card-title class=\"v-card-zvit\">Показники роботи урологічного відділення за тиждень</v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text style=\"height: 600px;\">\r\n           <p class=\"p-unit-z p-unit-date\"><span class=\"span-unit\">( </span>{{pickedDate[0] | dateZvit}}р. - {{pickedDate[1] | dateZvit}}р. )</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Кількість операцій: </span>{{filteredAppointments.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Кількість пацієнтів: </span>{{operationPatients.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Більшої складності: </span>{{operationsHarder.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Меншої складності: </span>{{operationsEasier.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Відкриті: </span>{{operationsOpen.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Ендоскопічні: </span>{{operationsEndo.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Лапароскопічні: </span>{{operationsLapo.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Малоінвазивні: </span>{{operationsMalo.length}}</p>\r\n         \r\n            \r\n\r\n        </v-card-text>\r\n        <v-divider></v-divider>\r\n        <v-card-actions>\r\n          <v-btn color=\"blue darken-1\" class=\"ml-auto mr-5\" text @click=\"dialogWeek = false; clearDialog()\">Закрити</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n    <v-dialog v-model=\"dialogMonth\" scrollable max-width=\"800px\">\r\n      <template v-slot:activator=\"{ on, attrs }\">\r\n        <v-btn\r\n          @click=\"monthZvit($event); zvitFilter()\"\r\n          v-bind=\"attrs\"\r\n          v-on=\"on\"\r\n          class=\"info__button zvit white--text\"\r\n        >\r\n          Звіт за місяць\r\n          <v-icon class=\"white--text\">assignment_turned_in</v-icon>\r\n        </v-btn>\r\n      </template>\r\n      <v-card v-if=\"dialogMonth\">\r\n        <v-card-title class=\"v-card-zvit\">Показники роботи урологічного відділення за місяць</v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text style=\"height: 600px;\">\r\n           <p class=\"p-unit-z p-unit-date\"><span class=\"span-unit\">( </span>{{pickedDate[0] | dateZvit}}р. - {{pickedDate[1] | dateZvit}}р. )</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Кількість операцій: </span>{{filteredAppointments.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Кількість пацієнтів: </span>{{operationPatients.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Більшої складності: </span>{{operationsHarder.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Меншої складності: </span>{{operationsEasier.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Відкриті: </span>{{operationsOpen.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Ендоскопічні: </span>{{operationsEndo.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Лапароскопічні: </span>{{operationsLapo.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Малоінвазивні: </span>{{operationsMalo.length}}</p>\r\n\r\n            \r\n\r\n        </v-card-text>\r\n        <v-divider></v-divider>\r\n        <v-card-actions>\r\n          <v-btn color=\"blue darken-1\" class=\"ml-auto mr-5\" text @click=\"dialogMonth = false; clearDialog()\">Закрити</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n    <v-dialog v-model=\"dialog1kvartal\" scrollable max-width=\"800px\">\r\n      <template v-slot:activator=\"{ on, attrs }\">\r\n        <v-btn\r\n          @click=\"kvartalZvit($event, 0, 3); zvitFilter()\"\r\n          v-bind=\"attrs\"\r\n          v-on=\"on\"\r\n          class=\"info__button zvit white--text\"\r\n        >\r\n          Звіт за &#8544; квартал\r\n          <v-icon class=\"white--text\">assignment_turned_in</v-icon>\r\n        </v-btn>\r\n      </template>\r\n      <v-card v-if=\"dialog1kvartal\">\r\n        <v-card-title class=\"v-card-zvit\">Показники роботи урологічного відділення за 1 квартал</v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text style=\"height: 600px;\">\r\n           <p class=\"p-unit-z p-unit-date\"><span class=\"span-unit\">( </span>{{pickedDate[0] | dateZvit}}р. - {{pickedDate[1] | dateZvit}}р. )</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Кількість операцій: </span>{{filteredAppointments.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Кількість пацієнтів: </span>{{operationPatients.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Більшої складності: </span>{{operationsHarder.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Меншої складності: </span>{{operationsEasier.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Відкриті: </span>{{operationsOpen.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Ендоскопічні: </span>{{operationsEndo.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Лапароскопічні: </span>{{operationsLapo.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Малоінвазивні: </span>{{operationsMalo.length}}</p>\r\n\r\n            \r\n\r\n        </v-card-text>\r\n        <v-divider></v-divider>\r\n        <v-card-actions>\r\n          <v-btn color=\"blue darken-1\" class=\"ml-auto mr-5\" text @click=\"dialog1kvartal = false; clearDialog()\">Закрити</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n    <v-dialog v-model=\"dialog2kvartal\" scrollable max-width=\"800px\">\r\n      <template v-slot:activator=\"{ on, attrs }\">\r\n        <v-btn\r\n          @click=\"kvartalZvit($event,3,6); zvitFilter()\"\r\n          v-bind=\"attrs\"\r\n          v-on=\"on\"\r\n          class=\"info__button zvit white--text\"\r\n        >\r\n          Звіт за &#8545; квартал\r\n          <v-icon class=\"white--text\">assignment_turned_in</v-icon>\r\n        </v-btn>\r\n      </template>\r\n      <v-card v-if=\"dialog2kvartal\">   \r\n        <v-card-title class=\"v-card-zvit\">Показники роботи урологічного відділення за 2 квартал</v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text style=\"height: 600px;\">\r\n           <p class=\"p-unit-z p-unit-date\"><span class=\"span-unit\">( </span>{{pickedDate[0] | dateZvit}}р. - {{pickedDate[1] | dateZvit}}р. )</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Кількість операцій: </span>{{filteredAppointments.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Кількість пацієнтів: </span>{{operationPatients.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Більшої складності: </span>{{operationsHarder.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Меншої складності: </span>{{operationsEasier.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Відкриті: </span>{{operationsOpen.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Ендоскопічні: </span>{{operationsEndo.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Лапароскопічні: </span>{{operationsLapo.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Малоінвазивні: </span>{{operationsMalo.length}}</p>\r\n\r\n            \r\n\r\n        </v-card-text>\r\n        <v-divider></v-divider>\r\n        <v-card-actions>\r\n          <v-btn color=\"blue darken-1\" class=\"ml-auto mr-5\" text @click=\"dialog2kvartal = false; clearDialog()\">Закрити</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n    <v-dialog v-model=\"dialog3kvartal\" scrollable max-width=\"800px\">\r\n      <template v-slot:activator=\"{ on, attrs }\">\r\n        <v-btn\r\n          @click=\"kvartalZvit($event, 6,9); zvitFilter()\"\r\n          v-bind=\"attrs\"\r\n          v-on=\"on\"\r\n          class=\"info__button zvit white--text\"\r\n        >\r\n          Звіт за &#8546; квартал\r\n          <v-icon class=\"white--text\">assignment_turned_in</v-icon>\r\n        </v-btn>\r\n      </template>\r\n      <v-card v-if=\"dialog3kvartal\">\r\n        <v-card-title class=\"v-card-zvit\">Показники роботи урологічного відділення за 3 квартал</v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text style=\"height: 600px;\">\r\n           <p class=\"p-unit-z p-unit-date\"><span class=\"span-unit\">( </span>{{pickedDate[0] | dateZvit}}р. - {{pickedDate[1] | dateZvit}}р. )</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Кількість операцій: </span>{{filteredAppointments.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Кількість пацієнтів: </span>{{operationPatients.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Більшої складності: </span>{{operationsHarder.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Меншої складності: </span>{{operationsEasier.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Відкриті: </span>{{operationsOpen.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Ендоскопічні: </span>{{operationsEndo.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Лапароскопічні: </span>{{operationsLapo.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Малоінвазивні: </span>{{operationsMalo.length}}</p>\r\n\r\n            \r\n\r\n        </v-card-text>\r\n        <v-divider></v-divider>\r\n        <v-card-actions>\r\n          <v-btn color=\"blue darken-1\" class=\"ml-auto mr-5\" text @click=\"dialog3kvartal = false; clearDialog()\">Закрити</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n    <v-dialog v-model=\"dialog4kvartal\" scrollable max-width=\"800px\">\r\n      <template v-slot:activator=\"{ on, attrs }\">\r\n        <v-btn\r\n          @click=\"kvartalZvit($event, 9,0,true); zvitFilter()\"\r\n          v-bind=\"attrs\"\r\n          v-on=\"on\"\r\n          class=\"info__button zvit white--text\"\r\n        >\r\n          Звіт за &#8547; квартал\r\n          <v-icon class=\"white--text\">assignment_turned_in</v-icon>\r\n        </v-btn>\r\n      </template>\r\n      <v-card v-if=\"dialog4kvartal\">\r\n        <v-card-title class=\"v-card-zvit\">Показники роботи урологічного відділення за 4 квартал</v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text style=\"height: 600px;\">\r\n           <p class=\"p-unit-z p-unit-date\"><span class=\"span-unit\">( </span>{{pickedDate[0] | dateZvit}}р. - {{pickedDate[1] | dateZvit}}р. )</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Кількість операцій: </span>{{filteredAppointments.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Кількість пацієнтів: </span>{{operationPatients.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Більшої складності: </span>{{operationsHarder.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Меншої складності: </span>{{operationsEasier.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Відкриті: </span>{{operationsOpen.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Ендоскопічні: </span>{{operationsEndo.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Лапароскопічні: </span>{{operationsLapo.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Малоінвазивні: </span>{{operationsMalo.length}}</p>\r\n\r\n            \r\n\r\n        </v-card-text>\r\n        <v-divider></v-divider>\r\n        <v-card-actions>\r\n          <v-btn color=\"blue darken-1\" class=\"ml-auto mr-5\" text @click=\"dialog4kvartal = false; clearDialog()\">Закрити</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n    \r\n      <!-- <v-btn @click=\"monthZvit\" class=\"info__button zvit white--text\">Звіт за місяць <v-icon class=\"white--text\">assignment_turned_in</v-icon></v-btn> -->\r\n      <!-- <v-btn @click=\"kvartalZvit($event, 0, 3)\" class=\"info__button zvit white--text\">Звіт за &#8544; квартал <v-icon class=\"white--text\">assignment_turned_in</v-icon></v-btn> -->\r\n      <!-- <v-btn @click=\"kvartalZvit($event,3,6)\" class=\"info__button zvit white--text\">Звіт за &#8545; квартал <v-icon class=\"white--text\">assignment_turned_in</v-icon></v-btn> -->\r\n      <!-- <v-btn @click=\"kvartalZvit($event, 6,9)\" class=\"info__button blue zvit white--text\">Звіт за \t&#8546; квартал <v-icon class=\"white--text\">assignment_turned_in</v-icon></v-btn> -->\r\n      <!-- <v-btn @click=\"kvartalZvit($event, 9,0,true); \" class=\"info__button zvit  white--text\">Звіт за &#8547; квартал <v-icon class=\"white--text\">assignment_turned_in</v-icon></v-btn> -->\r\n   </v-layout>\r\n   <v-layout row wrap class=\"buttons__section\">\r\n      <v-dialog v-model=\"dialog1half\" scrollable max-width=\"800px\">\r\n      <template v-slot:activator=\"{ on, attrs }\">\r\n        <v-btn\r\n          @click=\"halfYearZvit($event, 0, 6, false); zvitFilter()\"\r\n          v-bind=\"attrs\"\r\n          v-on=\"on\"\r\n          class=\"info__button zvit white--text\"\r\n        >\r\n          Звіт за &#8544; півроку \r\n          <v-icon class=\"white--text\">assignment_turned_in</v-icon>\r\n        </v-btn>\r\n      </template>\r\n      <v-card v-if=\"dialog1half\">\r\n        <v-card-title class=\"v-card-zvit\">Показники роботи урологічного відділення за 1 півроку</v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text style=\"height: 600px;\">\r\n           <p class=\"p-unit-z p-unit-date\"><span class=\"span-unit\">( </span>{{pickedDate[0] | dateZvit}}р. - {{pickedDate[1] | dateZvit}}р. )</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Кількість операцій: </span>{{filteredAppointments.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Кількість пацієнтів: </span>{{operationPatients.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Більшої складності: </span>{{operationsHarder.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Меншої складності: </span>{{operationsEasier.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Відкриті: </span>{{operationsOpen.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Ендоскопічні: </span>{{operationsEndo.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Лапароскопічні: </span>{{operationsLapo.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Малоінвазивні: </span>{{operationsMalo.length}}</p>\r\n\r\n            \r\n\r\n        </v-card-text>\r\n        <v-divider></v-divider>\r\n        <v-card-actions>\r\n          <v-btn color=\"blue darken-1\" class=\"ml-auto mr-5\" text @click=\"dialog1half = false; clearDialog()\">Закрити</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n    <v-dialog v-model=\"dialog2half\" scrollable max-width=\"800px\">\r\n      <template v-slot:activator=\"{ on, attrs }\">\r\n        <v-btn\r\n          @click=\"halfYearZvit($event, 6, 0, true); zvitFilter()\"\r\n          v-bind=\"attrs\"\r\n          v-on=\"on\"\r\n          class=\"info__button zvit white--text\"\r\n        >\r\n          Звіт за &#8545; півроку \r\n          <v-icon class=\"white--text\">assignment_turned_in</v-icon>\r\n        </v-btn>\r\n      </template>\r\n      <v-card v-if=\"dialog2half\">\r\n        <v-card-title class=\"v-card-zvit\">Показники роботи урологічного відділення за 2 півроку</v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text style=\"height: 600px;\">\r\n           <p class=\"p-unit-z p-unit-date\"><span class=\"span-unit\">( </span>{{pickedDate[0] | dateZvit}}р. - {{pickedDate[1] | dateZvit}}р. )</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Кількість операцій: </span>{{filteredAppointments.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Кількість пацієнтів: </span>{{operationPatients.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Більшої складності: </span>{{operationsHarder.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Меншої складності: </span>{{operationsEasier.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Відкриті: </span>{{operationsOpen.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Ендоскопічні: </span>{{operationsEndo.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Лапароскопічні: </span>{{operationsLapo.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Малоінвазивні: </span>{{operationsMalo.length}}</p>\r\n\r\n            \r\n\r\n        </v-card-text>\r\n        <v-divider></v-divider>\r\n        <v-card-actions>\r\n          <v-btn color=\"blue darken-1\" class=\"ml-auto mr-5\" text @click=\"dialog2half = false; clearDialog()\">Закрити</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n    <v-dialog v-model=\"dialogYear\" scrollable max-width=\"800px\">\r\n      <template v-slot:activator=\"{ on, attrs }\">\r\n        <v-btn\r\n          @click=\"halfYearZvit($event, 0, 0, true); zvitFilter()\"\r\n          v-bind=\"attrs\"\r\n          v-on=\"on\"\r\n          class=\"info__button zvit white--text\"\r\n        >\r\n          Звіт за рік \r\n          <v-icon class=\"white--text\">assignment_turned_in</v-icon>\r\n        </v-btn>\r\n      </template>\r\n      <v-card v-if=\"dialogYear\">\r\n        <v-card-title class=\"v-card-zvit\">Показники роботи урологічного відділення за рік</v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text style=\"height: 600px;\">\r\n           <p class=\"p-unit-z p-unit-date\"><span class=\"span-unit\">( </span>{{pickedDate[0] | dateZvit}}р. - {{pickedDate[1] | dateZvit}}р. )</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Кількість операцій: </span>{{filteredAppointments.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Кількість пацієнтів: </span>{{operationPatients.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Більшої складності: </span>{{operationsHarder.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Меншої складності: </span>{{operationsEasier.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Відкриті: </span>{{operationsOpen.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Ендоскопічні: </span>{{operationsEndo.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Лапароскопічні: </span>{{operationsLapo.length}}</p>\r\n           <p class=\"p-unit-z\"><span class=\"span-unit\">Малоінвазивні: </span>{{operationsMalo.length}}</p>\r\n\r\n            \r\n\r\n        </v-card-text>\r\n        <v-divider></v-divider>\r\n        <v-card-actions>\r\n          <v-btn color=\"blue darken-1\" class=\"ml-auto mr-5\" text @click=\"dialogYear = false; clearDialog()\">Закрити</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n      <!-- <v-btn @click=\"halfYearZvit($event, 0, 6, false)\" class=\"info__button zvit white--text\">Звіт за &#8544; півроку <v-icon class=\"white--text\">assignment_turned_in</v-icon></v-btn> -->\r\n      <!-- <v-btn @click=\"halfYearZvit($event, 6, 0, true)\" class=\"info__button zvit white--text\">Звіт за &#8545; півроку <v-icon class=\"white--text\">assignment_turned_in</v-icon></v-btn> -->\r\n      <!-- <v-btn @click=\"halfYearZvit($event, 0, 0, true)\" class=\"info__button zvit white--text\">Звіт за рік<v-icon class=\"white--text\">assignment_turned_in</v-icon></v-btn> -->\r\n   </v-layout>\r\n   <v-layout row wrap class=\"buttons__section\">\r\n      <p class=\"info__button-text blue darken-4 white--text\">Кількість операцій: {{filteredAppointments.length}}</p>\r\n      <v-btn @click=\"sumOfBeforeBeds\" class=\"info__button white--text\">Передопераційне ліжко: {{showSum}}</v-btn>\r\n      <v-btn @click=\"sumOfAfterBeds\" class=\"info__button white--text\">Післяопераційне ліжко: {{showSumAfter}}</v-btn>\r\n   </v-layout>\r\n   <v-flex xs12 sm12>\r\n         <!-- <button @click=\"clearDate\" class=\"pa-1 red white--text darken-2\">Clear Date</button> -->\r\n         <v-btn @click=\"clearFilter\" class=\" blue white--text darken-2 btn-archive\">Очистити фільтр</v-btn>\r\n         <v-btn v-if=\"!isFilter\" @click=\"isFilter = !isFilter\" class=\"btn-archive green white--text\">Відкрити фільтр</v-btn>\r\n         <v-btn v-else @click=\"closeFilter\" class=\" btn-archive white--text red\">Закрити фільтр</v-btn>\r\n         <v-btn v-if=\"isSuperAdmin\" @click=\"updateSortedAppointments2021\" class=\" btn-archive white--text black\">Update Data</v-btn>\r\n         <v-btn  @click=\"isYearFilterOpen = !isYearFilterOpen\" class=\" btn-archive yearChoose_button white--text\">Вибрати рік\r\n            <v-icon class=\"white--text\">mdi-chevron-down</v-icon>\r\n            </v-btn> \r\n         <div v-show=\"isYearFilterOpen\">\r\n            <v-btn @click=\"chooseOpYear($event, 2020)\" class=\"btn-archive  yearChoose_button white--text\">2020</v-btn>\r\n            <v-btn @click=\"chooseOpYear($event, 2021)\" id=\"currentYearButton\" class=\"btn-archive yearChoose_button white--text\">2021</v-btn>\r\n         </div>\r\n      </v-flex>\r\n   \r\n   <v-layout row wrap class=\"layoutsec\">\r\n      <section class=\"section\">\r\n         <div v-for=\"appointment in filteredAppointments\" :key=\"appointment.id\"  class=\"appo-div\">\r\n            <v-card>\r\n               <v-card-title primary-title class=\"appo-title\">\r\n                  {{ appointment.title}}\r\n                <div class=\"zvit-wrapper\">\r\n                  <v-btn text class=\"ml-3 blue darken-4 white--text btn-zvit\" @click=\"onOpenSingleRelease(appointment.id)\">\r\n                     Звіт <v-icon>assignment_turned_in</v-icon>\r\n                  </v-btn>\r\n                </div>\r\n                  \r\n               </v-card-title>\r\n               <v-card-text @click=\"onOpenSingle(appointment.id)\">\r\n                  <h2 class=\"appo-unit\">Операція: {{ appointment.date | dateF }}</h2>\r\n                  <h2 class=\"appo-unit\">Код операції: {{ appointment.op_code}}</h2>\r\n                  <h2 class=\"appo-unit\">Пацієнт: {{appointment.user.firstName}} {{appointment.user.lastName}}</h2>\r\n                  <h2 class=\"appo-unit\">Хірург: {{appointment.surgeon}}</h2>\r\n               </v-card-text>\r\n\r\n            </v-card>\r\n         </div>\r\n      </section>\r\n   </v-layout>\r\n</main>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n   name: 'list',\r\n   computed: {\r\n      appointments() {\r\n         return this.$store.getters.sortedAppointments\r\n      },\r\n      featuredAppointments() {\r\n         return this.$store.getters.featuredAppointments\r\n      },\r\n      dublicateAppointementsByInitials(){\r\n         \r\n      },\r\n      sorted2020appointments(){\r\n         return this.$store.getters.sorted2020appointments \r\n      },\r\n      sorted2021appointments(){\r\n         return this.$store.getters.sorted2021appointments\r\n      },\r\n      currentUser(){\r\n         return this.$store.getters.currentUser\r\n      },\r\n      isSuperAdmin(){\r\n         if(this.currentUser === this.$store.getters.isAdmin){\r\n                return true\r\n            } else {\r\n                return false\r\n            }\r\n      },\r\n      items() {\r\n         let retArr = [\r\n            'без фільтру',\r\n            ...this.$store.getters.items\r\n         ]\r\n         return retArr\r\n      },\r\n      allAppointments: {\r\n         get() {\r\n            if (this.isArchive != true) {\r\n               return this.$store.getters.featuredAppointments\r\n            } else {\r\n               return this.$store.getters.sortedAppointments\r\n            }\r\n         },\r\n         set() {\r\n\r\n         }\r\n\r\n      },\r\n      filteredAppointments() {\r\n         let filteredArray = []\r\n         if (this.pickedSurgeon === 'без фільтру' && this.searchName.trim() === '' && this.readyDate === null &&\r\n            this.searchOp_number.trim() === '' && this.pickedRank === 'без фільтру' &&\r\n            this.readyDateEntry === null && this.readyDateLeft === null && this.searchTitle.trim() === '' &&\r\n            this.searchOp_code.trim() === '' && this.searchComplexity.trim() === '' && this.searchNozologia.trim() === '' &&\r\n            this.pickedTimeType === 'без фільтру' && this.pickedUrgencyType === 'без фільтру' && this.pickedOperationType === 'без фільтру' &&\r\n            this.pickedAnesthesiaType === 'без фільтру' && this.pickedSpotType === 'без фільтру' && this.picekdUltimateType === 'без фільтру' &&\r\n            this.pickedAssistant === 'без фільтру' && this.pickedAnesthesiologist === 'без фільтру' && this.pickedMedsister.trim() === 'без фільтру'\r\n            && this.searchAge.trim() === '' && this.searchSicknessHistory.trim() === '' && this.searchDiagnosisUltimate.trim() === '' && this.searchComplication === 'без фільтру' &&\r\n            this.pickedComplexity === 'без фільтру') {\r\n            setTimeout(() => {\r\n               let el = document.querySelector('.unit_1')\r\n               if(el.classList.contains('unit-color')){\r\n                  el.classList.remove('unit-color')\r\n               }\r\n               document.querySelector('.unit_5').classList.remove('unit-color')\r\n               document.querySelector('.unit_14').classList.remove('unit-color')\r\n               document.querySelector('.unit_16').classList.remove('unit-color')\r\n               document.querySelector('.unit_25').classList.remove('unit-color')\r\n               document.querySelector('.unit_18').classList.remove('unit-color')\r\n               document.querySelector('.unit_2').classList.remove('unit-color') \r\n               document.querySelector('.unit_3').classList.remove('unit-color')\r\n               document.querySelector('.unit_4').classList.remove('unit-color')\r\n               document.querySelector('.unit_6').classList.remove('unit-color')\r\n               document.querySelector('.unit_7').classList.remove('unit-color')\r\n               document.querySelector('.unit_21').classList.remove('unit-color')\r\n               document.querySelector('.unit_8').classList.remove('unit-color')\r\n               document.querySelector('.unit_9').classList.remove('unit-color')\r\n               document.querySelector('.unit_11').classList.remove('unit-color')\r\n               document.querySelector('.unit_24').classList.remove('unit-color')\r\n               document.querySelector('.unit_10').classList.remove('unit-color')\r\n               document.querySelector('.unit_12').classList.remove('unit-color')\r\n               document.querySelector('.unit_13').classList.remove('unit-color')\r\n               document.querySelector('.unit_15').classList.remove('unit-color')\r\n               document.querySelector('.unit_17').classList.remove('unit-color')\r\n               document.querySelector('.unit_19').classList.remove('unit-color')\r\n               document.querySelector('.unit_20').classList.remove('unit-color')\r\n               document.querySelector('.unit_22').classList.remove('unit-color')\r\n               document.querySelector('.unit_23').classList.remove('unit-color')\r\n            }, 10)\r\n            \r\n            return this.allAppointments;\r\n         } else {\r\n            this.allAppointments.forEach(appoint => {\r\n               let el = document.querySelector('.unit_1')\r\n               if (this.pickedSurgeon !== 'без фільтру') {\r\n                  el.classList.add('unit-color')\r\n                  if (this.pickedSurgeon === appoint.surgeon) {\r\n                     filteredArray.push(appoint)\r\n                  }\r\n               } else {\r\n                  filteredArray = this.allAppointments\r\n                  el.classList.remove('unit-color')\r\n                  \r\n               \r\n               }\r\n               \r\n\r\n            })\r\n            // rank \r\n\r\n            if (this.pickedRank !== 'без фільтру') {\r\n               document.querySelector('.unit_5').classList.add('unit-color')\r\n               let RankIndexes = []\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.pickedRank !== 'без фільтру') {\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     if (this.pickedRank !== appoint.rank) {\r\n                        RankIndexes.push(index)\r\n                     }\r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return RankIndexes.indexOf(index) == -1;\r\n               })\r\n            } else {\r\n               document.querySelector('.unit_5').classList.remove('unit-color')\r\n            }\r\n            // title operation \r\n            if (this.searchTitle.trim() !== '') {\r\n               let arrOfTitleIndexes = []\r\n               document.querySelector('.unit_14').classList.add('unit-color')\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.searchTitle.trim() !== '') {\r\n\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     if (appoint.title.toLowerCase().includes(this.searchTitle.toLowerCase()) == false) {\r\n                        arrOfTitleIndexes.push(index)\r\n                     }\r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return arrOfTitleIndexes.indexOf(index) == -1;\r\n               })\r\n            } else {\r\n               document.querySelector('.unit_14').classList.remove('unit-color')\r\n            }\r\n\r\n            // Operation code \r\n\r\n            if (this.searchOp_code.trim() !== '') {\r\n               let codeIndexes = []\r\n               document.querySelector('.unit_16').classList.add('unit-color')\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.searchOp_code.trim() !== '') {\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     if (appoint.op_code.toLowerCase().includes(this.searchOp_code.toLowerCase()) == false) {\r\n                        codeIndexes.push(index)\r\n\r\n                     }\r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return codeIndexes.indexOf(index) == -1;\r\n               })\r\n            } else {\r\n               document.querySelector('.unit_16').classList.remove('unit-color')\r\n            }\r\n\r\n            // Complexity \r\n\r\n            if (this.searchComplexity.trim() !== '') {\r\n               let arrOfComplexityIndexes = []\r\n               document.querySelector('.unit_25').classList.add('unit-color')\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.searchComplexity.trim() !== '' ) {\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     if(appoint.complexity != undefined){\r\n                        if (appoint.complexity.toLowerCase().includes(this.searchComplexity.toLowerCase()) == false) {\r\n                        arrOfComplexityIndexes.push(index)\r\n                     }\r\n                     } else {\r\n                        arrOfComplexityIndexes.push(index)\r\n                        \r\n                     }\r\n                     \r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return arrOfComplexityIndexes.indexOf(index) == -1;\r\n               })\r\n            } else {\r\n               document.querySelector('.unit_25').classList.remove('unit-color')\r\n            }\r\n\r\n            // nozlogia\r\n\r\n            if (this.searchNozologia.trim() !== '') {\r\n               let arrOfNozologiaIndexes = []\r\n               document.querySelector('.unit_18').classList.add('unit-color')\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.searchNozologia.trim() !== '') {\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     if (appoint.nozologia.toLowerCase().includes(this.searchNozologia.toLowerCase()) == false) {\r\n                        arrOfNozologiaIndexes.push(index)\r\n                     }\r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return arrOfNozologiaIndexes.indexOf(index) == -1;\r\n               })\r\n            } else {\r\n               document.querySelector('.unit_18').classList.remove('unit-color')\r\n            }\r\n\r\n            // Assistant\r\n            if (this.pickedAssistant.trim() !== 'без фільтру') {\r\n               let assistantIndexes = []\r\n               document.querySelector('.unit_2').classList.add('unit-color')\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.pickedAssistant.trim() !== 'без фільтру') {\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     if (this.pickedAssistant !== appoint.assistant) {\r\n                        assistantIndexes.push(index)\r\n                     }\r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return assistantIndexes.indexOf(index) == -1;\r\n               })\r\n            } else {\r\n               document.querySelector('.unit_2').classList.remove('unit-color')\r\n            }\r\n\r\n            // Anesthesiologist\r\n            if (this.pickedAnesthesiologist.trim() !== 'без фільтру') {\r\n               let anesthesiologistIndexes = []\r\n                document.querySelector('.unit_3').classList.add('unit-color')\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.pickedAnesthesiologist.trim() !== 'без фільтру') {\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     if (this.pickedAnesthesiologist !== appoint.anesthesiologist) {\r\n                        anesthesiologistIndexes.push(index)\r\n                     }\r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return anesthesiologistIndexes.indexOf(index) == -1;\r\n               })\r\n            } else {\r\n                document.querySelector('.unit_3').classList.remove('unit-color')\r\n            }\r\n\r\n            // Medsister\r\n            if (this.pickedMedsister.trim() !== 'без фільтру') {\r\n               let medsisterIndexes = []\r\n               document.querySelector('.unit_4').classList.add('unit-color')\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.pickedMedsister.trim() !== 'без фільтру') {\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     if (this.pickedMedsister !== appoint.medsister) {\r\n                        medsisterIndexes.push(index)\r\n                     }\r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return medsisterIndexes.indexOf(index) == -1;\r\n               })\r\n            } else {\r\n               document.querySelector('.unit_4').classList.remove('unit-color')\r\n            }\r\n\r\n            // time Type \r\n\r\n            if (this.pickedTimeType !== 'без фільтру') {\r\n               let timeTypeIndexes = []\r\n               document.querySelector('.unit_6').classList.add('unit-color')\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.pickedTimeType !== 'без фільтру') {\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     if (this.pickedTimeType !== appoint.timeType) {\r\n                        timeTypeIndexes.push(index)\r\n                     }\r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return timeTypeIndexes.indexOf(index) == -1;\r\n               })\r\n            } else {\r\n               document.querySelector('.unit_6').classList.remove('unit-color')\r\n            }\r\n\r\n            // urgency type\r\n\r\n            if (this.pickedUrgencyType !== 'без фільтру') {\r\n               let urgencyTypeIndexes = []\r\n               document.querySelector('.unit_7').classList.add('unit-color')\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.pickedUrgencyType !== 'без фільтру') {\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     if (this.pickedUrgencyType !== appoint.urgencyType) {\r\n                        urgencyTypeIndexes.push(index)\r\n                     }\r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return urgencyTypeIndexes.indexOf(index) == -1;\r\n               })\r\n            } else {\r\n               document.querySelector('.unit_7').classList.remove('unit-color')\r\n            }\r\n\r\n            // operation type\r\n            if (this.pickedOperationType !== 'без фільтру') {\r\n               let operationTypeIndexes = []\r\n               document.querySelector('.unit_8').classList.add('unit-color')\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.operationType !== 'без фільтру') {\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     if (this.pickedOperationType !== appoint.operationType) {\r\n                        operationTypeIndexes.push(index)\r\n                     }\r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return operationTypeIndexes.indexOf(index) == -1;\r\n               })\r\n            } else {\r\n               document.querySelector('.unit_8').classList.remove('unit-color')\r\n            }\r\n\r\n            // anasthesia type\r\n\r\n            if (this.pickedAnesthesiaType !== 'без фільтру') {\r\n               let anesthesiaTypeIndexes = []\r\n               document.querySelector('.unit_9').classList.add('unit-color')\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.pickedAnesthesiaType !== 'без фільтру') {\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     if (this.pickedAnesthesiaType !== appoint.anesthesiaType) {\r\n                        anesthesiaTypeIndexes.push(index)\r\n                     }\r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return anesthesiaTypeIndexes.indexOf(index) == -1;\r\n               })\r\n            } else {\r\n               document.querySelector('.unit_9').classList.remove('unit-color')\r\n            }\r\n            // complication\r\n\r\n            if (this.searchComplication !== 'без фільтру') {\r\n               let complicationIndexes = []\r\n                document.querySelector('.unit_11').classList.add('unit-color')\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.searchComplication !== 'без фільтру') {\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     if (this.searchComplication !== appoint.complication) {\r\n                        complicationIndexes.push(index)\r\n                     }\r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return complicationIndexes.indexOf(index) == -1;\r\n               })\r\n               \r\n            } else {\r\n               document.querySelector('.unit_11').classList.remove('unit-color')\r\n            }\r\n            // Picked complexity\r\n            if (this.pickedComplexity !== 'без фільтру') {\r\n               let pickedComplexityIndexes = []\r\n               document.querySelector('.unit_24').classList.add('unit-color')\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.pickedComplexity !== 'без фільтру') {\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     if (this.pickedComplexity !== appoint.complexityPicked) {\r\n                        pickedComplexityIndexes.push(index)\r\n                     }\r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return pickedComplexityIndexes.indexOf(index) == -1;\r\n               })\r\n               \r\n            } else {\r\n               document.querySelector('.unit_24').classList.remove('unit-color')\r\n            }\r\n            // spot type\r\n            if (this.pickedSpotType !== 'без фільтру') {\r\n               let spotTypeIndexes = []\r\n               document.querySelector('.unit_10').classList.add('unit-color')\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.pickedSpotType !== 'без фільтру') {\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     if (this.pickedSpotType !== appoint.spotType) {\r\n                        spotTypeIndexes.push(index)\r\n                     }\r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return spotTypeIndexes.indexOf(index) == -1;\r\n               })\r\n            } else {\r\n               document.querySelector('.unit_10').classList.remove('unit-color')\r\n            }\r\n\r\n            // ultimate type\r\n            if (this.picekdUltimateType !== 'без фільтру') {\r\n               let ultimateTypeIndexes = []\r\n               document.querySelector('.unit_12').classList.add('unit-color')\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.picekdUltimateType !== 'без фільтру') {\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     if(appoint.ultimateType != undefined){\r\n                        if (this.picekdUltimateType !== appoint.ultimateType) {\r\n                        ultimateTypeIndexes.push(index)\r\n                        }\r\n                     } else {\r\n                        ultimateTypeIndexes.push(index)\r\n                     }\r\n                     \r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return ultimateTypeIndexes.indexOf(index) == -1;\r\n               })\r\n            } else {\r\n               document.querySelector('.unit_12').classList.remove('unit-color')\r\n            }\r\n\r\n            // name and lastName\r\n            if (this.searchName.trim() !== '') {\r\n               let arrOfIndexes = []\r\n               document.querySelector('.unit_13').classList.add('unit-color')\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.searchName.trim() !== '') {\r\n                     let privateName = `${appoint.user.firstName} ${appoint.user.lastName}`\r\n\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     if (privateName.toLowerCase().includes(this.searchName.toLowerCase()) == false) {\r\n                        arrOfIndexes.push(index)\r\n\r\n                     }\r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return arrOfIndexes.indexOf(index) == -1;\r\n               })\r\n            } else {\r\n               document.querySelector('.unit_13').classList.remove('unit-color')\r\n            }\r\n            // age \r\n            if (this.searchAge.trim() !== '') {\r\n               let arrOfAgeIndexes = []\r\n               document.querySelector('.unit_15').classList.add('unit-color')\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.searchAge.trim() !== '') {\r\n\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     if (appoint.age.toString().toLowerCase().includes(this.searchAge.toLowerCase()) == false) {\r\n                        arrOfAgeIndexes.push(index)\r\n\r\n                     }\r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return arrOfAgeIndexes.indexOf(index) == -1;\r\n               })\r\n            } else {\r\n               document.querySelector('.unit_15').classList.remove('unit-color')\r\n            }\r\n            // op_number\r\n            // if (this.searchOp_number.trim() !== '') {\r\n            //    let op_numberArray = []\r\n            //    document.querySelector('.unit_17').classList.add('unit-color')\r\n            //    filteredArray.forEach(appoint => {\r\n            //       if (this.searchOp_number.trim() !== '') {\r\n            //          let index = filteredArray.indexOf(appoint)\r\n            //          if(appoint.op_number_of_counter != undefined){\r\n            //             if (appoint.op_number_of_counter.toString().toLowerCase().includes(this.searchOp_number.toLowerCase()) == false) {\r\n            //             op_numberArray.push(index)\r\n            //          } \r\n            //          } else {\r\n            //             console.log(appoint.op_number)\r\n            //             console.log('pushed')\r\n            //             op_numberArray.push(index)\r\n            //          }\r\n                     \r\n            //       }\r\n            //    })\r\n            //    filteredArray = filteredArray.filter(function (value, index) {\r\n            //       return op_numberArray.indexOf(index) == -1;\r\n            //    })\r\n            // } else {\r\n            //    document.querySelector('.unit_17').classList.remove('unit-color')\r\n            // }\r\n\r\n            // op_numberV2\r\n\r\n            if (this.searchOp_number.trim() !== '') {\r\n               let op_numberArray = []\r\n               document.querySelector('.unit_17').classList.add('unit-color')\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.searchOp_number.trim() !== '') {\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     if(appoint.op_numbertest1 != undefined){\r\n                        if (appoint.op_numbertest1.toString().toLowerCase() != this.searchOp_number.toLowerCase()) {\r\n                        op_numberArray.push(index)\r\n                        \r\n                     } \r\n                     } else {\r\n                        console.log(appoint.op_number)\r\n                        console.log('pushed')\r\n                        op_numberArray.push(index)\r\n                     }\r\n                     \r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return op_numberArray.indexOf(index) == -1;\r\n               })\r\n            } else {\r\n               document.querySelector('.unit_17').classList.remove('unit-color')\r\n            }\r\n\r\n            // sickness history\r\n            if (this.searchSicknessHistory.trim() !== '') {\r\n               let sickArray = []\r\n               document.querySelector('.unit_19').classList.add('unit-color')\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.searchSicknessHistory.trim() !== '') {\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     if (appoint.sicknessHistory.toLowerCase().includes(this.searchSicknessHistory.toLowerCase()) == false) {\r\n                        sickArray.push(index)\r\n\r\n                     }\r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return sickArray.indexOf(index) == -1;\r\n               })\r\n            } else {\r\n               document.querySelector('.unit_19').classList.remove('unit-color')\r\n            }\r\n            // ultimate diagnosis\r\n            if (this.searchDiagnosisUltimate.trim() !== '') {\r\n               let diagArray = []\r\n               document.querySelector('.unit_20').classList.add('unit-color')\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.searchDiagnosisUltimate.trim() !== '') {\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     if(appoint.diagnosisUltimate != undefined){\r\n                        if (appoint.diagnosisUltimate.toLowerCase().includes(this.searchDiagnosisUltimate.toLowerCase()) == false) {\r\n                        diagArray.push(index)\r\n                     } \r\n                     } else {\r\n                        diagArray.push(index)\r\n                     }\r\n                     \r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return diagArray.indexOf(index) == -1;\r\n               })\r\n            } else {\r\n               document.querySelector('.unit_20').classList.remove('unit-color')\r\n            }\r\n\r\n            // Operation Date\r\n            if (this.readyDate !== null) {\r\n               let arrayOfNextIndexes = []\r\n               if(this.isTimePickerWasOpened){\r\n                  document.querySelector('.unit_21').classList.add('unit-color')\r\n               }\r\n               \r\n\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.readyDate !== null) {\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     let newDate1\r\n                     let newDate2\r\n\r\n                     if (this.readyDate.length < 3 && this.readyDate[0].toString().substr(0, 15) != this.readyDate[1].toString().substr(0, 15)) {\r\n                        const date1 = new Date(this.readyDate[0])\r\n                        const date2 = new Date(this.readyDate[1])\r\n                        if(date1 < date2){\r\n                           newDate1 = date1\r\n                           newDate2 = date2\r\n                        } else {\r\n                           newDate1 = date2\r\n                           newDate2 = date1\r\n                        }\r\n\r\n                        if (appoint.date.toDate() < newDate1 || appoint.date.toDate() > newDate2) {\r\n                           if(appoint.date.toDate().toString().substr(0, 15) !== newDate1.toString().substr(0, 15)){\r\n                              arrayOfNextIndexes.push(index)\r\n                           }     \r\n                        }\r\n                     } else if(this.readyDate[1] == undefined){\r\n                        if (appoint.date.toDate().toString().substr(0, 15) != this.readyDate.toString().substr(0, 15)) {\r\n                           arrayOfNextIndexes.push(index)\r\n                        }\r\n                     } else {\r\n                        if (appoint.date.toDate().toString().substr(0, 15) != this.readyDate[0].toString().substr(0, 15)) {\r\n                           arrayOfNextIndexes.push(index)\r\n                     } \r\n                     }\r\n\r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return arrayOfNextIndexes.indexOf(index) == -1;\r\n               })\r\n            } else {\r\n               document.querySelector('.unit_21').classList.remove('unit-color')\r\n            }\r\n\r\n            // Date Entry\r\n\r\n            if (this.readyDateEntry !== null) {\r\n               let arrayOfDateEntryIndexes = []\r\n               document.querySelector('.unit_22').classList.add('unit-color')\r\n               filteredArray.forEach(appoint => {\r\n                  if (this.readyDateEntry !== null) {\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     let newDate1\r\n                     let newDate2\r\n                     if (this.readyDateEntry.length < 3 && this.readyDateEntry[0].toString().substr(0, 15) != this.readyDateEntry[1].toString().substr(0, 15)) {\r\n\r\n                        const date1 = new Date(this.readyDateEntry[0])\r\n                        const date2 = new Date(this.readyDateEntry[1])\r\n                        if(date1 < date2){\r\n                           newDate1 = date1\r\n                           newDate2 = date2\r\n                        } else {\r\n                           newDate1 = date2\r\n                           newDate2 = date1\r\n                        }\r\n                        if (appoint.dateEntry.toDate() < newDate1 || appoint.dateEntry.toDate() > newDate2) {\r\n                           if(appoint.dateEntry.toDate().toString().substr(0, 15) !== newDate1.toString().substr(0, 15)){\r\n                              arrayOfDateEntryIndexes.push(index)\r\n                           }     \r\n                           \r\n                        }\r\n                     } else if(this.readyDateEntry[1] == undefined){\r\n                        if (appoint.dateEntry.toDate().toString().substr(0, 15) != this.readyDateEntry.toString().substr(0, 15)) {\r\n                           arrayOfDateEntryIndexes.push(index)\r\n                     } \r\n                     } else {\r\n                        if (appoint.dateEntry.toDate().toString().substr(0, 15) != this.readyDateEntry[0].toString().substr(0, 15)) {\r\n                           arrayOfDateEntryIndexes.push(index)\r\n                     } \r\n                     }\r\n                        \r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  \r\n                  return arrayOfDateEntryIndexes.indexOf(index) == -1;\r\n               })\r\n            } else {\r\n               document.querySelector('.unit_22').classList.remove('unit-color')\r\n            }\r\n\r\n            // date left\r\n            if (this.readyDateLeft !== null) {\r\n               let arrayOfDateLeftIndexes = []\r\n               document.querySelector('.unit_23').classList.add('unit-color')\r\n\r\n               filteredArray.forEach(appoint => {\r\n                  \r\n                  if (this.readyDateLeft !== null || appoint.dateLeft != undefined) {\r\n                     let index = filteredArray.indexOf(appoint)\r\n                     let newDate1\r\n                     let newDate2\r\n                     if (this.readyDateLeft.length < 3 && this.readyDateLeft[0].toString().substr(0, 15) != this.readyDateLeft[1].toString().substr(0, 15)) {\r\n                        const date1 = new Date(this.readyDateLeft[0])\r\n                        const date2 = new Date(this.readyDateLeft[1])\r\n\r\n                        if(date1 < date2){\r\n                           newDate1 = date1\r\n                           newDate2 = date2\r\n                           \r\n                  \r\n                        } else {\r\n                           newDate1 = date2\r\n                           newDate2 = date1\r\n                        }\r\n                        if (appoint.dateLeft.toDate() < newDate1 || appoint.dateLeft.toDate() > newDate2) {\r\n                           if(appoint.dateLeft.toDate().toString().substr(0, 15) !== newDate1.toString().substr(0, 15)){\r\n                              arrayOfDateLeftIndexes.push(index)\r\n                           }\r\n                           \r\n                        }\r\n                     } else if(this.readyDateLeft[1] == undefined){\r\n                        if (appoint.dateLeft.toDate().toString().substr(0, 15) != this.readyDateLeft.toString().substr(0, 15)) {\r\n                           arrayOfDateLeftIndexes.push(index)\r\n                           \r\n                        }\r\n                     } else{\r\n                        if (appoint.dateLeft.toDate().toString().substr(0, 15) != this.readyDateLeft[0].toString().substr(0, 15)) {\r\n                           arrayOfDateLeftIndexes.push(index)\r\n                     } \r\n                     }\r\n\r\n                  } else if(appoint.dateLeft == undefined){\r\n                     let index = filteredArray.indexOf(appoint)\r\n                      arrayOfDateLeftIndexes.push(index)\r\n                  }\r\n               })\r\n               filteredArray = filteredArray.filter(function (value, index) {\r\n                  return arrayOfDateLeftIndexes.indexOf(index) == -1;\r\n               })\r\n            } else {\r\n               document.querySelector('.unit_23').classList.remove('unit-color')\r\n            }\r\n\r\n            return filteredArray\r\n         \r\n\r\n      }\r\n      },\r\n      rankItems() {\r\n         let retArr = [\r\n            'без фільтру',\r\n            ...this.$store.getters.rankItems\r\n         ]\r\n         return retArr\r\n      },\r\n      timeTypeItems() {\r\n         let retArr = [\r\n            'без фільтру',\r\n            ...this.$store.getters.timeTypeItems\r\n         ]\r\n         return retArr\r\n      },\r\n      urgencyTypeItems() {\r\n         let retArr = [\r\n            'без фільтру',\r\n            ...this.$store.getters.urgencyTypeItems\r\n         ]\r\n         return retArr\r\n      },\r\n      operationTypeItems() {\r\n         let retArr = [\r\n            'без фільтру',\r\n            ...this.$store.getters.operationTypeItems\r\n         ]\r\n         return retArr\r\n      },\r\n      anesthesiaTypeItems() {\r\n         let retArr = [\r\n            'без фільтру',\r\n            ...this.$store.getters.anesthesiaTypeItems\r\n         ]\r\n         return retArr\r\n      },\r\n      spotTypeItems() {\r\n         let retArr = [\r\n            'без фільтру',\r\n            ...this.$store.getters.spotTypeItems\r\n         ]\r\n         return retArr\r\n      },\r\n      ultimateTypeItems() {\r\n         let retArr = [\r\n            'без фільтру',\r\n            ...this.$store.getters.ultimateTypeItems\r\n         ]\r\n         return retArr\r\n      },\r\n      anesthesiologistItems() {\r\n         let retArr = [\r\n            'без фільтру',\r\n            ...this.$store.getters.anesthesiologistItems\r\n         ]\r\n         return retArr\r\n      },\r\n      medsisterItems() {\r\n         let retArr = [\r\n            'без фільтру',\r\n            ...this.$store.getters.medsisterItems\r\n         ]\r\n         return retArr\r\n      },\r\n      complicationItems(){\r\n         let retArr = [\r\n            'без фільтру',\r\n            ...this.$store.getters.complication\r\n         ]\r\n         return retArr\r\n      },\r\n      pickedComplexityItems(){\r\n         let retArr = [\r\n            'без фільтру',\r\n            ...this.$store.getters.complexityItems\r\n         ]\r\n         return retArr\r\n      }\r\n\r\n   },\r\n   methods: {\r\n      dateChange(){\r\n         this.isTimePickerWasOpened = true\r\n      },\r\n      chooseOpYear(event, year, isTarget){\r\n         let target\r\n         const startDate = new Date(year, 0, 1)\r\n         const endDate = new Date(year + 1, 0, 1)\r\n         const startDateForPicker = new Date(year, 0, 2)\r\n         const endDateForPicker = new Date(year + 1, 0, 2)\r\n         if(isTarget == true){\r\n            target = event;\r\n         } else {\r\n            target = event.target;\r\n         }\r\n         \r\n         this.pickedDate = []\r\n         this.readyDate = []\r\n         this.readyDate.push(startDate, endDate)\r\n         this.pickedDate.push(startDateForPicker.toISOString().substr(0, 10))\r\n         this.pickedDate.push(endDateForPicker.toISOString().substr(0, 10))\r\n         \r\n         this.clearClassesOfChosenYear(target)\r\n         this.isTimePickerWasOpened = false\r\n      },\r\n      zvitFilter(){\r\n         let operationsToFilter = this.filteredAppointments.forEach(operation => {\r\n            if(this.operationPatients.includes(`${operation.user.firstName.toLowerCase().trim().replace(/ +/g, \"\")}${operation.user.lastName.toLowerCase().trim().replace(/ +/g, \"\")}`) == false){\r\n               this.operationPatients.push('1')\r\n            }\r\n            if(operation.complication === 'Більшої'){\r\n               this.operationsHarder.push('1')\r\n            }  else {\r\n               this.operationsEasier.push('2')\r\n            }\r\n            if(operation.operationType === 'Відкрита'){\r\n               this.operationsOpen.push('1')\r\n            } else  if(operation.operationType === 'Ендоскопічна') {\r\n               this.operationsEndo.push('2')\r\n            } else if(operation.operationType === 'Лапараскопічна'){\r\n               this.operationsLapo.push('4')\r\n            } else if(operation.operationType === 'Малоінвазивна'){\r\n               this.operationsMalo.push('3') \r\n               }\r\n             \r\n         })\r\n\r\n         // Сomplexity\r\n\r\n      },\r\n      clearDialog(){\r\n         this.operationsHarder = []\r\n         this.operationsEasier = []\r\n         this.operationsOpen = []\r\n         this.operationsEndo = []\r\n         this.operationsMalo = []\r\n         this.operationsLapo = []\r\n         this.operationPatients = []\r\n\r\n      },\r\n      clearClassesOfZvit(target){\r\n\r\n         let buttons = document.querySelectorAll('.info__button')\r\n         buttons.forEach(button => {\r\n            if(button.classList.contains('clicked-zvit')){\r\n               button.classList.toggle('clicked-zvit')\r\n            }\r\n         })\r\n         if(target == false){\r\n            return\r\n         }\r\n         if(target.nodeName !== 'SPAN'){\r\n            target.classList.add('clicked-zvit')\r\n            \r\n         } else {\r\n            target.parentElement.classList.add('clicked-zvit')\r\n         }\r\n      },\r\n      clearClassesOfChosenYear(target){\r\n\r\n         let buttons = document.querySelectorAll('.yearChoose_button')\r\n         buttons.forEach(button => {\r\n            if(button.classList.contains('clicked-zvit')){\r\n               button.classList.remove('clicked-zvit')}\r\n            }\r\n         )\r\n         if(target.classList.contains('yearChoose_button')){\r\n            \r\n               target.classList.add('clicked-zvit')\r\n         }\r\n         if(target.parentElement.classList.contains('yearChoose_button')) {\r\n               target.parentElement.classList.add('clicked-zvit')\r\n         }\r\n         setTimeout(() => {\r\n           document.querySelector('.unit_21').classList.remove('unit-color')\r\n         }, 100) \r\n         if(target == false){\r\n            return\r\n         }\r\n      },\r\n      weekZvit(e){\r\n         this.zvitTimes = true\r\n         // new week zvit\r\n         this.readyDate = []\r\n         this.pickedDate = []\r\n         let dayOfWeek = 5\r\n         let originDate = new Date()\r\n         // originDate.setDate(10)\r\n         originDate.setHours(23)\r\n         originDate.setMinutes(59)\r\n         originDate.setSeconds(59)\r\n         let resultDate = new Date(originDate.getTime())\r\n         resultDate.setDate(originDate.getDate() + (7 + dayOfWeek - originDate.getDay()) % 7)\r\n         if(originDate.getDay() !== dayOfWeek){\r\n            resultDate.setDate(resultDate.getDate() - 7)\r\n         }\r\n         let firstDate = new Date(resultDate)\r\n         firstDate.setDate(resultDate.getDate() - 7)\r\n         firstDate.setHours(0)\r\n         firstDate.setMinutes(0)\r\n         firstDate.setSeconds(0)\r\n         let secondDate = new Date(resultDate)\r\n         secondDate.setDate(resultDate.getDate() - 1)\r\n         this.readyDate.push(firstDate, secondDate)\r\n         firstDate.setHours(3)\r\n         secondDate.setHours(26)\r\n         this.pickedDate.push(firstDate.toISOString().substr(0, 10))\r\n         this.pickedDate.push(secondDate.toISOString().substr(0, 10))\r\n         console.log(this.readyDate)\r\n         console.log(this.pickedDate)\r\n         this.clearClassesOfZvit(e.target)\r\n         setTimeout(() => {\r\n            this.zvitTimes = false\r\n         }, 150)\r\n         \r\n         this.$refs.menu.save(this.pickedDate);\r\n      },\r\n      monthZvit(e){\r\n         this.zvitTimes = true\r\n         let currentDate\r\n         if(this.pickedDate.length > 1){\r\n            currentDate = new Date(this.pickedDate[1])\r\n         } else {\r\n            currentDate = new Date(this.pickedDate)\r\n         }\r\n         \r\n         const currentMonth = currentDate.getMonth() - 1\r\n         const currentYear = currentDate.getFullYear()\r\n         if(currentMonth < 0){\r\n            currentDate.setMonth(11)\r\n            currentDate.setFullYear(currentYear - 1)\r\n         } else {\r\n            currentDate.setMonth(currentMonth + 1)\r\n         } \r\n         currentDate.setDate(1)\r\n         let firstDate = new Date(currentDate)\r\n         if(currentMonth < 0){\r\n           firstDate.setMonth(11)\r\n         } else {\r\n            firstDate.setMonth(currentMonth)\r\n         } \r\n         // firstDate.setMonth(currentMonth)\r\n         firstDate.setHours(0)\r\n         firstDate.setMinutes(0)\r\n         firstDate.setSeconds(0)\r\n         let secondDate = new Date(currentDate)\r\n         if(currentMonth < 0){\r\n            secondDate.setMonth(0)\r\n            secondDate.setFullYear(currentYear)\r\n         }\r\n         secondDate.setDate(secondDate.getDate() - 1)\r\n         secondDate.setHours(23)\r\n         secondDate.setMinutes(59)\r\n         secondDate.setSeconds(59)\r\n         this.readyDate = []\r\n         this.readyDate.push(firstDate, secondDate)\r\n         this.pickedDate = []\r\n         let dateForPickedFirstDate = new Date(firstDate)\r\n         let pickedDay = dateForPickedFirstDate.getDate()\r\n         dateForPickedFirstDate.setDate(pickedDay + 1)\r\n         this.pickedDate.push(dateForPickedFirstDate.toISOString().substr(0, 10))\r\n         // this.pickedDate.push(firstDate.toISOString().substr(0, 10))\r\n         this.pickedDate.push(secondDate.toISOString().substr(0, 10))\r\n         setTimeout(() => {\r\n            this.zvitTimes = false\r\n         }, 150)\r\n         this.clearClassesOfZvit(e.target)\r\n      },\r\n      kvartalZvit(event, fMonth, sMonth, isFourKvartal){\r\n         this.zvitTimes = true\r\n         this.pickedDate = []\r\n         this.readyDate = []\r\n         let firstDate = new Date()\r\n         firstDate.setMonth(fMonth)\r\n         firstDate.setDate(1)\r\n         firstDate.setHours(0)\r\n         firstDate.setMinutes(0)\r\n         firstDate.setSeconds(0)\r\n         let secondProtoDate = new Date()\r\n         if(isFourKvartal){\r\n            let fullYear = secondProtoDate.getFullYear()\r\n            secondProtoDate.setFullYear(fullYear + 1)\r\n         }\r\n         secondProtoDate.setMonth(sMonth)\r\n         secondProtoDate.setDate(1)\r\n         secondProtoDate.setHours(23)\r\n         secondProtoDate.setMinutes(59)\r\n         secondProtoDate.setSeconds(59)\r\n         let secondDate = new Date(secondProtoDate)\r\n         let secondProtoDay = secondProtoDate.getDate() - 1\r\n         secondDate.setDate(secondProtoDay)\r\n         this.readyDate.push(firstDate, secondDate)\r\n         let dateForPickedFirstDate = new Date(firstDate)\r\n         let pickedDay = dateForPickedFirstDate.getDate()\r\n         dateForPickedFirstDate.setDate(pickedDay + 1)\r\n         this.pickedDate.push(dateForPickedFirstDate.toISOString().substr(0, 10))\r\n         this.pickedDate.push(secondDate.toISOString().substr(0, 10))\r\n         setTimeout(() => {\r\n            this.zvitTimes = false\r\n         }, 150)\r\n         this.clearClassesOfZvit(event.target)\r\n      },\r\n      halfYearZvit(event, fMonth, sMonth, isSecondHalf){\r\n         this.zvitTimes = true\r\n         this.pickedDate = []\r\n         this.readyDate = []\r\n         let firstDate = new Date()\r\n         firstDate.setMonth(fMonth)\r\n         firstDate.setDate(1)\r\n         firstDate.setHours(0)\r\n         firstDate.setMinutes(0)\r\n         firstDate.setSeconds(0)\r\n         let secondProtoDate = new Date()\r\n         if(isSecondHalf){\r\n            let fullYear = secondProtoDate.getFullYear()\r\n            secondProtoDate.setFullYear(fullYear + 1)\r\n         }\r\n         secondProtoDate.setMonth(sMonth)\r\n         secondProtoDate.setDate(1)\r\n         secondProtoDate.setHours(23)\r\n         secondProtoDate.setMinutes(59)\r\n         secondProtoDate.setSeconds(59)\r\n         let secondDate = new Date(secondProtoDate)\r\n         let secondProtoDay = secondProtoDate.getDate() - 1\r\n         secondDate.setDate(secondProtoDay)\r\n         this.readyDate.push(firstDate, secondDate)\r\n         let dateForPickedFirstDate = new Date(firstDate)\r\n         let pickedDay = dateForPickedFirstDate.getDate()\r\n         dateForPickedFirstDate.setDate(pickedDay + 1)\r\n         this.pickedDate.push(dateForPickedFirstDate.toISOString().substr(0, 10))\r\n         this.pickedDate.push(secondDate.toISOString().substr(0, 10))\r\n         setTimeout(() => {\r\n            this.zvitTimes = false\r\n         }, 150)\r\n         this.clearClassesOfZvit(event.target)\r\n      },\r\n      onOpenSingle(id) {\r\n         this.$router.push('/appointment/' + id)\r\n      },\r\n      onOpenSingleRelease(id) {\r\n         this.$router.push('/appointmentRelease/' + id)\r\n      },\r\n      onResetDate(){\r\n         this.readyDate = null\r\n         this.editDialog = false\r\n         this.pickedDate = [new Date().toISOString().substr(0, 10)]\r\n      },\r\n      onResetEntry(){\r\n         this.readyDateEntry = null\r\n         this.editDialog1 = false\r\n         this.pickedDateEntry = [new Date().toISOString().substr(0, 10)]\r\n      },\r\n      onResetLeft(){\r\n         this.readyDateLeft = null\r\n         this.editDialog2 = false\r\n         this.pickedDateLeft = [new Date().toISOString().substr(0, 10)]\r\n      },\r\n      sumOfBeforeBeds() {\r\n         let sumOfBeds = 0\r\n         this.filteredAppointments.forEach(appoint => {\r\n            let numberOfTime = appoint.date.toDate().getTime() - appoint.dateEntry.toDate().getTime()\r\n            numberOfTime = numberOfTime / (1000 * 3600 * 24)   \r\n            sumOfBeds += parseInt(numberOfTime, 10)\r\n         })\r\n         this.showSum = sumOfBeds\r\n      },\r\n      sumOfAfterBeds() {\r\n         let sumOfAfterBeds = 0\r\n         let newFilteredAppointments = this.filteredAppointments.filter(appoint => {\r\n            return appoint.dateLeft !== ''\r\n         })\r\n         newFilteredAppointments.forEach(appoint => {\r\n            let numberOfTime = appoint.dateLeft.toDate().getTime() - appoint.date.toDate().getTime()\r\n            numberOfTime = numberOfTime / (1000 * 3600 * 24)\r\n            sumOfAfterBeds += parseInt(numberOfTime, 10)\r\n         })\r\n         this.showSumAfter = sumOfAfterBeds\r\n      },\r\n      onArchive() {\r\n         this.isArchive = !this.isArchive\r\n      },\r\n      onClose() {\r\n         if (this.editDialog) {\r\n            this.pickedDate = [new Date().toISOString().substr(0, 10)]\r\n            this.editDialog = false\r\n         } else if (this.editDialog1) {\r\n            this.pickedDateEntry = [new Date().toISOString().substr(0, 10)]\r\n            this.editDialog1 = false\r\n         } else if (this.editDialog2) {\r\n            this.pickedDateLeft = [new Date().toISOString().substr(0, 10)]\r\n            this.editDialog2 = false\r\n         }\r\n      },\r\n      clearDate() {\r\n         this.readyDate = null\r\n         this.pickedDate = new Date().toISOString().substr(0, 10)\r\n      },\r\n      onSaveChanges() {\r\n         if (this.pickedDate !== null) {\r\n            if (this.pickedDate.length > 1) {\r\n               this.readyDate = []\r\n               const newDate1 = new Date(new Date())\r\n               const newDay1 = new Date(this.pickedDate[0]).getUTCDate()\r\n               const newMonth1 = new Date(this.pickedDate[0]).getUTCMonth()\r\n               const newYear1 = new Date(this.pickedDate[0]).getUTCFullYear()\r\n               newDate1.setUTCFullYear(newYear1)\r\n               newDate1.setUTCMonth(newMonth1)\r\n               newDate1.setUTCDate(newDay1)\r\n               newDate1.setUTCHours(-3)\r\n               newDate1.setUTCMinutes(0)\r\n               newDate1.setUTCSeconds(0)\r\n               const newDate2 = new Date(new Date())\r\n               const newDay2 = new Date(this.pickedDate[1]).getUTCDate()\r\n               const newMonth2 = new Date(this.pickedDate[1]).getUTCMonth()\r\n               const newYear2 = new Date(this.pickedDate[1]).getUTCFullYear()\r\n               newDate2.setUTCFullYear(newYear2)\r\n               newDate2.setUTCMonth(newMonth2)\r\n               newDate2.setUTCDate(newDay2)\r\n               newDate2.setUTCHours(20)\r\n               newDate2.setUTCMinutes(59)\r\n               newDate2.setUTCSeconds(59)\r\n               this.readyDate.push(newDate1, newDate2)\r\n               // console.log(this.readyDate)\r\n            } else {\r\n               const newDate = new Date(new Date())\r\n               const newDay = new Date(this.pickedDate).getUTCDate()\r\n               const newMonth = new Date(this.pickedDate).getUTCMonth()\r\n               const newYear = new Date(this.pickedDate).getUTCFullYear()\r\n               newDate.setUTCFullYear(newYear)\r\n               newDate.setUTCMonth(newMonth)\r\n               newDate.setUTCDate(newDay)\r\n               // const newIsoDate = this.pickedDate.toString().substr(8,10)\r\n               // const newDate = new Date(new Date())\r\n               // console.log(newIsoDate)\r\n               // console.log(newDate)\r\n               // // const newDay = new Date(this.pickedDate).getDate()\r\n               // const newMonth = new Date(this.pickedDate).getMonth()\r\n               // const newYear = new Date(this.pickedDate).getFullYear()\r\n               // newDate.setFullYear(newYear)\r\n               // newDate.setMonth(newMonth)\r\n               // newDate.setDate(newIsoDate)\r\n               \r\n               this.readyDate = newDate\r\n               // console.log(this.readyDate.toISOString().substr(0,10))\r\n               // console.log(this.readyDate.toString().substr(0, 15))\r\n            }\r\n         }\r\n\r\n      },\r\n      onSaveChangesEntry() {\r\n         if (this.pickedDateEntry !== null) {\r\n            if (this.pickedDateEntry.length > 1) {\r\n               this.readyDateEntry = []\r\n               const newDate1 = new Date(new Date())\r\n               const newDay1 = new Date(this.pickedDateEntry[0]).getUTCDate()\r\n               const newMonth1 = new Date(this.pickedDateEntry[0]).getUTCMonth()\r\n               const newYear1 = new Date(this.pickedDateEntry[0]).getUTCFullYear()\r\n               newDate1.setUTCFullYear(newYear1)\r\n               newDate1.setUTCMonth(newMonth1)\r\n               newDate1.setUTCDate(newDay1)\r\n               newDate1.setUTCHours(-3)\r\n               newDate1.setUTCMinutes(0)\r\n               newDate1.setUTCSeconds(0)\r\n               const newDate2 = new Date(new Date())\r\n               const newDay2 = new Date(this.pickedDateEntry[1]).getUTCDate()\r\n               const newMonth2 = new Date(this.pickedDateEntry[1]).getUTCMonth()\r\n               const newYear2 = new Date(this.pickedDateEntry[1]).getUTCFullYear()\r\n               newDate2.setUTCFullYear(newYear2)\r\n               newDate2.setUTCMonth(newMonth2)\r\n               newDate2.setUTCDate(newDay2)\r\n               \r\n               \r\n               newDate2.setUTCHours(20)\r\n               newDate2.setUTCMinutes(59)\r\n               newDate2.setUTCSeconds(59)\r\n               console.log(newDate1)\r\n               console.log(newDate2)\r\n               this.readyDateEntry.push(newDate1, newDate2)\r\n               // console.log(this.readyDate)\r\n            } else {\r\n               console.log(this.pickedDateEntry)\r\n               const newDate = new Date(new Date())\r\n               const newDay = new Date(this.pickedDateEntry).getUTCDate()\r\n               const newMonth = new Date(this.pickedDateEntry).getUTCMonth()\r\n               const newYear = new Date(this.pickedDateEntry).getUTCFullYear()\r\n               newDate.setUTCFullYear(newYear)\r\n               newDate.setUTCMonth(newMonth)\r\n               newDate.setUTCDate(newDay)\r\n               \r\n               \r\n               this.readyDateEntry = newDate\r\n               console.log(this.readyDateEntry)\r\n               // console.log(this.readyDate.toISOString().substr(0,10))\r\n               // console.log(this.readyDate.toString().substr(0, 15))\r\n            }\r\n         }\r\n\r\n      },\r\n      onSaveChangesLeft() {\r\n         if (this.pickedDateLeft !== null) {\r\n            if (this.pickedDateLeft.length > 1) {\r\n               this.readyDateLeft = []\r\n               const newDate1 = new Date(new Date())\r\n               const newDay1 = new Date(this.pickedDateLeft[0]).getUTCDate()\r\n               const newMonth1 = new Date(this.pickedDateLeft[0]).getUTCMonth()\r\n               const newYear1 = new Date(this.pickedDateLeft[0]).getUTCFullYear()\r\n               newDate1.setUTCFullYear(newYear1)\r\n               newDate1.setUTCMonth(newMonth1)\r\n               newDate1.setUTCDate(newDay1)\r\n               \r\n               newDate1.setUTCHours(-3)\r\n               newDate1.setUTCMinutes(0)\r\n               newDate1.setUTCSeconds(0)\r\n               const newDate2 = new Date(new Date())\r\n               const newDay2 = new Date(this.pickedDateLeft[1]).getUTCDate()\r\n               const newMonth2 = new Date(this.pickedDateLeft[1]).getUTCMonth()\r\n               const newYear2 = new Date(this.pickedDateLeft[1]).getUTCFullYear()\r\n               newDate2.setUTCFullYear(newYear2)\r\n               newDate2.setUTCMonth(newMonth2)\r\n               newDate2.setUTCDate(newDay2)\r\n               \r\n               newDate2.setUTCHours(20)\r\n               newDate2.setUTCMinutes(59)\r\n               newDate2.setUTCSeconds(59)\r\n               console.log(newDate1)\r\n               console.log(newDate2)\r\n               this.readyDateLeft.push(newDate1, newDate2)\r\n               // console.log(this.readyDate)\r\n            } else {\r\n               console.log(this.pickedDateLeft)\r\n               const newDate = new Date(new Date())\r\n               const newDay = new Date(this.pickedDateLeft).getUTCDate()\r\n               const newMonth = new Date(this.pickedDateLeft).getUTCMonth()\r\n               const newYear = new Date(this.pickedDateLeft).getUTCFullYear()\r\n               newDate.setUTCFullYear(newYear)\r\n               newDate.setUTCMonth(newMonth)\r\n               newDate.setUTCDate(newDay)\r\n               this.readyDateLeft = newDate\r\n               console.log(this.readyDateLeft)\r\n               // console.log(this.readyDate.toISOString().substr(0,10))\r\n               // console.log(this.readyDate.toString().substr(0, 15))\r\n            }\r\n         }\r\n\r\n      },\r\n      updateSortedAppointments2020(){\r\n         this.sorted2020appointments.forEach(appoint => {\r\n            const indexPos = this.sorted2020appointments.indexOf(appoint) + 1\r\n            // console.log(appoint.id)\r\n            // console.log(indexPos)\r\n            this.$store.dispatch('updateDocOpNumber', {\r\n               id: appoint.id,\r\n               indexPos: indexPos\r\n            })\r\n         })\r\n      },\r\n      updateSortedAppointments2021(){\r\n         this.sorted2021appointments.forEach(appoint => {\r\n            const indexPos = this.sorted2021appointments.indexOf(appoint) + 1\r\n            // console.log(appoint.id)\r\n            // console.log(indexPos)\r\n            this.$store.dispatch('updateDocOpNumber', {\r\n               id: appoint.id,\r\n               indexPos: indexPos\r\n            })\r\n         })\r\n      },\r\n      closeFilter() {\r\n         this.isFilter = !this.isFilter\r\n         if(this.isTimePickerWasOpened){\r\n            this.readyDate = null\r\n            this.pickedDate = [new Date().toISOString().substr(0, 10)]\r\n         }\r\n         this.readyDateEntry = null\r\n         this.pickedDateEntry = [new Date().toISOString().substr(0, 10)]\r\n         this.readyDateLeft = null\r\n         this.pickedDateLeft = [new Date().toISOString().substr(0, 10)]\r\n         this.searchName = ''\r\n         this.searchTitle = ''\r\n         this.pickedSurgeon = 'без фільтру'\r\n         this.searchOp_number = ''\r\n         this.pickedRank = 'без фільтру'\r\n         this.showSum = 'Показати'\r\n         this.showSumAfter = 'Показати'\r\n         this.searchOp_code = ''\r\n         this.searchComplexity = ''\r\n         this.searchNozologia = ''\r\n         this.pickedTimeType = 'без фільтру'\r\n         this.pickedUrgencyType = 'без фільтру'\r\n         this.pickedOperationType = 'без фільтру'\r\n         this.pickedAnesthesiaType = 'без фільтру'\r\n         this.pickedSpotType = 'без фільтру'\r\n         this.picekdUltimateType = 'без фільтру'\r\n         this.pickedAssistant = 'без фільтру'\r\n         this.pickedAnesthesiologist = 'без фільтру'\r\n         this.pickedMedsister = 'без фільтру'\r\n         this.searchAge = ''\r\n         this.searchSicknessHistory = ''\r\n         this.searchDiagnosisUltimate = ''\r\n         this.searchComplication = 'без фільтру'\r\n         this.pickedComplexity = 'без фільтру'\r\n      },\r\n      clearFilter() {\r\n         // if(this.isTimePickerWasOpened){\r\n         //    this.readyDate = null\r\n         //    this.pickedDate = [new Date().toISOString().substr(0, 10)]\r\n         // } \r\n         if(this.isTimePickerWasOpened){\r\n            const tar = document.querySelector('#currentYearButton')\r\n            this.chooseOpYear(tar, 2021, true)\r\n            \r\n         } \r\n         \r\n         this.readyDateEntry = null\r\n         this.pickedDateEntry = [new Date().toISOString().substr(0, 10)]\r\n         this.readyDateLeft = null\r\n         this.pickedDateLeft = [new Date().toISOString().substr(0, 10)]\r\n         this.searchName = ''\r\n         this.searchTitle = ''\r\n         this.pickedSurgeon = 'без фільтру'\r\n         this.searchOp_number = ''\r\n         this.pickedRank = 'без фільтру'\r\n         this.showSum = 'Показати'\r\n         this.showSumAfter = 'Показати'\r\n         this.searchOp_code = ''\r\n         this.searchComplexity = ''\r\n         this.searchNozologia = ''\r\n         this.pickedTimeType = 'без фільтру'\r\n         this.pickedUrgencyType = 'без фільтру'\r\n         this.pickedOperationType = 'без фільтру'\r\n         this.pickedAnesthesiaType = 'без фільтру'\r\n         this.pickedSpotType = 'без фільтру'\r\n         this.picekdUltimateType = 'без фільтру'\r\n         this.pickedAssistant = 'без фільтру'\r\n         this.pickedAnesthesiologist = 'без фільтру'\r\n         this.pickedMedsister = 'без фільтру',\r\n         this.searchAge = ''\r\n         this.searchSicknessHistory = ''\r\n         this.searchDiagnosisUltimate = ''\r\n         this.searchComplication = 'без фільтру'\r\n         this.pickedComplexity = 'без фільтру'\r\n      }\r\n   },\r\n   data: () => ({\r\n      isYearFilterOpen: false,\r\n      zvitTimes: false,\r\n      isArchive: true,\r\n      showSum: 'Показати',\r\n      showSumAfter: 'Показати',\r\n      pickedSurgeon: 'без фільтру',\r\n      searchName: '',\r\n      searchTitle: '',\r\n      editDialog: false,\r\n      editDialog1: false,\r\n      editDialog2: false,\r\n      pickedDate: [new Date().toISOString().substr(0, 10)],\r\n      pickedDateEntry: [new Date().toISOString().substr(0, 10)],\r\n      pickedDateLeft: [new Date().toISOString().substr(0, 10)],\r\n      readyDate: null,\r\n      readyDateEntry: null,\r\n      readyDateLeft: null,\r\n      isFilter: true,\r\n      searchOp_number: '',\r\n      searchOp_code: '',\r\n      searchComplexity: '',\r\n      searchNozologia: '',\r\n      pickedRank: 'без фільтру',\r\n      pickedTimeType: 'без фільтру',\r\n      pickedUrgencyType: 'без фільтру',\r\n      pickedOperationType: 'без фільтру',\r\n      pickedAnesthesiaType: 'без фільтру',\r\n      pickedSpotType: 'без фільтру',\r\n      picekdUltimateType: 'без фільтру',\r\n      pickedAssistant: 'без фільтру',\r\n      pickedAnesthesiologist: 'без фільтру',\r\n      pickedMedsister: 'без фільтру',\r\n      updatedAge: false,\r\n      searchAge: '',\r\n      searchSicknessHistory: '',\r\n      searchDiagnosisUltimate: '',\r\n      searchComplication: 'без фільтру',\r\n      pickedComplexity: 'без фільтру',\r\n      dialogWeek: false,\r\n      dialogMonth: false,\r\n      dialog1kvartal: false,\r\n      dialog2kvartal: false,\r\n      dialog3kvartal: false,\r\n      dialog4kvartal: false,\r\n      dialog1half: false,\r\n      dialog2half: false,\r\n      dialogYear: false,\r\n      operationPatients: [],\r\n      operationsEasier: [],\r\n      operationsHarder: [],\r\n      operationsOpen: [],\r\n      operationsLapo: [],\r\n      operationsEndo: [],\r\n      operationsMalo: [],\r\n      isTimePickerWasOpened: false\r\n\r\n\r\n   }),\r\n   created() {\r\n      this.$store.dispatch('loadAppointments')\r\n      console.log(this.isSuperAdmin)\r\n      setTimeout(() => {\r\n         // console.log(this.sorted2021appointments)\r\n      }, 2500) \r\n      setTimeout(() => {\r\n         const tar = document.querySelector('#currentYearButton')\r\n         this.chooseOpYear(tar, 2021, true)\r\n      }, 1400)\r\n      \r\n   },\r\n   watch: {\r\n      filteredAppointments(){\r\n         this.showSum = 'Показати'\r\n         this.showSumAfter = 'Показати'\r\n      },\r\n      pickedDate(){\r\n            \r\n            if(this.zvitTimes == false){\r\n               this.clearClassesOfZvit(false)\r\n            }\r\n            \r\n         \r\n      },\r\n      readyDate(){\r\n         if(this.zvitTimes == false){\r\n            this.clearClassesOfZvit(false)\r\n         }\r\n         \r\n      }\r\n   }\r\n   // mounted() {\r\n   //    setTimeout(() => {\r\n   //       if (this.$store.state.isUpdatedAge == false) {\r\n   //          this.$store.commit('setUpdatedAge', true)\r\n   //          const date = new Date()\r\n   //          this.allAppointments.forEach(appoint => {\r\n   //             let ageNumber = Math.floor((date.getTime() - appoint.dateAge.toDate().getTime()) / (1000 * 3600 * 24 * 365))\r\n   //             this.$store.dispatch('updatePost', {\r\n   //                id: appoint.id,\r\n   //                age: ageNumber,\r\n   //                notToLoading: 'yes'\r\n   //             })\r\n   //          })\r\n   //       }\r\n   //    }, 500)\r\n   // }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.p-unit-z{\r\n    color: #000000;\r\n    display: block;\r\n    padding: 15px;\r\n    font-weight: 500;\r\n    font-size: 17px;\r\n    margin: 0px 5px!important;\r\n    margin-bottom: 7px!important;\r\n    box-shadow: 0px 0px 1px 1px rgba(0,0,0,0.26);\r\n}\r\n.p-unit-z:first-child{\r\n   margin-top: 15px!important;\r\n}\r\n.p-unit-z.p-unit-date{\r\n    text-align: center;\r\n    box-shadow: none;\r\n}\r\n.v-card-zvit{\r\n   text-align: center;\r\n   display: block;\r\n}\r\n.span-unit{\r\n    font-weight: 500;\r\n}\r\n\r\n.unit-color{\r\n   /* background-color: #1f88ff47!important; */\r\n   background-color: #05f77785!important;\r\n}\r\n.btn-archive {\r\n   text-align: center;\r\n   font-size: 18px;\r\n   margin-right: 15px;\r\n   width: 170px;\r\n   margin-top: 13px;\r\n   border-radius: 6px;\r\n   height: 48px!important;\r\n   padding: 7px!important;\r\n   margin-left: 0px!important;\r\n   margin-top: 10px!important;\r\n   margin-bottom: 0;\r\n   border-radius: 6px!important;\r\n   align-items: center;\r\n   font-weight: 400;\r\n   letter-spacing: 0.3px;\r\n   justify-content: center;\r\n   position: relative;\r\n   text-decoration: none;\r\n   text-indent: 0;\r\n   text-transform: none;\r\n}\r\n\r\n.appo-div {\r\n   margin-bottom: 8px;\r\n   margin-right: 15px;\r\n   width: 340px;\r\n}\r\n\r\n.section {\r\n   display: flex;\r\n   flex-wrap: wrap;\r\n   padding: 5px;\r\n   justify-content: flex-start;\r\n\r\n}\r\n.zvit-wrapper{\r\n   display: flex;\r\n   justify-content: center;\r\n}\r\n.btn-zvit{\r\n   display: flex;\r\n}\r\n.layoutTT{\r\n   padding: 10px;\r\n   display: flex;\r\n}\r\n.layout-unit{\r\n   padding: 7px;\r\n   padding-bottom: 0px;\r\n   margin-bottom: -8px!important;\r\n   box-shadow: 0px 0px 24px 0px rgba(0, 0, 0, 0.17);\r\n   background-color: #ffffff;\r\n   margin: 3px;\r\n   margin-bottom: -2px;\r\n   flex: 23%;\r\n}\r\n.appo-title{\r\n   color: #0D47A1;\r\n   padding: 10px;\r\n   font-weight: 700;\r\n   padding-bottom: 2px;\r\n   min-height: 100px;\r\n   margin-left: 5px;\r\n   display: block;\r\n   text-align: center;\r\n}\r\n.appo-unit{\r\n   color: #000000;\r\n   \r\n   display: block;\r\n   \r\n}\r\n.layoutsec{\r\n   justify-content: flex-start;\r\n}\r\n.info__button{\r\n   font-size: 18px;\r\n   height: 41px!important;\r\n   padding: 7px!important;\r\n   width: 315px;\r\n   margin-left: 12px;\r\n   margin-top: 3px;\r\n   margin-bottom: 0;\r\n   border-radius: 6px;\r\n   align-items: center;\r\n   font-weight: 400;\r\n   letter-spacing: 0.3px;\r\n   justify-content: flex-start;\r\n   position: relative;\r\n   text-decoration: none;\r\n   text-indent: 0;\r\n   text-transform: none;\r\n   background-color: #0D47A1!important;\r\n}\r\n.info__button-text{\r\n   font-size: 18px;\r\n   height: 41px!important;\r\n   padding: 7px!important;\r\n   width: 315px;\r\n   margin-left: 12px;\r\n   margin-top: 3px;\r\n   margin-bottom: 0;\r\n   border-radius: 6px;\r\n   align-items: center;\r\n   font-weight: 400;\r\n   letter-spacing: 0.3px;\r\n   justify-content: flex-start;\r\n   position: relative;\r\n   text-decoration: none;\r\n   text-indent: 0;\r\n   text-transform: none;\r\n   background-color: #0D47A1!important;\r\n}\r\n/* .info__button > span.clicked-zvit .info__button{\r\n   background-color: violet!important;\r\n} */\r\n.yearChoose_button{\r\n   background-color: #0D47A1!important;\r\n}\r\n.clicked-zvit{\r\n   background-color: #d83535!important;\r\n}\r\n.info__button.zvit{\r\n   width: 200px;\r\n   justify-content: center;\r\n}\r\n.buttons__section{\r\n   justify-content: flex-start;\r\n   margin-top: 8px;\r\n}\r\n\r\n@media (max-width: 360px) {\r\n   .appo-div {\r\n      margin-bottom: 15px;\r\n      margin-right: 0;\r\n      width: 260px;\r\n   }\r\n}\r\n\r\n@media (min-width: 361px) and (max-width: 390px) {\r\n   .appo-div {\r\n      margin-bottom: 15px;\r\n      margin-right: 0;\r\n      width: 300px;\r\n   }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n   .section {\r\n      justify-content: center;\r\n   }\r\n}\r\n@media (max-width: 800px) {\r\n   .layout-unit{\r\n   flex: 30%;\r\n}\r\n}\r\n@media (max-width: 600px) {\r\n   .layout-unit{\r\n   flex: 48%;\r\n   }\r\n   .buttons__section{\r\n      justify-content: center;\r\n   }\r\n}\r\n@media (max-width: 390px) {\r\n   .layout-unit{\r\n   flex: 100%;\r\n   }\r\n   .btn-archive {\r\n   margin-bottom: 15px;\r\n   }\r\n   .info__button{\r\n   width: 280px;\r\n   margin-left: 0px;\r\n   }\r\n}\r\n@media (max-width: 350px){\r\n   .info__button{\r\n   width: 250px;\r\n   margin-left: 0px;\r\n   }\r\n}\r\n</style>\r\n<style>\r\n.appo-div > .v-card{\r\n   min-height: 228px;\r\n}\r\n\r\n\r\n</style>"]}]}