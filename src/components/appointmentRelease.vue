<template >
  <v-layout class="layoutt" v-if="!toDelete">
      <v-layout row wrap>
          <v-flex xs12>
              <button @click="toList" class="white--text  mr-4 blue darken-1 pa-2 mb-5">Повернутися назад</button>
              <button v-if="true == false" @click="toProfile" class="white--text  blue darken-1 pa-2 mb-5">To Profile</button>
              <v-card>
                  <v-card-text class="pp-wrapper">
                     <p class="p-unit">ПІБ: <span class="span-unit">{{singleAppointment.user.firstName}} {{singleAppointment.user.lastName}}</span> &zwnj; &zwnj; &zwnj; &zwnj; &zwnj; &zwnj; Рік народження: <span class="span-unit">{{singleAppointment.dateAge | dateR}}</span></p>
                     <p class="p-unit">Категорія: <span class="span-unit">{{singleAppointment.rank}}</span> &zwnj; &zwnj; &zwnj; &zwnj; &zwnj; &zwnj; Історія хвороби: <span class="span-unit">{{singleAppointment.sicknessHistory}}</span></p>
                     <p class="p-unit">Дата поступлення: <span class="span-unit">{{singleAppointment.dateEntry | dateR}}</span> &zwnj; &zwnj; &zwnj; &zwnj; &zwnj; &zwnj; Дата виписки: <span class="span-unit">{{singleAppointment.dateLeft | dateR}}</span></p>
                     <p class="p-unit">Код за  МКХ:  <span class="span-unit">{{singleAppointment.nozologia}}</span> &zwnj; &zwnj; &zwnj; &zwnj; &zwnj; &zwnj; Код операції: <span class="span-unit">{{singleAppointment.op_code}}</span></p>
                     <p class="p-unit">Первинність:  <span class="span-unit">{{singleAppointment.timeType}}</span> &zwnj; &zwnj; &zwnj; &zwnj; &zwnj; &zwnj; Терміновість: <span class="span-unit">{{singleAppointment.urgencyType}}</span></p>
                     <p class="p-unit">Операція: <span class="span-unit">{{singleAppointment.title}}({{singleAppointment.op_code}})</span> &zwnj; &zwnj; &zwnj; &zwnj; &zwnj; &zwnj; Тип анестезії: <span class="span-unit">{{singleAppointment.anesthesiaType}}</span></p>
                     <p class="p-unit">Дата: <span class="span-unit">{{singleAppointment.date | dateR}}</span> &zwnj; &zwnj; &zwnj; &zwnj; &zwnj; &zwnj; Тривалість: <span class="span-unit">{{singleAppointment.duration}} </span></p>
                     <p class="p-unit">Початок Операції: <span class="span-unit">{{singleAppointment.timeStart}} &zwnj; &zwnj; &zwnj; &zwnj; &zwnj; &zwnj; </span> Кінець Операції: <span class="span-unit">{{singleAppointment.timeEnd}}</span></p>
                     <p class="p-unit">Тип операції: <span class="span-unit">{{singleAppointment.operationType}}</span> &zwnj; &zwnj; &zwnj; &zwnj; &zwnj; &zwnj; <span class="span-unit">{{singleAppointment.spotType}} </span></p>
                     <p class="p-unit"> <br> Опис операції: <span class="span-unit">{{singleAppointment.description}}</span></p>
                     <p class="p-unit"><br> Післяопераційний діагноз: <span class="span-unit">{{singleAppointment.diagnosisAfter}}</span></p>
                     <p class="p-unit"><br> Оперував: <span class="span-unit">{{singleAppointment.surgeon}}</span></p>
                     <p class="p-unit">Асистували: <span class="span-unit">{{singleAppointment.assistant}}</span></p>
                     <p class="p-unit">Анестезіолог: <span class="span-unit">{{singleAppointment.anesthesiologist}} </span> </p> 
                     <p class="p-unit">Операційна сестра: <span class="span-unit">{{singleAppointment.medsister}} </span></p>
                      <!-- <p class="p-unit">Дата операції: <span class="span-unit">{{singleAppointment.date | dateF}}</span></p>
                      <p class="p-unit">Поступив: <span class="span-unit">{{singleAppointment.dateEntry | dateF}}</span></p>
                      <p class="p-unit">Дата виписки: <span class="span-unit">{{singleAppointment.dateLeft | dateF}}</span></p>
                      <p class="p-unit">Дата народження: <span class="span-unit">{{singleAppointment.dateAge | dateF}}</span></p> 
                      <p class="p-unit">Patient: <span class="span-unit">{{singleAppointment.user.firstName}} {{singleAppointment.user.lastName}}</span></p>
                      <p class="p-unit">Вік: <span class="span-unit">{{age}}</span></p>
                      <p class="p-unit">Опис: <span class="span-unit">{{singleAppointment.description}}</span></p>
                      <p class="p-unit">Тривалість: <span class="span-unit">{{singleAppointment.duration}}</span></p>
                      <p class="p-unit">Первинна/ Повторна: <span class="span-unit">{{singleAppointment.timeType}}</span></p>
                      <p class="p-unit">Планова / Ургентна: <span class="span-unit">{{singleAppointment.urgencyType}}</span></p>
                      <p class="p-unit">Тип операції: <span class="span-unit">{{singleAppointment.operationType}}</span></p>
                      <p class="p-unit">Тип анестезії: <span class="span-unit">{{singleAppointment.anesthesiaType}}</span></p>
                      <p class="p-unit">Стаціонарна/ Амбулаторна: <span class="span-unit">{{singleAppointment.spotType}}</span></p>
                      <p class="p-unit">Виписаний / Помер: <span class="span-unit">{{singleAppointment.ultimateType}}</span></p>
                      <p class="p-unit">Ускладнення: <span class="span-unit">{{singleAppointment.complexity}}</span></p>
                      <p class="p-unit">Гістологічне заключення: <span class="span-unit">{{singleAppointment.gisto}}</span></p>
                      <p class="p-unit">Нозологія: <span class="span-unit">{{singleAppointment.nozologia}}</span></p>
                      <p class="p-unit">Хірург: <span class="span-unit">{{singleAppointment.surgeon}}</span></p>
                      <p class="p-unit">Номер Операції: <span class="span-unit">{{singleAppointment.op_number}}</span></p>
                      <p class="p-unit">Код Операції: <span class="span-unit">{{singleAppointment.op_code}}</span></p>
                      <p class="p-unit">Звання: <span class="span-unit">{{singleAppointment.rank}}</span></p> -->
                      <!-- <edit-date  v-if="isAuthor" :post="singleAppointment"></edit-date>
                      <edit-dateentry v-if="isAuthor" :post="singleAppointment"></edit-dateentry>
                      <edit-dateleft v-if="isAuthor" :post="singleAppointment"></edit-dateleft>
                      <edit-dateage v-if="isAuthor" :post="singleAppointment"></edit-dateage>
                      <edit-duration v-if="isAuthor" :post="singleAppointment"></edit-duration>
                      <edit-details v-if="isAuthor" :post="singleAppointment"></edit-details> -->
                  </v-card-text>
              </v-card>
          </v-flex>
      </v-layout>
  </v-layout>
</template>

<script>

export default {
    props: ['id'],
    data(){
        return {
            checkbox: '',
            onDelete: false,
            toDelete: false,
        }
    },
    computed: {
        singleAppointment(){
            return this.$store.getters.appointment(this.id)
        },
        currentUser(){
            return this.$store.getters.onUserChanged
        },
        isAuthor(){
            if(this.singleAppointment.creatorId === this.currentUser){
                return true
            } else {
                return false
            }
        },
        age(){
            const nowDate = new Date()
            let ageNumber = (nowDate.getTime() - this.singleAppointment.dateAge.toDate().getTime()) / (1000 * 3600 * 24 * 365) 
            console.log(ageNumber)
            ageNumber = ageNumber - 0.012
            console.log(ageNumber)
            ageNumber = Math.floor(ageNumber) 
            console.log(ageNumber)
            return ageNumber
        }

    },
    methods: {
        onSubmit(){
            this.toDelete = true
            this.$store.dispatch('deleteAppointment', this.id)
        },
        toProfile(){
            this.$router.push('/profile').catch(()=>{})
        },
        toList(){
            this.$router.push('/').catch(()=>{})
            this.$destroy()
        }
    }
}
</script>

<style scope lang="scss">
.layoutt{
    padding: 15px;
}
.pps-wrapper{
    display: flex;
    flex-wrap: wrap;
    flex-direction: column;
    max-height: 5000px;
}
.p-unit{
    color: #000000;
    display: block;
    padding: 15px;
    font-size: 17px;
    margin: 0px 5px!important;
    margin-bottom: 7px!important;
    box-shadow: 0px 0px 1px 1px rgba(0,0,0,0.26);
}
.span-unit{
    font-weight: 500;
}
@media (max-width: 1200px){
    .pp-wrapper{
        max-height: 5000px;
    }
}
@media (max-width: 820px){
    .pp-wrapper{
        max-height: 5000px;
    }
    
}
@media (max-width: 430px){
    .p-unit{
        padding: 15px;
        font-size: 14px;
    }

    .pp-wrapper{
        max-height: 5000px;
        padding: 4px!important;
    }
}

</style>